{"code":"import { useState, useEffect, useRef } from 'react';\r\nimport useMethods from './useMethods';\r\nimport { maxWaitAnimationTime } from '../variables';\r\nconst initialRect = {\r\n    T: 0,\r\n    L: 0,\r\n    W: 0,\r\n    H: 0,\r\n    // 图像填充方式\r\n    FIT: undefined,\r\n};\r\nexport default function useAnimationOrigin(visible, originRef, loaded, speed, updateEasing) {\r\n    const [originRect, updateOriginRect] = useState(initialRect);\r\n    // 动画状态\r\n    const [easingMode, updateEasingMode] = useState(0);\r\n    const initialTime = useRef(null);\r\n    const fn = useMethods({\r\n        OK: () => visible && updateEasingMode(4),\r\n    });\r\n    useEffect(() => {\r\n        // 记录初始打开的时间\r\n        if (!initialTime.current) {\r\n            initialTime.current = Date.now();\r\n        }\r\n        if (!loaded) {\r\n            return;\r\n        }\r\n        handleUpdateOrigin(originRef, updateOriginRect);\r\n        // 打开动画处理\r\n        if (visible) {\r\n            // 小于最大允许动画时间，则执行缩放动画\r\n            if (Date.now() - initialTime.current < maxWaitAnimationTime) {\r\n                updateEasingMode(1);\r\n                // 延时执行动画，保持 transition 生效\r\n                requestAnimationFrame(() => {\r\n                    updateEasingMode(2);\r\n                    requestAnimationFrame(() => handleToShape(3));\r\n                });\r\n                setTimeout(fn.OK, speed);\r\n                return;\r\n            }\r\n            // 超出则不执行\r\n            updateEasingMode(4);\r\n            return;\r\n        }\r\n        // 关闭动画处理\r\n        handleToShape(5);\r\n    }, [visible, loaded]);\r\n    function handleToShape(currentShape) {\r\n        updateEasing(false);\r\n        updateEasingMode(currentShape);\r\n    }\r\n    return [easingMode, originRect];\r\n}\r\n/**\r\n * 更新缩略图位置信息\r\n */\r\nfunction handleUpdateOrigin(originRef, updateOriginRect) {\r\n    const element = originRef && originRef.current;\r\n    if (element && element.nodeType === 1) {\r\n        // 获取触发时节点位置\r\n        const { top, left, width, height } = element.getBoundingClientRect();\r\n        const isImage = element.tagName === 'IMG';\r\n        updateOriginRect({\r\n            T: top,\r\n            L: left,\r\n            W: width,\r\n            H: height,\r\n            FIT: isImage ? getComputedStyle(element).objectFit : undefined,\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=useAnimationOrigin.js.map","references":["/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/node_modules/@types/react/ts5.0/index.d.ts","/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/node_modules/@types/react/ts5.0/index.d.ts","/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/src/types.ts","/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/src/hooks/useMethods.ts","/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/src/variables.ts"],"map":"{\"version\":3,\"file\":\"useAnimationOrigin.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/hooks/useAnimationOrigin.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/dist/hooks/useAnimationOrigin.d.ts","writeByteOrderMark":false,"text":"import type { MutableRefObject } from 'react';\r\nimport type { EasingMode, OriginRectType } from '../types';\r\nexport default function useAnimationOrigin(visible: boolean | undefined, originRef: MutableRefObject<HTMLElement | null> | undefined, loaded: boolean, speed: number, updateEasing: (pause: boolean) => void): [\r\n    easingMode: EasingMode,\r\n    originRect: OriginRectType\r\n];\r\n"}}
