{"code":"import { useImperativeHandle, Children, cloneElement, useContext, useEffect, useMemo, useRef } from 'react';\r\nimport useInitial from './hooks/useInitial';\r\nimport useMethods from './hooks/useMethods';\r\nimport PhotoContext from './photo-context';\r\nconst PhotoView = ({ src, render, overlay, width, height, triggers = ['onClick'], children, }) => {\r\n    const photoContext = useContext(PhotoContext);\r\n    const key = useInitial(() => photoContext.nextId());\r\n    const originRef = useRef(null);\r\n    useImperativeHandle(children?.ref, () => originRef.current);\r\n    useEffect(() => {\r\n        return () => {\r\n            photoContext.remove(key);\r\n        };\r\n    }, [key, photoContext]);\r\n    function invokeChildrenFn(eventName, e) {\r\n        if (children) {\r\n            const eventFn = children.props[eventName];\r\n            if (eventFn) {\r\n                eventFn(e);\r\n            }\r\n        }\r\n    }\r\n    const fn = useMethods({\r\n        render(props) {\r\n            return render && render(props);\r\n        },\r\n        show(eventName, e) {\r\n            photoContext.show(key);\r\n            invokeChildrenFn(eventName, e);\r\n        },\r\n    });\r\n    const eventListeners = useMemo(() => {\r\n        const listener = {};\r\n        triggers.forEach((eventName) => {\r\n            listener[eventName] = fn.show.bind(null, eventName);\r\n        });\r\n        return listener;\r\n    }, [triggers, fn]);\r\n    useEffect(() => {\r\n        photoContext.update({\r\n            key,\r\n            src,\r\n            originRef,\r\n            render: fn.render,\r\n            overlay,\r\n            width,\r\n            height,\r\n        });\r\n    }, [key, src, fn.render, overlay, width, height, photoContext]);\r\n    if (children) {\r\n        return Children.only(cloneElement(children, { ...eventListeners, ref: originRef }));\r\n    }\r\n    return null;\r\n};\r\nexport default PhotoView;\r\n//# sourceMappingURL=PhotoView.js.map","references":["/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/node_modules/@types/react/ts5.0/index.d.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/node_modules/@types/react/ts5.0/index.d.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/hooks/useInitial.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/hooks/useMethods.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/photo-context.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/photo-context.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/types.ts"],"map":"{\"version\":3,\"file\":\"PhotoView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/PhotoView.tsx\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,mBAAmB,EAAE,QAAQ,EAAE,YAAY,EAAE,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAC5G,OAAO,UAAU,MAAM,oBAAoB,CAAC;AAC5C,OAAO,UAAU,MAAM,oBAAoB,CAAC;AAE5C,OAAO,YAAY,MAAM,iBAAiB,CAAC;AAkC3C,MAAM,SAAS,GAAuB,CAAC,EACrC,GAAG,EACH,MAAM,EACN,OAAO,EACP,KAAK,EACL,MAAM,EACN,QAAQ,GAAG,CAAC,SAAS,CAAC,EACtB,QAAQ,GACT,EAAE,EAAE;IACH,MAAM,YAAY,GAAG,UAAU,CAAmB,YAAY,CAAC,CAAC;IAChE,MAAM,GAAG,GAAG,UAAU,CAAC,GAAG,EAAE,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,CAAC;IACpD,MAAM,SAAS,GAAG,MAAM,CAAc,IAAI,CAAC,CAAC;IAE5C,mBAAmB,CAAE,QAAwD,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;IAE7G,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,GAAG,EAAE;YACV,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;QAC3B,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,CAAC;IAExB,SAAS,gBAAgB,CAAC,SAAiB,EAAE,CAAuB;QAClE,IAAI,QAAQ,EAAE;YACZ,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YAC1C,IAAI,OAAO,EAAE;gBACX,OAAO,CAAC,CAAC,CAAC,CAAC;aACZ;SACF;IACH,CAAC;IAED,MAAM,EAAE,GAAG,UAAU,CAAC;QACpB,MAAM,CAAC,KAAwB;YAC7B,OAAO,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,CAAC;QACjC,CAAC;QACD,IAAI,CAAC,SAAiB,EAAE,CAAmB;YACzC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACvB,gBAAgB,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;QACjC,CAAC;KACF,CAAC,CAAC;IAEH,MAAM,cAAc,GAAG,OAAO,CAAC,GAAG,EAAE;QAClC,MAAM,QAAQ,GAAkD,EAAE,CAAC;QACnE,QAAQ,CAAC,OAAO,CAAC,CAAC,SAAS,EAAE,EAAE;YAC7B,QAAQ,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,SAAS,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC;QACH,OAAO,QAAQ,CAAC;IAClB,CAAC,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,CAAC;IAEnB,SAAS,CAAC,GAAG,EAAE;QACb,YAAY,CAAC,MAAM,CAAC;YAClB,GAAG;YACH,GAAG;YACH,SAAS;YACT,MAAM,EAAE,EAAE,CAAC,MAAM;YACjB,OAAO;YACP,KAAK;YACL,MAAM;SACP,CAAC,CAAC;IACL,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC;IAEhE,IAAI,QAAQ,EAAE;QACZ,OAAO,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,GAAG,cAAc,EAAE,GAAG,EAAE,SAAS,EAAkC,CAAC,CAAC,CAAC;KACrH;IACD,OAAO,IAAI,CAAC;AACd,CAAC,CAAC;AAEF,eAAe,SAAS,CAAC\"}","dts":{"name":"/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/dist/PhotoView.d.ts","writeByteOrderMark":false,"text":"import type { FC } from 'react';\r\nimport type { PhotoRenderParams } from './types';\r\nexport interface PhotoViewProps {\r\n    /**\r\n     * 图片地址\r\n     */\r\n    src?: string;\r\n    /**\r\n     * 自定义渲染，优先级比 src 低\r\n     */\r\n    render?: (props: PhotoRenderParams) => React.ReactNode;\r\n    /**\r\n     * 自定义覆盖节点\r\n     */\r\n    overlay?: React.ReactNode;\r\n    /**\r\n     * 自定义渲染节点宽度\r\n     */\r\n    width?: number;\r\n    /**\r\n     * 自定义渲染节点高度\r\n     */\r\n    height?: number;\r\n    /**\r\n     * 子节点，一般为缩略图\r\n     */\r\n    children?: React.ReactElement;\r\n    /**\r\n     * 触发的事件\r\n     */\r\n    triggers?: ('onClick' | 'onDoubleClick')[];\r\n}\r\ndeclare const PhotoView: FC<PhotoViewProps>;\r\nexport default PhotoView;\r\n"}}
