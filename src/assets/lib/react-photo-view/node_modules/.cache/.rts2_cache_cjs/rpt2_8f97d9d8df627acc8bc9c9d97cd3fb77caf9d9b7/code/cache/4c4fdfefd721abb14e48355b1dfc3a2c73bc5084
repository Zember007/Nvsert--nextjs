{"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { useMemo, useRef } from 'react';\r\nimport useMethods from './hooks/useMethods';\r\nimport useSetState from './hooks/useSetState';\r\nimport PhotoContext from './photo-context';\r\nimport PhotoSlider from './PhotoSlider';\r\nconst initialState = {\r\n    images: [],\r\n    visible: false,\r\n    index: 0,\r\n};\r\nexport default function PhotoProvider({ children, onIndexChange, onVisibleChange, ...restProps }) {\r\n    const [state, updateState] = useSetState(initialState);\r\n    const uniqueIdRef = useRef(0);\r\n    const { images, visible, index } = state;\r\n    const methods = useMethods({\r\n        nextId() {\r\n            return (uniqueIdRef.current += 1);\r\n        },\r\n        update(imageItem) {\r\n            const currentIndex = images.findIndex((n) => n.key === imageItem.key);\r\n            if (currentIndex > -1) {\r\n                const nextImages = images.slice();\r\n                nextImages.splice(currentIndex, 1, imageItem);\r\n                updateState({\r\n                    images: nextImages,\r\n                });\r\n                return;\r\n            }\r\n            updateState((prev) => ({\r\n                images: prev.images.concat(imageItem),\r\n            }));\r\n        },\r\n        remove(key) {\r\n            updateState((prev) => {\r\n                const nextImages = prev.images.filter((item) => item.key !== key);\r\n                const nextEndIndex = nextImages.length - 1;\r\n                return {\r\n                    images: nextImages,\r\n                    index: Math.min(nextEndIndex, index),\r\n                };\r\n            });\r\n        },\r\n        show(key) {\r\n            const currentIndex = images.findIndex((item) => item.key === key);\r\n            updateState({\r\n                visible: true,\r\n                index: currentIndex,\r\n            });\r\n            if (onVisibleChange) {\r\n                onVisibleChange(true, currentIndex, state);\r\n            }\r\n        },\r\n    });\r\n    const fn = useMethods({\r\n        close() {\r\n            updateState({\r\n                visible: false,\r\n            });\r\n            if (onVisibleChange) {\r\n                onVisibleChange(false, index, state);\r\n            }\r\n        },\r\n        changeIndex(nextIndex) {\r\n            updateState({\r\n                index: nextIndex,\r\n            });\r\n            if (onIndexChange) {\r\n                onIndexChange(nextIndex, state);\r\n            }\r\n        },\r\n    });\r\n    const value = useMemo(() => ({ ...state, ...methods }), [state, methods]);\r\n    return (_jsxs(PhotoContext.Provider, { value: value, children: [children, _jsx(PhotoSlider, { images: images, visible: visible, index: index, onIndexChange: fn.changeIndex, onClose: fn.close, ...restProps })] }));\r\n}\r\n//# sourceMappingURL=PhotoProvider.js.map","references":["/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/node_modules/@types/react/ts5.0/index.d.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/types.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/hooks/useMethods.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/hooks/useSetState.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/photo-context.ts","/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/src/PhotoSlider.tsx"],"map":"{\"version\":3,\"file\":\"PhotoProvider.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/PhotoProvider.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/home/georgii/Документы/nvsert/nvsert/src/assets/lib/react-photo-view/dist/PhotoProvider.d.ts","writeByteOrderMark":false,"text":"import React from 'react';\r\nimport type { DataType, PhotoProviderBase } from './types';\r\nexport interface PhotoProviderProps extends PhotoProviderBase {\r\n    children: React.ReactNode;\r\n    onIndexChange?: (index: number, state: PhotoProviderState) => void;\r\n    onVisibleChange?: (visible: boolean, index: number, state: PhotoProviderState) => void;\r\n}\r\ntype PhotoProviderState = {\r\n    images: DataType[];\r\n    visible: boolean;\r\n    index: number;\r\n};\r\nexport default function PhotoProvider({ children, onIndexChange, onVisibleChange, ...restProps }: PhotoProviderProps): import(\"react/jsx-runtime\").JSX.Element;\r\nexport {};\r\n"}}
