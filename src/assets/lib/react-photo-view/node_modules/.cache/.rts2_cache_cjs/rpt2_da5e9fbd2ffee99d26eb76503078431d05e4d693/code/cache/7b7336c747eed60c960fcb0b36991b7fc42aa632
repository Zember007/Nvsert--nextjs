{"code":"import { useReducer, useRef } from 'react';\r\nimport useForkedVariable from './useForkedVariable';\r\n/**\r\n * 动画关闭处理真实关闭状态\r\n * 通过 onAnimationEnd 回调实现 leaveCallback\r\n */\r\nexport default function useAnimationVisible(visible, afterClose) {\r\n    const [, handleRender] = useReducer((c) => !c, false);\r\n    const activeAnimation = useRef(0);\r\n    // 可见状态分支\r\n    const [realVisible, modifyRealVisible] = useForkedVariable(visible, (modify) => {\r\n        // 可见状态：设置进入动画\r\n        if (visible) {\r\n            modify(visible);\r\n            activeAnimation.current = 1;\r\n        }\r\n        else {\r\n            activeAnimation.current = 2;\r\n        }\r\n    });\r\n    function onAnimationEnd() {\r\n        // 动画结束后触发渲染\r\n        handleRender();\r\n        // 结束动画：设置隐藏状态\r\n        if (activeAnimation.current === 2) {\r\n            modifyRealVisible(false);\r\n            // 触发隐藏回调\r\n            if (afterClose) {\r\n                afterClose();\r\n            }\r\n        }\r\n        // 重置状态\r\n        activeAnimation.current = 0;\r\n    }\r\n    return [\r\n        /**\r\n         * 真实可见状态\r\n         */\r\n        realVisible,\r\n        /**\r\n         * 正在进行的动画\r\n         */\r\n        activeAnimation.current,\r\n        /**\r\n         * 动画结束后回调\r\n         */\r\n        onAnimationEnd,\r\n    ];\r\n}\r\n//# sourceMappingURL=useAnimationVisible.js.map","references":["/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/node_modules/@types/react/ts5.0/index.d.ts","/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/src/types.ts","/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/src/hooks/useForkedVariable.ts"],"map":"{\"version\":3,\"file\":\"useAnimationVisible.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/hooks/useAnimationVisible.tsx\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAE3C,OAAO,iBAAiB,MAAM,qBAAqB,CAAC;AAEpD;;;GAGG;AACH,MAAM,CAAC,OAAO,UAAU,mBAAmB,CACzC,OAA4B,EAC5B,UAAuB;IAEvB,MAAM,CAAC,EAAE,YAAY,CAAC,GAAG,UAAU,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;IAEtD,MAAM,eAAe,GAAG,MAAM,CAAsB,CAAC,CAAC,CAAC;IAEvD,SAAS;IACT,MAAM,CAAC,WAAW,EAAE,iBAAiB,CAAC,GAAG,iBAAiB,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,EAAE;QAC7E,cAAc;QACd,IAAI,OAAO,EAAE;YACX,MAAM,CAAC,OAAO,CAAC,CAAC;YAChB,eAAe,CAAC,OAAO,GAAG,CAAC,CAAC;SAC7B;aAAM;YACL,eAAe,CAAC,OAAO,GAAG,CAAC,CAAC;SAC7B;IACH,CAAC,CAAC,CAAC;IAEH,SAAS,cAAc;QACrB,YAAY;QACZ,YAAY,EAAE,CAAC;QACf,cAAc;QACd,IAAI,eAAe,CAAC,OAAO,KAAK,CAAC,EAAE;YACjC,iBAAiB,CAAC,KAAK,CAAC,CAAC;YACzB,SAAS;YACT,IAAI,UAAU,EAAE;gBACd,UAAU,EAAE,CAAC;aACd;SACF;QACD,OAAO;QACP,eAAe,CAAC,OAAO,GAAG,CAAC,CAAC;IAC9B,CAAC;IAED,OAAO;QACL;;WAEG;QACH,WAAW;QACX;;WAEG;QACH,eAAe,CAAC,OAAO;QACvB;;WAEG;QACH,cAAc;KACf,CAAC;AACJ,CAAC\"}","dts":{"name":"/Users/georgiiborisov/Documents/Nvsert--nextjs/src/assets/lib/react-photo-view/dist/hooks/useAnimationVisible.d.ts","writeByteOrderMark":false,"text":"import type { ActiveAnimationType } from '../types';\r\n/**\r\n * 动画关闭处理真实关闭状态\r\n * 通过 onAnimationEnd 回调实现 leaveCallback\r\n */\r\nexport default function useAnimationVisible(visible: boolean | undefined, afterClose?: () => void): [realVisible: boolean | undefined, activeAnimation: ActiveAnimationType, onAnimationEnd: () => void];\r\n"}}
