{"version":3,"file":"react-photo-view.modern.js","sources":["../src/hooks/useMethods.ts","../src/hooks/useSetState.ts","../src/photo-context.ts","../src/variables.ts","../src/utils/isTouchDevice.ts","../src/utils/limitTarget.ts","../src/hooks/useIsomorphicLayoutEffect.ts","../src/hooks/useAdjacentImages.ts","../src/hooks/useEventListener.ts","../src/hooks/useForkedVariable.ts","../src/hooks/useAnimationVisible.tsx","../src/components/SlidePortal.tsx","../src/components/CloseIcon.tsx","../src/components/ArrowLeft.tsx","../src/components/ArrowRight.tsx","../src/components/PreventScroll.tsx","../src/utils/getMultipleTouchPosition.ts","../src/utils/edgeHandle.ts","../src/utils/getPositionOnMoveOrScale.ts","../src/utils/getRotateSize.ts","../src/utils/getSuitableImageSize.ts","../src/hooks/useDebounceCallback.ts","../src/hooks/useContinuousTap.ts","../src/hooks/useScrollPosition.ts","../src/hooks/useAnimationOrigin.tsx","../src/hooks/useTargetScale.ts","../src/hooks/useAnimationPosition.ts","../src/hooks/useMountedRef.ts","../src/components/Spinner.tsx","../src/Photo.tsx","../src/PhotoBox.tsx","../src/PhotoSlider.tsx","../src/PhotoProvider.tsx","../src/hooks/useInitial.ts","../src/PhotoView.tsx"],"sourcesContent":["import { useRef } from 'react';\n\n/**\n * Hook of persistent methods\n */\nexport default function useMethods<T extends Record<string, (...args: any[]) => any>>(fn: T) {\n  const { current } = useRef({\n    fn,\n    curr: undefined as T | undefined,\n  });\n  current.fn = fn;\n\n  if (!current.curr) {\n    const curr = Object.create(null);\n    Object.keys(fn).forEach((key) => {\n      curr[key] = (...args: unknown[]) => current.fn[key].call(current.fn, ...args);\n    });\n    current.curr = curr;\n  }\n\n  return current.curr as T;\n}","import { useReducer } from 'react';\n\nexport default function useSetState<S extends Record<string, any>>(initialState: S) {\n  return useReducer(\n    (state: S, action: Partial<S> | ((state: S) => Partial<S>)) => ({\n      ...state,\n      ...(typeof action === 'function' ? action(state) : action),\n    }),\n    initialState,\n  );\n}\n","import { createContext } from 'react';\nimport type { DataType } from './types';\n\nexport type UpdateItemType = (dataType: DataType) => void;\n\nexport interface PhotoContextType {\n  show: (key: number) => void;\n  update: UpdateItemType;\n  remove: (key: number) => void;\n  nextId: () => number;\n  \n}\n\nexport default createContext<PhotoContextType>(undefined as unknown as PhotoContextType);\n","/**\n * 最大触摸时间\n */\nexport const maxTouchTime = 200;\n\n/**\n * 默认动画速度\n */\nexport const defaultSpeed = 400;\n\n/**\n * 默认动画函数\n */\nexport const defaultEasing = 'cubic-bezier(0.25, 0.8, 0.25, 1)';\n\n/**\n * 最大滑动切换图片距离\n */\nexport const maxMoveOffset = 100;\n\n/**\n * 图片的间隔\n */\nexport const horizontalOffset = 20;\n\n/**\n * 最小初始响应距离\n */\nexport const minStartTouchOffset = 20;\n\n/**\n * 默认背景透明度\n */\nexport const defaultOpacity = 1;\n\n/**\n * 最小缩放度\n */\nexport const minScale = 1;\n\n/**\n * 最大缩放度（若图片足够大，则会超出）\n */\nexport const maxScale = 6;\n\n/**\n * 最小长图模式比例\n */\nexport const longModeRatio = 3;\n\n/**\n * 缩放弹性缓冲\n */\nexport const scaleBuffer = 0.2;\n\n/**\n * 最大等待动画时间\n */\nexport const maxWaitAnimationTime = 250;\n","/**\n * 是否支持触摸设备\n */\nconst isTouchDevice = typeof window !== 'undefined' && 'ontouchstart' in window;\n\nexport default isTouchDevice;\n","import { maxScale, minScale } from '../variables';\n\nexport const limitNumber = (value: number, min: number, max: number) => {\n  return Math.max(Math.min(value, max), min);\n};\n\n/**\n * 限制最大/最小缩放\n */\nexport const limitScale = (scale: number, max: number = 0, buffer: number = 0) => {\n  return limitNumber(scale, minScale * (1 - buffer), Math.max(maxScale, max) * (1 + buffer));\n};\n","import { useEffect, useLayoutEffect } from 'react';\n\nconst isSSR = typeof window === 'undefined' || /ServerSideRendering/.test(navigator && navigator.userAgent);\n\nexport default isSSR ? useEffect : useLayoutEffect;\n","import { useMemo } from 'react';\nimport type { DataType } from '../types';\n\n/**\n * 截取相邻三张图片\n */\nexport default function useAdjacentImages(images: DataType[], index: number, loop: boolean) {\n  return useMemo(() => {\n    const imageLength = images.length;\n    if (loop) {\n      const connected = images.concat(images).concat(images);\n      return connected.slice(imageLength + index - 1, imageLength + index + 2);\n    }\n    return images.slice(Math.max(index - 1, 0), Math.min(index + 2, imageLength + 1));\n  }, [images, index, loop]);\n}\n","import { useEffect, useRef } from 'react';\n\nexport default function useEventListener<K extends keyof WindowEventMap>(\n  type: K | undefined,\n  fn: (evt: WindowEventMap[K]) => void,\n  options?: AddEventListenerOptions,\n) {\n  const latest = useRef(fn);\n  latest.current = fn;\n\n  useEffect(() => {\n    function wrapper(evt: WindowEventMap[K]) {\n      latest.current(evt);\n    }\n    if (type) {\n      window.addEventListener(type, wrapper, options);\n    }\n    return () => {\n      if (type) {\n        window.removeEventListener(type, wrapper);\n      }\n    };\n  }, [type]);\n}\n","import { useRef, useMemo } from 'react';\n\n/**\n * 逻辑分叉变量处理\n * 此 hook 不触发额外渲染\n */\nexport default function useForkedVariable<T>(initial: T, updater: (modify: (variable: T) => void) => void) {\n  // 初始分叉变量\n  const forkedRef = useRef(initial);\n\n  function modify(next: T) {\n    forkedRef.current = next;\n  }\n\n  useMemo(() => {\n    // 参数变化之后同步内部分叉变量\n    updater(modify);\n  }, [initial]);\n\n  return [forkedRef.current, modify] as const;\n}\n","import { useReducer, useRef } from 'react';\nimport type { ActiveAnimationType } from '../types';\nimport useForkedVariable from './useForkedVariable';\n\n/**\n * 动画关闭处理真实关闭状态\n * 通过 onAnimationEnd 回调实现 leaveCallback\n */\nexport default function useAnimationVisible(\n  visible: boolean | undefined,\n  afterClose?: () => void,\n): [realVisible: boolean | undefined, activeAnimation: ActiveAnimationType, onAnimationEnd: () => void] {\n  const [, handleRender] = useReducer((c) => !c, false);\n\n  const activeAnimation = useRef<ActiveAnimationType>(0);\n\n  // 可见状态分支\n  const [realVisible, modifyRealVisible] = useForkedVariable(visible, (modify) => {\n    // 可见状态：设置进入动画\n    if (visible) {\n      modify(visible);\n      activeAnimation.current = 1;\n    } else {\n      activeAnimation.current = 2;\n    }\n  });\n\n  function onAnimationEnd() {\n    // 动画结束后触发渲染\n    handleRender();\n    // 结束动画：设置隐藏状态\n    if (activeAnimation.current === 2) {\n      modifyRealVisible(false);\n      // 触发隐藏回调\n      if (afterClose) {\n        afterClose();\n      }\n    }\n    // 重置状态\n    activeAnimation.current = 0;\n  }\n\n  return [\n    /**\n     * 真实可见状态\n     */\n    realVisible,\n    /**\n     * 正在进行的动画\n     */\n    activeAnimation.current,\n    /**\n     * 动画结束后回调\n     */\n    onAnimationEnd,\n  ];\n}\n","import React from 'react';\nimport { createPortal } from 'react-dom';\nimport './SlidePortal.less';\n\nexport interface ISliderPortalProps extends React.HTMLAttributes<HTMLDivElement> {\n  container?: HTMLElement;\n}\n\nfunction SlidePortal({ container = document.body, ...rest }: ISliderPortalProps) {\n  return createPortal(<div {...rest} />, container);\n}\n\nexport default SlidePortal;\n","import React, { ButtonHTMLAttributes } from 'react';\n\nfunction CloseIcon(props: any) {\n  return (\n    <button {...props}>\n      <div className=\"in\">\n        <div className=\"close-button-block\"></div>\n        <div className=\"close-button-block\"></div>\n      </div>\n      <div className=\"out\">\n        <div className=\"close-button-block\"></div>\n        <div className=\"close-button-block\"></div>\n      </div>\n    </button>\n  );\n}\n\nexport default CloseIcon;\n","import React from 'react';\n\nfunction ArrowLeft(props: React.HTMLAttributes<SVGElement>) {\n  return (\n    <svg width=\"44\" height=\"44\" viewBox=\"0 0 768 768\" {...props}>\n      <path d=\"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z\" />\n    </svg>\n  );\n}\n\nexport default ArrowLeft;\n","import React from 'react';\n\nfunction ArrowRight(props: React.HTMLAttributes<SVGElement>) {\n  return (\n    <svg width=\"44\" height=\"44\" viewBox=\"0 0 768 768\" {...props}>\n      <path d=\"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z\" />\n    </svg>\n  );\n}\n\nexport default ArrowRight;\n","import { useEffect } from 'react';\n\nexport default function PreventScroll() {\n  useEffect(() => {\n    const { style } = document.body;\n    const lastOverflow = style.overflow;\n    style.overflow = 'hidden';\n\n    return () => {\n      style.overflow = lastOverflow;\n    };\n  }, []);\n\n  return null;\n}\n","import type React from 'react';\n\n/**\n * 从 Touch 事件中获取两个触控中心位置\n */\nexport default function getMultipleTouchPosition(\n  evt: TouchEvent | React.TouchEvent,\n): [clientX: number, clientY: number, touchLength: number] {\n  const { clientX, clientY } = evt.touches[0];\n  if (evt.touches.length >= 2) {\n    const { clientX: nextClientX, clientY: nextClientY } = evt.touches[1];\n    return [\n      (clientX + nextClientX) / 2,\n      (clientY + nextClientY) / 2,\n      Math.sqrt((nextClientX - clientX) ** 2 + (nextClientY - clientY) ** 2),\n    ];\n  }\n  return [clientX, clientY, 0];\n}\n","import type { CloseEdgeType, ReachType, TouchStartType } from '../types';\n\n/**\n * 获取接触边缘类型\n */\nexport const getReachType = (\n  initialTouchState: TouchStartType,\n  horizontalCloseEdge: CloseEdgeType,\n  verticalCloseEdge: CloseEdgeType,\n  reachPosition: ReachType,\n): ReachType => {\n  if ((horizontalCloseEdge && initialTouchState === 1) || reachPosition === 'x') {\n    return 'x';\n  }\n  if ((verticalCloseEdge && initialTouchState > 1) || reachPosition === 'y') {\n    return 'y';\n  }\n  return undefined;\n};\n\n/**\n * 计算接触边缘位置\n * @param position - x/y\n * @param scale\n * @param size - width/height\n * @param innerSize - innerWidth/innerHeight\n * @return [CloseEdgeType, position]\n */\nexport const computePositionEdge = (position: number, scale: number, size: number, innerSize: number) => {\n  const currentWidth = size * scale;\n  // 图片超出的宽度\n  const outOffset = (currentWidth - innerSize) / 2;\n  let closedEdge: CloseEdgeType;\n\n  let current = position;\n  if (currentWidth <= innerSize) {\n    closedEdge = 1;\n    current = 0;\n  } else if (position > 0 && outOffset - position <= 0) {\n    closedEdge = 2;\n    current = outOffset;\n  } else if (position < 0 && outOffset + position <= 0) {\n    closedEdge = 3;\n    current = -outOffset;\n  }\n\n  return [closedEdge, current] as const;\n};\n","import { longModeRatio } from '../variables';\nimport { computePositionEdge } from './edgeHandle';\n\n/**\n * 获取移动或缩放之后的中心点\n */\nexport default function getPositionOnMoveOrScale(\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  scale: number,\n  toScale: number,\n  clientX: number = innerWidth / 2,\n  clientY: number = innerHeight / 2,\n  offsetX: number = 0,\n  offsetY: number = 0,\n) {\n  // 是否接触边缘\n  const [closedEdgeX] = computePositionEdge(x, toScale, width, innerWidth);\n  const [closedEdgeY] = computePositionEdge(y, toScale, height, innerHeight);\n\n  const centerClientX = innerWidth / 2;\n  const centerClientY = innerHeight / 2;\n\n  // 坐标偏移\n  const lastPositionX = centerClientX + x;\n  const lastPositionY = centerClientY + y;\n\n  // 偏移位置\n  const originX = clientX - (clientX - lastPositionX) * (toScale / scale) - centerClientX;\n  const originY = clientY - (clientY - lastPositionY) * (toScale / scale) - centerClientY;\n  // 长图模式无左右反馈\n  const longModeEdge = height / width >= longModeRatio && width * toScale === innerWidth;\n  // 超出边缘距离减半\n  return {\n    x: originX + (longModeEdge ? 0 : closedEdgeX ? offsetX / 2 : offsetX),\n    y: originY + (closedEdgeY ? offsetY / 2 : offsetY),\n    lastCX: clientX,\n    lastCY: clientY,\n  };\n}\n","/**\n * 获取旋转后的宽高\n */\nexport default function getRotateSize(rotate: number, width: number, height: number) {\n  const isVertical = rotate % 180 !== 0;\n\n  // 若图片不是水平则调换属性\n  if (isVertical) {\n    return [height, width, isVertical] as const;\n  }\n\n  return [width, height, isVertical] as const;\n}\n","import { longModeRatio } from '../variables';\nimport getRotateSize from './getRotateSize';\n\n/**\n * 获取图片合适的大小\n */\nexport default function getSuitableImageSize(naturalWidth: number, naturalHeight: number, rotate: number) {\n  const [currentWidth, currentHeight, isVertical] = getRotateSize(rotate, innerWidth, innerHeight);\n\n  let y = 0;\n  let width = currentWidth;\n  let height = currentHeight;\n\n  // 自适应宽高\n  const autoWidth = (naturalWidth / naturalHeight) * currentHeight;\n  const autoHeight = (naturalHeight / naturalWidth) * currentWidth;\n\n  const maxWidth = 448;\n\n  if (naturalWidth < currentWidth && naturalHeight < currentHeight) {\n    width = naturalWidth;\n    height = naturalHeight;\n  } else if (naturalWidth < currentWidth && naturalHeight >= currentHeight) {\n    width = autoWidth;\n  } else if (naturalWidth >= currentWidth && naturalHeight < currentHeight) {\n    height = autoHeight;\n  } else if (naturalWidth / naturalHeight > currentWidth / currentHeight) {\n    height = autoHeight;\n  }\n  // 长图模式\n  else if (naturalHeight / naturalWidth >= longModeRatio && !isVertical) {\n    height = autoHeight;\n    y = (height - currentHeight) / 2;\n  } else {\n    width = autoWidth;\n  }\n\n   if (width > maxWidth) {\n    width = maxWidth;\n    height = (naturalHeight / naturalWidth) * maxWidth; // Сохраняем пропорции\n   } else {\n    width -= 30\n    height = (naturalHeight / naturalWidth) * width\n   }\n\n  return {\n    width,\n    height,\n    x: 0,\n    y,\n    pause: true,\n  };\n}\n","import { useCallback, useRef } from 'react';\n\ninterface DebounceCallback<CallbackArguments extends any[]> {\n  (...args: CallbackArguments): void;\n  cancel: () => void;\n}\n\nexport default function useDebounceCallback<CallbackArguments extends any[]>(\n  callback: (...args: CallbackArguments) => void,\n  {\n    leading = false,\n    maxWait,\n    wait = maxWait || 0,\n  }: {\n    leading?: boolean;\n    maxWait?: number;\n    wait?: number;\n  },\n): DebounceCallback<CallbackArguments> {\n  const callbackRef = useRef(callback);\n  callbackRef.current = callback;\n\n  const prev = useRef(0);\n  const trailingTimeout = useRef<ReturnType<typeof setTimeout>>(null);\n  const clearTrailing = () => trailingTimeout.current && clearTimeout(trailingTimeout.current);\n\n  const fn = useCallback(\n    (...args: CallbackArguments) => {\n      const now = Date.now();\n\n      function call() {\n        prev.current = now;\n        clearTrailing();\n        callbackRef.current.apply(null, args);\n      }\n      const last = prev.current;\n      const offset = now - last;\n      // leading\n      if (last === 0) {\n        if (leading) {\n          call();\n        }\n        prev.current = now;\n      }\n\n      // body\n      if (maxWait !== undefined) {\n        if (offset > maxWait) {\n          call();\n          return;\n        }\n      } else if (offset < wait) {\n        prev.current = now;\n      }\n\n      // trailing\n      clearTrailing();\n      trailingTimeout.current = setTimeout(() => {\n        call();\n        prev.current = 0;\n      }, wait);\n    },\n    [wait, maxWait, leading],\n  );\n  (fn as DebounceCallback<CallbackArguments>).cancel = clearTrailing;\n\n  return fn as DebounceCallback<CallbackArguments>;\n}\n","import { useRef } from 'react';\nimport useDebounceCallback from './useDebounceCallback';\n\nexport type TapFuncType<T> = (...args: T[]) => void;\n\n/**\n * 单击和双击事件处理\n * @param singleTap - 单击事件\n * @param doubleTap - 双击事件\n * @return invokeTap\n */\nexport default function useContinuousTap<T>(singleTap: TapFuncType<T>, doubleTap: TapFuncType<T>): TapFuncType<T> {\n  // 当前连续点击次数\n  const continuousClick = useRef(0);\n\n  const debounceTap = useDebounceCallback(\n    (...args) => {\n      continuousClick.current = 0;\n      singleTap(...args);\n    },\n    {\n      wait: 300,\n    },\n  );\n\n  return function invokeTap(...args) {\n    continuousClick.current += 1;\n    debounceTap(...args);\n    // 双击\n    if (continuousClick.current >= 2) {\n      debounceTap.cancel();\n      continuousClick.current = 0;\n      doubleTap(...args);\n    }\n  };\n}\n","import { computePositionEdge } from '../utils/edgeHandle';\nimport getPositionOnMoveOrScale from '../utils/getPositionOnMoveOrScale';\nimport getRotateSize from '../utils/getRotateSize';\nimport { defaultSpeed, maxTouchTime } from '../variables';\nimport useMethods from './useMethods';\n\n// 触边运动反馈\nconst rebound = (start: number, bound: number, callback: (spatial: number) => boolean) =>\n  easeOutMove(\n    start,\n    bound,\n    callback,\n    defaultSpeed / 4,\n    (t) => t,\n    () => easeOutMove(bound, start, callback),\n  );\n\n/**\n * 物理滚动到具体位置\n */\nexport default function useScrollPosition<C extends (spatial: number) => boolean>(\n  callbackX: C,\n  callbackY: C,\n  callbackS: C,\n) {\n  const callback = useMethods({\n    X: (spatial: number) => callbackX(spatial),\n    Y: (spatial: number) => callbackY(spatial),\n    S: (spatial: number) => callbackS(spatial),\n  });\n\n  return (\n    x: number,\n    y: number,\n    lastX: number,\n    lastY: number,\n    width: number,\n    height: number,\n    scale: number,\n    safeScale: number,\n    lastScale: number,\n    rotate: number,\n    touchedTime: number,\n  ) => {\n    const [currentWidth, currentHeight] = getRotateSize(rotate, width, height);\n    // 开始状态下边缘触发状态\n    const [beginEdgeX, beginX] = computePositionEdge(x, safeScale, currentWidth, innerWidth);\n    const [beginEdgeY, beginY] = computePositionEdge(y, safeScale, currentHeight, innerHeight);\n    const moveTime = Date.now() - touchedTime;\n\n    // 时间过长、超出安全范围的情况下不执行滚动逻辑，恢复安全范围\n    if (moveTime >= maxTouchTime || safeScale !== scale || Math.abs(lastScale - scale) > 1) {\n      // 计算中心缩放点\n      const { x: nextX, y: nextY } = getPositionOnMoveOrScale(x, y, width, height, scale, safeScale);\n      const targetX = beginEdgeX ? beginX : nextX !== x ? nextX : null;\n      const targetY = beginEdgeY ? beginY : nextY !== y ? nextY : null;\n\n      if (targetX !== null) {\n        easeOutMove(x, targetX, callback.X);\n      }\n      if (targetY !== null) {\n        easeOutMove(y, targetY, callback.Y);\n      }\n      if (safeScale !== scale) {\n        easeOutMove(scale, safeScale, callback.S);\n      }\n      return;\n    }\n\n    // 初始速度\n    const speedX = (x - lastX) / moveTime;\n    const speedY = (y - lastY) / moveTime;\n    const speedT = Math.sqrt(speedX ** 2 + speedY ** 2);\n    // 是否接触到边缘\n    let edgeX = false;\n    let edgeY = false;\n\n    scrollMove(speedT, (spatial) => {\n      const nextX = x + spatial * (speedX / speedT);\n      const nextY = y + spatial * (speedY / speedT);\n\n      const [isEdgeX, currentX] = computePositionEdge(nextX, scale, currentWidth, innerWidth);\n      const [isEdgeY, currentY] = computePositionEdge(nextY, scale, currentHeight, innerHeight);\n\n      if (isEdgeX && !edgeX) {\n        edgeX = true;\n        if (beginEdgeX) {\n          easeOutMove(nextX, currentX, callback.X);\n        } else {\n          rebound(currentX, nextX + (nextX - currentX), callback.X);\n        }\n      }\n\n      if (isEdgeY && !edgeY) {\n        edgeY = true;\n        if (beginEdgeY) {\n          easeOutMove(nextY, currentY, callback.Y);\n        } else {\n          rebound(currentY, nextY + (nextY - currentY), callback.Y);\n        }\n      }\n      // 同时接触边缘的情况下停止滚动\n      if (edgeX && edgeY) {\n        return false;\n      }\n\n      const resultX = edgeX || callback.X(currentX);\n      const resultY = edgeY || callback.Y(currentY);\n      return resultX && resultY;\n    });\n  };\n}\n\n// 加速度\nconst acceleration = -0.001;\n// 阻力\nconst resistance = 0.0002;\n\n/**\n * 通过速度滚动到停止\n */\nfunction scrollMove(initialSpeed: number, callback: (spatial: number) => boolean) {\n  let v = initialSpeed;\n  let s = 0;\n  let lastTime: number | undefined;\n  let frameId = 0;\n\n  const calcMove = (now: number) => {\n    if (!lastTime) {\n      lastTime = now;\n    }\n    const dt = now - lastTime;\n    const direction = Math.sign(initialSpeed);\n    const a = direction * acceleration;\n    const f = Math.sign(-v) * v ** 2 * resistance;\n    const ds = v * dt + ((a + f) * dt ** 2) / 2;\n    v += (a + f) * dt;\n\n    s += ds;\n    // move to s\n    lastTime = now;\n\n    if (direction * v <= 0) {\n      caf();\n      return;\n    }\n\n    if (callback(s)) {\n      raf();\n      return;\n    }\n    caf();\n  };\n  raf();\n\n  function raf() {\n    frameId = requestAnimationFrame(calcMove);\n  }\n  function caf() {\n    cancelAnimationFrame(frameId);\n  }\n}\n\n/**\n * 缓动函数\n */\nconst easeOutQuart = (x: number) => 1 - (1 - x) ** 4;\n\n/**\n * 缓动回调\n */\nfunction easeOutMove(\n  start: number,\n  end: number,\n  callback: (spatial: number) => boolean,\n  speed = defaultSpeed,\n  easing = easeOutQuart,\n  complete?: () => void,\n) {\n  const distance = end - start;\n  if (distance === 0) {\n    return;\n  }\n\n  const startTime = Date.now();\n  let frameId = 0;\n\n  const calcMove = () => {\n    const time = Math.min(1, (Date.now() - startTime) / speed);\n    const result = callback(start + easing(time) * distance);\n\n    if (result && time < 1) {\n      raf();\n      return;\n    }\n    cancelAnimationFrame(frameId);\n    if (time >= 1 && complete) {\n      complete();\n    }\n  };\n  raf();\n\n  function raf() {\n    frameId = requestAnimationFrame(calcMove);\n  }\n}\n","import type { Dispatch, MutableRefObject, SetStateAction } from 'react';\nimport { useState, useEffect, useRef } from 'react';\nimport type { EasingMode, OriginRectType } from '../types';\nimport useMethods from './useMethods';\nimport { maxWaitAnimationTime } from '../variables';\n\nconst initialRect: OriginRectType = {\n  T: 0,\n  L: 0,\n  W: 0,\n  H: 0,\n  // 图像填充方式\n  FIT: undefined,\n};\n\nexport default function useAnimationOrigin(\n  visible: boolean | undefined,\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  loaded: boolean,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n): [\n  // 动画状态\n  easingMode: EasingMode,\n  originRect: OriginRectType,\n] {\n  const [originRect, updateOriginRect] = useState(initialRect);\n  // 动画状态\n  const [easingMode, updateEasingMode] = useState<EasingMode>(0);\n  const initialTime = useRef<number>(null);\n\n  const fn = useMethods({\n    OK: () => visible && updateEasingMode(4),\n  });\n\n  useEffect(() => {\n    // 记录初始打开的时间\n    if (!initialTime.current) {\n      initialTime.current = Date.now();\n    }\n    if (!loaded) {\n      return;\n    }\n    handleUpdateOrigin(originRef, updateOriginRect);\n    // 打开动画处理\n    if (visible) {\n      // 小于最大允许动画时间，则执行缩放动画\n      if (Date.now() - initialTime.current < maxWaitAnimationTime) {\n        updateEasingMode(1);\n        // 延时执行动画，保持 transition 生效\n        requestAnimationFrame(() => {\n          updateEasingMode(2);\n          requestAnimationFrame(() => handleToShape(3));\n        });\n        setTimeout(fn.OK, speed);\n        return;\n      }\n      // 超出则不执行\n      updateEasingMode(4);\n      return;\n    }\n    // 关闭动画处理\n    handleToShape(5);\n  }, [visible, loaded]);\n\n  function handleToShape(currentShape: EasingMode) {\n    updateEasing(false);\n    updateEasingMode(currentShape);\n  }\n\n  return [easingMode, originRect];\n}\n\n/**\n * 更新缩略图位置信息\n */\nfunction handleUpdateOrigin(\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  updateOriginRect: Dispatch<SetStateAction<typeof initialRect>>,\n) {\n  const element = originRef && originRef.current;\n\n  if (element && element.nodeType === 1) {\n    // 获取触发时节点位置\n    const { top, left, width, height } = element.getBoundingClientRect();\n    const isImage = element.tagName === 'IMG';\n    updateOriginRect({\n      T: top,\n      L: left,\n      W: width,\n      H: height,\n      FIT: isImage ? (getComputedStyle(element).objectFit as 'contain' | 'cover' | 'fill' | undefined) : undefined,\n    });\n  }\n}\n","import { useRef } from 'react';\nimport useSetState from './useSetState';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nimport useDebounceCallback from './useDebounceCallback';\n\n/**\n * 目标缩放延迟处理\n */\nexport default function useTargetScale(\n  realWidth: number,\n  realHeight: number,\n  realScale: number,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n) {\n  const execRef = useRef(false);\n\n  const [{ lead, scale }, updateState] = useSetState({ lead: true, scale: realScale });\n\n  const moveScale = useDebounceCallback(\n    async (current: number) => {\n      updateEasing(true);\n      updateState({ lead: false, scale: current });\n    },\n    { wait: speed },\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (!execRef.current) {\n      execRef.current = true;\n      return;\n    }\n    updateEasing(false);\n    updateState({ lead: true });\n\n    moveScale(realScale);\n  }, [realScale]);\n\n  // 运动开始\n  if (lead) {\n    return [realWidth * scale, realHeight * scale, realScale / scale] as const;\n  }\n\n  // 运动结束\n  return [realWidth * realScale, realHeight * realScale, 1] as const;\n}\n","import type { MutableRefObject } from 'react';\nimport useAnimationOrigin from './useAnimationOrigin';\nimport useTargetScale from './useTargetScale';\n\nexport default function useAnimationPosition(\n  visible: boolean | undefined,\n  originRef: MutableRefObject<HTMLElement | null> | undefined,\n  loaded: boolean,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  scale: number,\n  speed: number,\n  updateEasing: (pause: boolean) => void,\n) {\n  // 延迟更新 width/height\n  const [autoWidth, autoHeight, autoScale] = useTargetScale(width, height, scale, speed, updateEasing);\n  // 动画源处理\n  const [easingMode, originRect] = useAnimationOrigin(visible, originRef, loaded, speed, updateEasing);\n\n  // 计算动画位置\n  const { T, L, W, H, FIT } = originRect;\n  // 偏移量，x: 0, y: 0 居中为初始\n  const centerWidth = innerWidth / 2;\n  const centerHeight = innerHeight / 2;\n  const offsetX = centerWidth - (width * scale) / 2;\n  const offsetY = centerHeight - (height * scale) / 2;\n  // 缩略图状态\n  const miniMode = easingMode < 3 || easingMode > 4;\n  // 有缩略图时，则为缩略图的位置，否则居中\n  const translateX = miniMode ? (W ? L : centerWidth) : x + offsetX;\n  const translateY = miniMode ? (W ? T : centerHeight) : y + offsetY;\n\n  // 最小值缩放\n  const minScale = W / (width * scale) || 0.01;\n\n  // 适应 objectFit 保持缩略图宽高比\n  const currentHeight = miniMode && FIT ? autoWidth * (H / W) : autoHeight;\n  // 初始加载情况无缩放\n  const currentScale = easingMode === 0 ? autoScale : miniMode ? minScale : autoScale;\n  const opacity = miniMode ? (FIT ? 1 : 0) : 1;\n\n  return [translateX, translateY, autoWidth, currentHeight, currentScale, opacity, easingMode, FIT] as const;\n}\n","import { useEffect, useRef } from 'react';\n\nconst useMountedRef = () => {\n  const mountedRef = useRef(false);\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n  return mountedRef;\n};\n\nexport default useMountedRef;\n","import React from 'react';\nimport './Spinner.less';\n\n// eslint-disable-next-line react/prop-types\nfunction Spinner({ className = '', ...props }: React.HTMLAttributes<HTMLElement>) {\n  return (\n    <div className={`PhotoView__Spinner ${className}`} {...props}>\n      <svg viewBox=\"0 0 32 32\" width=\"36\" height=\"36\" fill=\"white\">\n        <path opacity=\".25\" d=\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\" />\n        <path d=\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\" />\n      </svg>\n    </div>\n  );\n}\n\nexport default Spinner;\n","import React from 'react';\nimport Spinner from './components/Spinner';\nimport useMountedRef from './hooks/useMountedRef';\nimport type { BrokenElementParams } from './types';\nimport './Photo.less';\n\nexport interface IPhotoLoadedParams {\n  loaded?: boolean;\n  naturalWidth?: number;\n  naturalHeight?: number;\n  broken?: boolean;\n}\n\nexport interface IPhotoProps extends Omit<React.HTMLAttributes<HTMLElement>, 'title'> {\n  src: string;\n  loaded: boolean;\n  broken: boolean;\n  onPhotoLoad: (params: IPhotoLoadedParams) => void;\n  loadingElement?: React.ReactElement;\n  brokenElement?: React.ReactElement | ((photoProps: BrokenElementParams) => React.ReactElement);\n  title?: string | React.ReactNode;\n  description?: string | React.ReactNode;\n}\n\nexport default function Photo({\n  src,\n  loaded,\n  broken,\n  className,\n  onPhotoLoad,\n  loadingElement,\n  brokenElement,\n  title,\n  description,\n  ...restProps\n}: IPhotoProps) {\n  const mountedRef = useMountedRef();\n\n  function handleImageLoaded(e: React.SyntheticEvent<HTMLImageElement>) {\n    const { naturalWidth, naturalHeight } = e.target as HTMLImageElement;\n    if (mountedRef.current) {\n      onPhotoLoad({\n        loaded: true,\n        naturalWidth,\n        naturalHeight,\n      });\n    }\n  }\n\n  function handleImageBroken() {\n    if (mountedRef.current) {\n      onPhotoLoad({\n        broken: true,\n      });\n    }\n  }\n\n  if (src && !broken) {\n    return (\n      <>\n        <div className={`PhotoView__Photo__attr ${!loaded && 'loaded'}`}>\n          {loaded  && title && (\n            <div className=\"PhotoView__Photo__title\">\n              {title}\n            </div>\n          )}\n\n          <img\n            className={`PhotoView__Photo${className ? ` ${className}` : ''}`}\n            src={src}\n            onLoad={handleImageLoaded}\n            onError={handleImageBroken}\n            draggable={false}\n            alt=\"document\"\n            {...restProps}\n          />\n\n          {loaded && description && (\n            <div className=\"PhotoView__Photo__description\">\n              {description}\n            </div>\n          )}\n        </div>\n        {!loaded &&\n          (loadingElement ? (\n            <span className=\"PhotoView__icon\">{loadingElement}</span>\n          ) : (\n            <Spinner className=\"PhotoView__icon\" />\n          ))}\n      </>\n    );\n  }\n\n  if (brokenElement) {\n    return (\n      <span className=\"PhotoView__icon\">\n        {typeof brokenElement === 'function' ? brokenElement({ src }) : brokenElement}\n      </span>\n    );\n  }\n\n  return null;\n}\n","import React, { JSX, useRef } from 'react';\nimport isTouchDevice from './utils/isTouchDevice';\nimport getMultipleTouchPosition from './utils/getMultipleTouchPosition';\nimport getPositionOnMoveOrScale from './utils/getPositionOnMoveOrScale';\nimport { getReachType, computePositionEdge } from './utils/edgeHandle';\nimport getRotateSize from './utils/getRotateSize';\nimport { limitScale } from './utils/limitTarget';\nimport getSuitableImageSize from './utils/getSuitableImageSize';\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect';\nimport { minStartTouchOffset, scaleBuffer } from './variables';\nimport type {\n  DataType,\n  ReachMoveFunction,\n  ReachFunction,\n  PhotoTapFunction,\n  BrokenElementParams,\n  ExposedProperties,\n  ReachType,\n  TouchStartType,\n} from './types';\nimport useSetState from './hooks/useSetState';\nimport useMethods from './hooks/useMethods';\nimport useDebounceCallback from './hooks/useDebounceCallback';\nimport useEventListener from './hooks/useEventListener';\nimport useContinuousTap from './hooks/useContinuousTap';\nimport useScrollPosition from './hooks/useScrollPosition';\nimport useAnimationPosition from './hooks/useAnimationPosition';\nimport useMountedRef from './hooks/useMountedRef';\nimport type { IPhotoLoadedParams } from './Photo';\nimport Photo from './Photo';\nimport './PhotoBox.less';\n\nexport interface PhotoBoxProps {\n  // 图片信息\n  item: DataType;\n  // 是否可见\n  visible: boolean;\n  // 动画时间\n  speed: number;\n  // 动画函数\n  easing: string;\n  // 容器类名\n  wrapClassName?: string;\n  // 图片类名\n  className?: string;\n  // style\n  style?: object;\n  // 自定义 loading\n  loadingElement?: JSX.Element;\n  // 加载失败 Element\n  brokenElement?: JSX.Element | ((photoProps: BrokenElementParams) => JSX.Element);\n\n  // Photo 点击事件\n  onPhotoTap: PhotoTapFunction;\n  // Mask 点击事件\n  onMaskTap: PhotoTapFunction;\n  // 到达边缘滑动事件\n  onReachMove: ReachMoveFunction;\n  // 触摸解除事件\n  onReachUp: ReachFunction;\n  // Resize 事件\n  onPhotoResize: () => void;\n  // 向父组件导出属性\n  expose: (state: ExposedProperties) => void;\n  // 是否在当前操作中\n  isActive: boolean;\n}\n\nconst initialState = {\n  // 真实宽度\n  naturalWidth: undefined as number | undefined,\n  // 真实高度\n  naturalHeight: undefined as number | undefined,\n  // 宽度\n  width: undefined as number | undefined,\n  // 高度\n  height: undefined as number | undefined,\n  // 加载成功状态\n  loaded: undefined as boolean | undefined,\n  // 破碎状态\n  broken: false,\n\n  // 图片 X 偏移量\n  x: 0,\n  // 图片 y 偏移量\n  y: 0,\n  // 图片处于触摸的状态\n  touched: false,\n  // 背景处于触摸状态\n  maskTouched: false,\n  // 旋转状态\n  rotate: 0,\n  // 放大缩小\n  scale: 1,\n\n  // 触摸开始时 x 原始坐标\n  CX: 0,\n  // 触摸开始时 y 原始坐标\n  CY: 0,\n\n  // 触摸开始时图片 x 偏移量\n  lastX: 0,\n  // 触摸开始时图片 y 偏移量\n  lastY: 0,\n  // 上一个触摸状态 x 原始坐标\n  lastCX: 0,\n  // 上一个触摸状态 y 原始坐标\n  lastCY: 0,\n  // 上一个触摸状态的 scale\n  lastScale: 1,\n\n  // 触摸开始时时间\n  touchTime: 0,\n  // 多指触控间距\n  touchLength: 0,\n  // 是否暂停 transition\n  pause: true,\n  // 停止 Raf\n  stopRaf: true,\n  // 当前边缘触发状态\n  reach: undefined as ReachType,\n};\n\nexport default function PhotoBox({\n  item: { src, render, width: customWidth = 0, height: customHeight = 0, originRef, title, description },\n  visible,\n  speed,\n  easing,\n  wrapClassName,\n  className,\n  style,\n  loadingElement,\n  brokenElement,\n\n  onPhotoTap,\n  onMaskTap,\n  onReachMove,\n  onReachUp,\n  onPhotoResize,\n  isActive,\n  expose,\n}: PhotoBoxProps) {\n  const [state, updateState] = useSetState(initialState);\n  const initialTouchRef = useRef<TouchStartType>(0);\n  const mounted = useMountedRef();\n\n  const {\n    naturalWidth = customWidth,\n    naturalHeight = customHeight,\n    width = customWidth,\n    height = customHeight,\n    loaded = !src,\n    broken,\n    x,\n    y,\n    touched,\n    stopRaf,\n    maskTouched,\n    rotate,\n    scale,\n    CX,\n    CY,\n    lastX,\n    lastY,\n    lastCX,\n    lastCY,\n    lastScale,\n    touchTime,\n    touchLength,\n    pause,\n    reach,\n  } = state;\n\n  const fn = useMethods({\n    onScale: (current: number) => onScale(limitScale(current)),\n    onRotate(current: number) {\n      if (rotate !== current) {\n        expose({ rotate: current });\n        updateState({ rotate: current, ...getSuitableImageSize(naturalWidth, naturalHeight, current) });\n      }\n    },\n  });\n\n  // 默认为屏幕中心缩放\n  function onScale(current: number, clientX?: number, clientY?: number) {\n    if (scale !== current) {\n      expose({ scale: current });\n      updateState({\n        scale: current,\n        ...getPositionOnMoveOrScale(x, y, width, height, scale, current, clientX, clientY),\n        ...(current <= 1 && { x: 0, y: 0 }),\n      });\n    }\n  }\n\n  const handleMove = useDebounceCallback(\n    (nextClientX: number, nextClientY: number, currentTouchLength: number = 0) => {\n      if ((touched || maskTouched) && isActive) {\n        // 通过旋转调换宽高\n        const [currentWidth, currentHeight] = getRotateSize(rotate, width, height);\n        // 单指最小缩放下，以初始移动距离来判断意图\n        if (currentTouchLength === 0 && initialTouchRef.current === 0) {\n          const isStillX = Math.abs(nextClientX - CX) <= minStartTouchOffset;\n          const isStillY = Math.abs(nextClientY - CY) <= minStartTouchOffset;\n          // 初始移动距离不足\n          if (isStillX && isStillY) {\n            // 方向记录上次移动距离，以便平滑过渡\n            updateState({ lastCX: nextClientX, lastCY: nextClientY });\n            return;\n          }\n          // 设置响应状态\n          initialTouchRef.current = !isStillX ? 1 : nextClientY > CY ? 3 : 2;\n        }\n\n        const offsetX = nextClientX - lastCX;\n        const offsetY = nextClientY - lastCY;\n        // 边缘触发状态\n        let currentReach: ReachType;\n        if (currentTouchLength === 0) {\n          // 边缘超出状态\n          const [horizontalCloseEdge] = computePositionEdge(offsetX + lastX, scale, currentWidth, innerWidth);\n          const [verticalCloseEdge] = computePositionEdge(offsetY + lastY, scale, currentHeight, innerHeight);\n          // 边缘触发检测\n          currentReach = getReachType(initialTouchRef.current, horizontalCloseEdge, verticalCloseEdge, reach);\n\n          // 接触边缘\n          if (currentReach !== undefined) {\n            onReachMove(currentReach, nextClientX, nextClientY, scale);\n          }\n        }\n        // 横向边缘触发、背景触发禁用当前滑动\n        if (currentReach === 'x' || maskTouched) {\n          updateState({ reach: 'x' });\n          return;\n        }\n        // 目标倍数\n        const toScale = limitScale(\n          scale + ((currentTouchLength - touchLength) / 100 / 2) * scale,\n          naturalWidth / width,\n          scaleBuffer,\n        );\n        // 导出变量\n        expose({ scale: toScale });\n        updateState({\n          touchLength: currentTouchLength,\n          reach: currentReach,\n          scale: toScale,\n          ...getPositionOnMoveOrScale(x, y, width, height, scale, toScale, nextClientX, nextClientY, offsetX, offsetY),\n        });\n      }\n    },\n    {\n      maxWait: 8,\n    },\n  );\n\n  function updateRaf(position: { x?: number; y?: number }) {\n    if (stopRaf || touched) {\n      return false;\n    }\n    if (mounted.current) {\n      // 下拉关闭时可以有动画\n      updateState({ ...position, pause: visible });\n    }\n    return mounted.current;\n  }\n\n  const slideToPosition = useScrollPosition(\n    (nextX) => updateRaf({ x: nextX }),\n    (nextY) => updateRaf({ y: nextY }),\n    (nextScale) => {\n      if (mounted.current) {\n        expose({ scale: nextScale });\n        updateState({ scale: nextScale });\n      }\n      return !touched && mounted.current;\n    },\n  );\n\n  const handlePhotoTap = useContinuousTap(onPhotoTap, (currentClientX: number, currentClientY: number) => {\n    if (!reach) {\n      // 若图片足够大，则放大适应的倍数\n      const endScale = scale !== 1 ? 1 : Math.max(2, naturalWidth / width);\n      onScale(endScale, currentClientX, currentClientY);\n    }\n  });\n\n  function handleUp(nextClientX: number, nextClientY: number) {\n    // 重置响应状态\n    initialTouchRef.current = 0;\n    if ((touched || maskTouched) && isActive) {\n      updateState({\n        touched: false,\n        maskTouched: false,\n        pause: false,\n        stopRaf: false,\n        reach: undefined,\n      });\n      const safeScale = limitScale(scale, naturalWidth / width);\n      // Go\n      slideToPosition(x, y, lastX, lastY, width, height, scale, safeScale, lastScale, rotate, touchTime);\n\n      onReachUp(nextClientX, nextClientY);\n      // 触发 Tap 事件\n      if (CX === nextClientX && CY === nextClientY) {\n        if (touched) {\n          handlePhotoTap(nextClientX, nextClientY);\n          return;\n        }\n        if (maskTouched) {\n          onMaskTap(nextClientX, nextClientY);\n        }\n      }\n    }\n  }\n\n  useEventListener(isTouchDevice ? undefined : 'mousemove', (e) => {\n    e.preventDefault();\n    handleMove(e.clientX, e.clientY);\n  });\n  useEventListener(isTouchDevice ? undefined : 'mouseup', (e) => {\n    handleUp(e.clientX, e.clientY);\n  });\n  useEventListener(\n    isTouchDevice ? 'touchmove' : undefined,\n    (e) => {\n      e.preventDefault();\n      const position = getMultipleTouchPosition(e);\n      handleMove(...position);\n    },\n    { passive: false },\n  );\n  useEventListener(\n    isTouchDevice ? 'touchend' : undefined,\n    ({ changedTouches }) => {\n      const touch = changedTouches[0];\n      handleUp(touch.clientX, touch.clientY);\n    },\n    { passive: false },\n  );\n  useEventListener(\n    'resize',\n    useDebounceCallback(\n      () => {\n        if (loaded && !touched) {\n          updateState(getSuitableImageSize(naturalWidth, naturalHeight, rotate));\n          onPhotoResize();\n        }\n      },\n      { maxWait: 8 },\n    ),\n  );\n\n  useIsomorphicLayoutEffect(() => {\n    if (isActive) {\n      expose({ scale, rotate, ...fn });\n    }\n  }, [isActive]);\n\n  function handlePhotoLoad(params: IPhotoLoadedParams) {\n    updateState({\n      ...params,\n      ...(params.loaded && getSuitableImageSize(params.naturalWidth || 0, params.naturalHeight || 0, rotate)),\n    });\n  }\n\n  function handleStart(currentClientX: number, currentClientY: number, currentTouchLength: number = 0) {\n    updateState({\n      touched: true,\n      CX: currentClientX,\n      CY: currentClientY,\n      lastCX: currentClientX,\n      lastCY: currentClientY,\n      lastX: x,\n      lastY: y,\n      lastScale: scale,\n      touchLength: currentTouchLength,\n      touchTime: Date.now(),\n    });\n  }\n\n  function handleWheel(e: React.WheelEvent) {\n    if (!reach) {\n      // 限制最大倍数和最小倍数\n      const toScale = limitScale(scale - e.deltaY / 100 / 2, naturalWidth / width);\n      updateState({ stopRaf: true });\n      onScale(toScale, e.clientX, e.clientY);\n    }\n  }\n\n  function handleMaskStart(e: { clientX: number; clientY: number }) {\n    updateState({\n      maskTouched: true,\n      CX: e.clientX,\n      CY: e.clientY,\n      lastX: x,\n      lastY: y,\n    });\n  }\n\n  function handleTouchStart(e: React.TouchEvent) {\n    e.stopPropagation();\n    handleStart(...getMultipleTouchPosition(e));\n  }\n\n  function handleMouseDown(e: React.MouseEvent) {\n    e.stopPropagation();\n    if (e.button === 0) {\n      handleStart(e.clientX, e.clientY, 0);\n    }\n  }\n\n  // 计算位置\n  const [translateX, translateY, currentWidth, currentHeight, currentScale, opacity, easingMode, FIT] =\n    useAnimationPosition(visible, originRef, loaded, x, y, width, height, scale, speed, (isPause: boolean) =>\n      updateState({ pause: isPause }),\n    );\n  // 图片 objectFit 渐变时间\n  const transitionLayoutTime = easingMode < 4 ? speed / 2 : easingMode > 4 ? speed : 0;\n  const transitionCSS = `transform ${speed}ms ${easing}`;\n\n  const attrs = {\n    className,\n    onMouseDown: isTouchDevice ? undefined : handleMouseDown,\n    onTouchStart: isTouchDevice ? handleTouchStart : undefined,\n    onWheel: handleWheel,\n    style: {\n      width: `${currentWidth}px`,\n      height: `${currentHeight}px`,\n      opacity,\n      objectFit: easingMode === 4 ? undefined : FIT,\n      transform: rotate ? `rotate(${rotate}deg)` : undefined,\n      transition:\n        // 初始状态无渐变\n        easingMode > 2\n          ? `${transitionCSS}, opacity ${speed}ms ease, height ${transitionLayoutTime}ms ${easing}`\n          : undefined,\n    },\n  };\n\n  return (\n    <div\n      className={`PhotoView__PhotoWrap${wrapClassName ? ` ${wrapClassName}` : ''}`}\n      style={style}\n      onMouseDown={!isTouchDevice && isActive ? handleMaskStart : undefined}\n      onTouchStart={isTouchDevice && isActive ? (e) => handleMaskStart(e.touches[0]) : undefined}\n    >\n      <div\n        className=\"PhotoView__PhotoBox\"\n        style={{\n          transform: `matrix(${currentScale}, 0, 0, ${currentScale}, ${translateX}, ${translateY})`,\n          transition: touched || pause ? undefined : transitionCSS,\n          willChange: isActive ? 'transform' : undefined,\n        }}\n      >\n        {src ? (\n            \n            <Photo\n              title={title}\n              description={description}\n              src={src}\n              loaded={loaded}\n              broken={broken}\n              {...attrs}\n              onPhotoLoad={handlePhotoLoad}\n              loadingElement={loadingElement}\n              brokenElement={brokenElement}\n            />\n         \n        ) : (\n          render && render({ attrs, scale: currentScale, rotate })\n        )}\n      </div>\n    </div>\n  );\n}","\n\n\nimport React, { useRef, useState, useEffect } from 'react';\nimport type { DataType, PhotoProviderBase, OverlayRenderProps, ReachType } from './types';\nimport { defaultEasing, defaultSpeed, defaultOpacity, horizontalOffset, maxMoveOffset } from './variables';\nimport isTouchDevice from './utils/isTouchDevice';\nimport { limitNumber } from './utils/limitTarget';\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect';\nimport useAdjacentImages from './hooks/useAdjacentImages';\nimport useSetState from './hooks/useSetState';\nimport useEventListener from './hooks/useEventListener';\nimport useAnimationVisible from './hooks/useAnimationVisible';\nimport useMethods from './hooks/useMethods';\nimport SlidePortal from './components/SlidePortal';\nimport CloseIcon from './components/CloseIcon';\nimport ArrowLeft from './components/ArrowLeft';\nimport ArrowRight from './components/ArrowRight';\nimport PreventScroll from './components/PreventScroll';\nimport PhotoBox from './PhotoBox';\nimport './PhotoSlider.less';\n\nexport interface IPhotoSliderProps extends PhotoProviderBase {\n  // 图片列表\n  images: DataType[];\n  // 图片当前索引\n  index?: number;\n  // 索引改变回调\n  onIndexChange?: (index: number) => void;\n  // 可见\n  visible: boolean;\n  // 关闭回调\n  onClose: (evt?: React.MouseEvent | React.TouchEvent) => void;\n  // 关闭动画结束后回调\n  afterClose?: () => void;\n\n  direction?: 'ltr' | 'rtl';\n}\n\ntype PhotoSliderState = {\n  // 偏移量\n  x: number;\n  // 图片处于触摸的状态\n  touched: boolean;\n  // 是否暂停 transition\n  pause: boolean;\n  // Reach 开始时 x 坐标\n  lastCX: number | undefined;\n  // Reach 开始时 y 坐标\n  lastCY: number | undefined;\n  // 背景透明度\n  bg: number | null | undefined;\n  // 上次关闭的背景透明度\n  lastBg: number | null | undefined;\n  // 是否显示 overlay\n  overlay: boolean;\n  // 是否为最小状态，可下拉关闭\n  minimal: boolean;\n  // 缩放\n  scale: number;\n  // 旋转\n  rotate: number;\n  // 缩放回调\n  onScale?: (scale: number) => void;\n  // 旋转回调\n  onRotate?: (rotate: number) => void;\n};\n\nconst initialState: PhotoSliderState = {\n  x: 0,\n  touched: false,\n  pause: false,\n  lastCX: undefined,\n  lastCY: undefined,\n  bg: undefined,\n  lastBg: undefined,\n  overlay: true,\n  minimal: true,\n  scale: 1,\n  rotate: 0,\n};\n\nexport default function PhotoSlider(props: IPhotoSliderProps) {\n  const {\n    loop = 3,\n    speed: speedFn,\n    easing: easingFn,\n    photoClosable,\n    maskClosable = true,\n    maskOpacity = defaultOpacity,\n    pullClosable = true,\n    bannerVisible = true,\n    overlayRender,\n    toolbarRender,\n    className,\n    maskClassName,\n    photoClassName,\n    photoWrapClassName,\n    loadingElement,\n    brokenElement,\n    images,\n    index: controlledIndex = 0,\n    onIndexChange: controlledIndexChange,\n    visible,\n    onClose,\n    afterClose,\n    portalContainer,\n  } = props;\n\n  const [state, updateState] = useSetState(initialState);\n  const [innerIndex, updateInnerIndex] = useState(0);\n\n  const {\n    x,\n    touched,\n    pause,\n\n    lastCX,\n    lastCY,\n\n    bg = maskOpacity,\n    lastBg,\n    overlay,\n    minimal,\n\n    scale,\n    rotate,\n    onScale,\n    onRotate,\n  } = state;\n\n  // 受控 index\n  const isControlled = props.hasOwnProperty('index');\n  const index = isControlled ? controlledIndex : innerIndex;\n  const onIndexChange = isControlled ? controlledIndexChange : updateInnerIndex;\n  // 内部虚拟 index\n  const virtualIndexRef = useRef(index);\n\n  // Очищаем классы при размонтировании компонента\n  useEffect(() => {\n    return () => {\n      document.body.classList.remove('modal__nav-arrow--left', 'modal__nav-arrow--right');\n\n      setTimeout(() => {\n        document.body.classList.remove('modal__nav-arrow--left', 'modal__nav-arrow--right');\n      }, 1000);\n    };\n  }, []);\n\n  // 当前图片\n  const imageLength = images.length;\n  const currentImage: DataType | undefined = images[index];\n\n  // 是否开启\n  // noinspection SuspiciousTypeOfGuard\n  const enableLoop = typeof loop === 'boolean' ? loop : imageLength > loop;\n\n  // 显示动画处理\n  const [realVisible, activeAnimation, onAnimationEnd] = useAnimationVisible(visible, afterClose);\n\n  useIsomorphicLayoutEffect(() => {\n    // 显示弹出层，修正正确的指向\n    if (realVisible) {\n      updateState({\n        pause: true,\n        x: index * -(innerWidth + horizontalOffset),\n      });\n      virtualIndexRef.current = index;\n      return;\n    }\n    // 关闭后清空状态\n    updateState(initialState);\n  }, [realVisible]);\n\n  const { close, changeIndex } = useMethods({\n    close(evt?: React.MouseEvent | React.TouchEvent) {\n      if (onRotate) {\n        onRotate(0);\n      }\n      // Очищаем классы при закрытии\n      document.body.classList.remove('modal__nav-arrow--left', 'modal__nav-arrow--right');\n      updateState({\n        overlay: true,\n        // 记录当前关闭时的透明度\n        lastBg: bg,\n      });\n      onClose(evt);\n    },\n    changeIndex(nextIndex: number, isPause: boolean = false) {\n      // 当前索引\n      const currentIndex = enableLoop ? virtualIndexRef.current + (nextIndex - index) : nextIndex;\n      const max = imageLength - 1;\n      // 虚拟 index\n      // 非循环模式，限制区间\n      const limitIndex = limitNumber(currentIndex, 0, max);\n      const nextVirtualIndex = enableLoop ? currentIndex : limitIndex;\n      // 单个屏幕宽度\n      const singlePageWidth = innerWidth + horizontalOffset;\n\n      updateState({\n        touched: false,\n        lastCX: undefined,\n        lastCY: undefined,\n        x: -singlePageWidth * nextVirtualIndex,\n        pause: isPause,\n      });\n\n      virtualIndexRef.current = nextVirtualIndex;\n      // 更新真实的 index\n      const realLoopIndex = nextIndex < 0 ? max : nextIndex > max ? 0 : nextIndex;\n      if (onIndexChange) {\n        onIndexChange(enableLoop ? realLoopIndex : limitIndex);\n      }\n    },\n  });\n\n  useEventListener('keydown', (evt: KeyboardEvent) => {\n    if (visible) {\n      switch (evt.key) {\n        case 'ArrowLeft':\n          changeIndex(index - 1, true);\n          break;\n        case 'ArrowRight':\n          changeIndex(index + 1, true);\n          break;\n        case 'Escape':\n          close();\n          break;\n        default:\n      }\n    }\n  });\n\n  function handlePhotoTap(closeable: boolean | undefined) {\n    return closeable ? close() : updateState({ overlay: !overlay });\n  }\n\n  function handleResize() {\n    updateState({\n      x: -(innerWidth + horizontalOffset) * index,\n      lastCX: undefined,\n      lastCY: undefined,\n      pause: true,\n    });\n    virtualIndexRef.current = index;\n  }\n\n  function handleReachVerticalMove(clientY: number, nextScale?: number) {\n    if (lastCY === undefined) {\n      updateState({\n        touched: true,\n        lastCY: clientY,\n        bg,\n        minimal: true,\n      });\n      return;\n    }\n    const opacity =\n      maskOpacity === null ? null : limitNumber(maskOpacity, 0.01, maskOpacity - Math.abs(clientY - lastCY) / 100 / 4);\n\n    updateState({\n      touched: true,\n      lastCY,\n      bg: nextScale === 1 ? opacity : maskOpacity,\n      minimal: nextScale === 1,\n    });\n  }\n\n  function handleReachHorizontalMove(clientX: number) {\n    if (lastCX === undefined) {\n      updateState({\n        touched: true,\n        lastCX: clientX,\n        x,\n        pause: false,\n      });\n      return;\n    }\n    const originOffsetClientX = clientX - lastCX;\n    let offsetClientX = originOffsetClientX;\n\n    // 第一张和最后一张超出距离减半\n    if (\n      !enableLoop &&\n      ((index === 0 && originOffsetClientX > 0) || (index === imageLength - 1 && originOffsetClientX < 0))\n    ) {\n      offsetClientX = originOffsetClientX / 2;\n    }\n\n    updateState({\n      touched: true,\n      lastCX,\n      x: -(innerWidth + horizontalOffset) * virtualIndexRef.current + offsetClientX,\n      pause: false,\n    });\n  }\n\n  function handleReachMove(reachPosition: ReachType, clientX: number, clientY: number, nextScale?: number) {\n    if (reachPosition === 'x') {\n      handleReachHorizontalMove(clientX);\n    } else if (reachPosition === 'y') {\n      handleReachVerticalMove(clientY, nextScale);\n    }\n  }\n\n  function handleReachUp(clientX: number, clientY: number) {\n    const offsetClientX = clientX - (lastCX ?? clientX);\n    const offsetClientY = clientY - (lastCY ?? clientY);\n    let willClose = false;\n    // 下一张\n    if (offsetClientX < -maxMoveOffset) {\n      changeIndex(index + 1);\n      return;\n    }\n    // 上一张\n    if (offsetClientX > maxMoveOffset) {\n      changeIndex(index - 1);\n      return;\n    }\n    const singlePageWidth = innerWidth + horizontalOffset;\n    // 当前偏移\n    const currentTranslateX = -singlePageWidth * virtualIndexRef.current;\n\n    if (Math.abs(offsetClientY) > 100 && minimal && pullClosable) {\n      willClose = true;\n      close();\n    }\n    updateState({\n      touched: false,\n      x: currentTranslateX,\n      lastCX: undefined,\n      lastCY: undefined,\n      bg: maskOpacity,\n      overlay: willClose ? true : overlay,\n    });\n  }\n  // 截取相邻的图片\n  const adjacentImages = useAdjacentImages(images, index, enableLoop);\n\n  // Обработчики для кликов по порталу\n  const handlePortalMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n    const rect = e.currentTarget.getBoundingClientRect();\n    const cursorX = e.clientX - rect.left;\n    const halfWidth = rect.width / 2;\n\n    // Удаляем оба класса перед добавлением нового\n    document.body.classList.remove('modal__nav-arrow--left', 'modal__nav-arrow--right');\n\n    // Добавляем класс в зависимости от положения курсора\n    if (cursorX <= halfWidth) {\n      document.body.classList.add('modal__nav-arrow--left');\n    } else {\n      document.body.classList.add('modal__nav-arrow--right');\n    }\n  };\n\n  const handlePortalMouseLeave = (e: React.MouseEvent<HTMLDivElement>) => {\n    document.body.classList.remove('modal__nav-arrow--left', 'modal__nav-arrow--right');\n  };\n\n  const handlePortalClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    const target = e.target as Element;\n    \n    // Не обрабатываем клики по элементам управления\n    if (target?.closest('.PhotoView-Slider__BannerRight') || \n        target?.closest('.PhotoView-Slider__ArrowLeft') || \n        target?.closest('.PhotoView-Slider__ArrowRight')) {\n      return;\n    }\n\n    const rect = e.currentTarget.getBoundingClientRect();\n    const cursorX = e.clientX - rect.left;\n    const halfWidth = rect.width / 2;\n\n    // Переключаем слайд в зависимости от позиции клика\n    if (cursorX <= halfWidth) {\n      if (enableLoop || index !== 0) {\n        changeIndex(index - 1, true);\n      }\n    } else {\n      if (enableLoop || index + 1 < imageLength) {\n        changeIndex(index + 1, true);\n      }\n    }\n  };\n\n  if (!realVisible) {\n    return null;\n  }\n\n  const currentOverlayVisible = overlay && !activeAnimation;\n  // 关闭过程中使用下拉保存的透明度\n  const currentOpacity = visible ? bg : lastBg;\n  // 覆盖物参数\n  const overlayParams: OverlayRenderProps | undefined = onScale &&\n    onRotate && {\n      images,\n      index,\n      visible,\n      onClose: close,\n      onIndexChange: changeIndex,\n      overlayVisible: currentOverlayVisible,\n      overlay: currentImage && currentImage.overlay,\n      scale,\n      rotate,\n      onScale,\n      onRotate,\n    };\n  // 动画时间\n  const currentSpeed = speedFn ? speedFn(activeAnimation) : defaultSpeed;\n  const currentEasing = easingFn ? easingFn(activeAnimation) : defaultEasing;\n  const slideSpeed = speedFn ? speedFn(3) : defaultSpeed + 200;\n  const slideEasing = easingFn ? easingFn(3) : defaultEasing;\n\n  return (\n    <SlidePortal\n      className={`PhotoView-Portal${!currentOverlayVisible ? ' PhotoView-Slider__clean' : ''}${\n        !visible ? ' PhotoView-Slider__willClose' : ''\n      }${className ? ` ${className}` : ''}`}\n      role=\"dialog\"\n      onClick={(e) => {\n        e.stopPropagation();\n        handlePortalClick(e);\n      }}\n      onMouseMove={handlePortalMouseMove}\n      onMouseLeave={handlePortalMouseLeave}\n      container={portalContainer}\n    >\n      {visible && <PreventScroll />}\n      <div\n        className={`PhotoView-Slider__Backdrop${maskClassName ? ` ${maskClassName}` : ''}${\n          activeAnimation === 1\n            ? ' PhotoView-Slider__fadeIn'\n            : activeAnimation === 2\n              ? ' PhotoView-Slider__fadeOut'\n              : ''\n        }`}\n        style={{\n          background: currentOpacity ? `rgba(0, 0, 0, ${currentOpacity})` : undefined,\n          transitionTimingFunction: currentEasing,\n          transitionDuration: `${touched ? 0 : currentSpeed}ms`,\n          animationDuration: `${currentSpeed}ms`,\n        }}\n        onAnimationEnd={onAnimationEnd}\n      />\n      {bannerVisible && (\n        <div className=\"PhotoView-Slider__BannerWrap\">\n          <div className=\"PhotoView-Slider__Counter\">\n            {index + 1} / {imageLength}\n          </div>\n          <div className=\"PhotoView-Slider__BannerRight\">\n            {toolbarRender && overlayParams && toolbarRender(overlayParams)}            \n            <CloseIcon className=\"close\" onClick={close} />\n          </div>\n        </div>\n      )}\n      {adjacentImages.map((item: DataType, currentIndex) => {\n        // 截取之前的索引位置\n        const nextIndex =\n          !enableLoop && index === 0 ? index + currentIndex : virtualIndexRef.current - 1 + currentIndex;\n\n        return (\n          <PhotoBox\n            key={enableLoop ? `${item.key}/${item.src}/${nextIndex}` : item.key}\n            item={item}\n            speed={currentSpeed}\n            easing={currentEasing}\n            visible={visible}\n            onReachMove={handleReachMove}\n            onReachUp={handleReachUp}\n            onPhotoTap={() => handlePhotoTap(photoClosable)}\n            onMaskTap={() => handlePhotoTap(maskClosable)}\n            wrapClassName={photoWrapClassName}\n            className={photoClassName}\n            style={{\n              left: `${(innerWidth + horizontalOffset) * nextIndex}px`,\n              transform: `translate3d(${x}px, 0px, 0)`,\n              transition: touched || pause ? undefined : `transform ${slideSpeed}ms ${slideEasing}`,\n            }}\n            loadingElement={loadingElement}\n            brokenElement={brokenElement}\n            onPhotoResize={handleResize}\n            isActive={virtualIndexRef.current === nextIndex}\n            expose={updateState}\n          />\n        );\n      })}\n      {!isTouchDevice && bannerVisible && (\n        <>\n          {(enableLoop || index !== 0) && (\n            <div className=\"PhotoView-Slider__ArrowLeft\" onClick={() => changeIndex(index - 1, true)}>\n              <ArrowLeft />\n            </div>\n          )}\n          {(enableLoop || index + 1 < imageLength) && (\n            <div className=\"PhotoView-Slider__ArrowRight\" onClick={() => changeIndex(index + 1, true)}>\n              <ArrowRight />\n            </div>\n          )}\n        </>\n      )}\n      {overlayRender && overlayParams && (\n        <div className=\"PhotoView-Slider__Overlay\">{overlayRender(overlayParams)}</div>\n      )}\n    </SlidePortal>\n  );\n}","import React, { useMemo, useRef } from 'react';\nimport type { DataType, PhotoProviderBase } from './types';\nimport useMethods from './hooks/useMethods';\nimport useSetState from './hooks/useSetState';\nimport PhotoContext from './photo-context';\nimport PhotoSlider from './PhotoSlider';\n\nexport interface PhotoProviderProps extends PhotoProviderBase {\n  children: React.ReactNode;\n  onIndexChange?: (index: number, state: PhotoProviderState) => void;\n  onVisibleChange?: (visible: boolean, index: number, state: PhotoProviderState) => void;\n}\n\ntype PhotoProviderState = {\n  images: DataType[];\n  visible: boolean;\n  index: number;\n};\n\nconst initialState: PhotoProviderState = {\n  images: [],\n  visible: false,\n  index: 0,\n};\n\nexport default function PhotoProvider({ children, onIndexChange, onVisibleChange, ...restProps }: PhotoProviderProps) {\n  const [state, updateState] = useSetState(initialState);\n  const uniqueIdRef = useRef(0);\n  const { images, visible, index } = state;\n\n  const methods = useMethods({\n    nextId() {\n      return (uniqueIdRef.current += 1);\n    },\n    update(imageItem: DataType) {\n      const currentIndex = images.findIndex((n) => n.key === imageItem.key);\n      if (currentIndex > -1) {\n        const nextImages = images.slice();\n        nextImages.splice(currentIndex, 1, imageItem);\n        updateState({\n          images: nextImages,\n        });\n        return;\n      }\n      updateState((prev) => ({\n        images: prev.images.concat(imageItem),\n      }));\n    },\n    remove(key: number) {\n      updateState((prev) => {\n        const nextImages = prev.images.filter((item) => item.key !== key);\n        const nextEndIndex = nextImages.length - 1;\n        return {\n          images: nextImages,\n          index: Math.min(nextEndIndex, index),\n        };\n      });\n    },\n    show(key: number) {\n      const currentIndex = images.findIndex((item) => item.key === key);\n      updateState({\n        visible: true,\n        index: currentIndex,\n      });\n      if (onVisibleChange) {\n        onVisibleChange(true, currentIndex, state);\n      }\n    },\n  });\n\n  const fn = useMethods({\n    close() {\n      updateState({\n        visible: false,\n      });\n\n      if (onVisibleChange) {\n        onVisibleChange(false, index, state);\n      }\n    },\n    changeIndex(nextIndex: number) {\n      updateState({\n        index: nextIndex,\n      });\n\n      if (onIndexChange) {\n        onIndexChange(nextIndex, state);\n      }\n    },\n  });\n\n  const value = useMemo(() => ({ ...state, ...methods }), [state, methods]);\n\n  return (\n    <PhotoContext.Provider value={value}>\n      {children}\n      <PhotoSlider\n        images={images}\n        visible={visible}\n        index={index}\n        onIndexChange={fn.changeIndex}\n        onClose={fn.close}\n        {...restProps}\n      />\n    </PhotoContext.Provider>\n  );\n}","import { useRef } from 'react';\n\nexport default function useInitial<T extends (...args: any) => any>(callback: T) {\n  const { current } = useRef({ sign: false, fn: undefined as ReturnType<T> });\n  if (!current.sign) {\n    current.sign = true;\n    current.fn = callback();\n  }\n  return current.fn;\n}\n","import type React from 'react';\nimport { useImperativeHandle, Children, cloneElement, useContext, useEffect, useMemo, useRef, JSX } from 'react';\nimport useInitial from './hooks/useInitial';\nimport useMethods from './hooks/useMethods';\nimport type { PhotoContextType } from './photo-context';\nimport PhotoContext from './photo-context';\nimport type { PhotoRenderParams } from './types';\n\nexport interface PhotoViewProps {\n  /**\n   * 图片地址\n   */\n  src?: string;\n  /**\n   * 自定义渲染，优先级比 src 低\n   */\n  render?: (props: PhotoRenderParams) => React.ReactNode;\n  /**\n   * 自定义覆盖节点\n   */\n  overlay?: React.ReactNode;\n  /**\n   * 自定义渲染节点宽度\n   */\n  width?: number;\n  /**\n   * 自定义渲染节点高度\n   */\n  height?: number;\n  /**\n   * 子节点，一般为缩略图\n   */\n  children?: React.ReactElement;\n  /**\n   * 触发的事件\n   */\n  triggers?: ('onClick' | 'onDoubleClick')[];\n\n  title?: string | React.ReactNode;\n  description?: string | React.ReactNode;\n}\n\nconst PhotoView = ({\n  src,\n  render,\n  overlay,\n  width,\n  height,\n  triggers = ['onClick'],\n  children,\n  title,\n  description,\n}:PhotoViewProps): JSX.Element => {\n  const photoContext = useContext<PhotoContextType>(PhotoContext);\n  const key = useInitial(() => photoContext.nextId());\n  const originRef = useRef<HTMLElement>(null);\n\n  // useImperativeHandle((children as React.FunctionComponentElement<HTMLElement>)?.ref, () => originRef.current);\n\n  useEffect(() => {\n    return () => {\n      photoContext.remove(key);\n    };\n  }, []);\n\n  function invokeChildrenFn(eventName: string, e: React.SyntheticEvent) {\n    if (children) {\n      const eventFn = children.props[eventName];\n      if (eventFn) {\n        eventFn(e);\n      }\n    }\n  }\n\n  const fn = useMethods({\n    render(props: PhotoRenderParams) {\n      return render && render(props);\n    },\n    show(eventName: string, e: React.MouseEvent) {\n      photoContext.show(key);\n      invokeChildrenFn(eventName, e);\n    },\n  });\n\n  const eventListeners = useMemo(() => {\n    const listener = {};\n    triggers.forEach((eventName) => {\n      listener[eventName] = fn.show.bind(null, eventName);\n    });\n    return listener;\n  }, []);\n\n  useEffect(() => {\n    photoContext.update({\n      key,\n      src,\n      originRef,\n      render: fn.render,\n      overlay,\n      width,\n      height,\n      title,\n      description,\n    });\n  }, [src]);\n\n  if (children) {\n    return Children.only(cloneElement(children, { ...eventListeners, ref: originRef } as React.HTMLProps<HTMLElement>));\n  }\n  return null;\n};\n\nexport default PhotoView;\n\n"],"names":["useMethods","fn","current","useRef","curr","undefined","Object","create","keys","forEach","key","args","call","useSetState","initialState","useReducer","state","action","_extends","createContext","maxTouchTime","defaultSpeed","defaultEasing","maxMoveOffset","horizontalOffset","minStartTouchOffset","defaultOpacity","minScale","maxScale","longModeRatio","scaleBuffer","maxWaitAnimationTime","isTouchDevice","window","limitNumber","value","min","max","Math","limitScale","scale","buffer","isSSR","test","navigator","userAgent","useEffect","useLayoutEffect","useAdjacentImages","images","index","loop","useMemo","imageLength","length","connected","concat","slice","useEventListener","type","options","latest","wrapper","evt","addEventListener","removeEventListener","useForkedVariable","initial","updater","forkedRef","modify","next","useAnimationVisible","visible","afterClose","handleRender","c","activeAnimation","realVisible","modifyRealVisible","onAnimationEnd","SlidePortal","_ref","container","document","body","rest","_objectWithoutPropertiesLoose","_excluded","createPortal","React","createElement","CloseIcon","props","className","ArrowLeft","width","height","viewBox","d","ArrowRight","PreventScroll","style","lastOverflow","overflow","getMultipleTouchPosition","clientX","clientY","touches","nextClientX","nextClientY","sqrt","getReachType","initialTouchState","horizontalCloseEdge","verticalCloseEdge","reachPosition","computePositionEdge","position","size","innerSize","currentWidth","outOffset","closedEdge","getPositionOnMoveOrScale","x","y","toScale","innerWidth","innerHeight","offsetX","offsetY","closedEdgeX","closedEdgeY","centerClientX","centerClientY","lastPositionX","lastPositionY","originX","originY","longModeEdge","lastCX","lastCY","getRotateSize","rotate","isVertical","getSuitableImageSize","naturalWidth","naturalHeight","currentHeight","autoWidth","autoHeight","maxWidth","pause","useDebounceCallback","callback","leading","maxWait","wait","callbackRef","prev","trailingTimeout","clearTrailing","clearTimeout","useCallback","now","Date","apply","last","offset","setTimeout","cancel","useContinuousTap","singleTap","doubleTap","continuousClick","debounceTap","invokeTap","rebound","start","bound","easeOutMove","t","useScrollPosition","callbackX","callbackY","callbackS","X","spatial","Y","S","lastX","lastY","safeScale","lastScale","touchedTime","beginEdgeX","beginX","beginEdgeY","beginY","moveTime","abs","nextX","nextY","targetX","targetY","speedX","speedY","speedT","edgeX","edgeY","scrollMove","isEdgeX","currentX","isEdgeY","currentY","resultX","resultY","acceleration","resistance","initialSpeed","v","s","lastTime","frameId","calcMove","dt","direction","sign","a","f","ds","caf","raf","requestAnimationFrame","cancelAnimationFrame","easeOutQuart","end","speed","easing","complete","distance","startTime","time","result","initialRect","T","L","W","H","FIT","useAnimationOrigin","originRef","loaded","updateEasing","originRect","updateOriginRect","useState","easingMode","updateEasingMode","initialTime","OK","handleUpdateOrigin","handleToShape","currentShape","element","nodeType","top","left","getBoundingClientRect","isImage","tagName","getComputedStyle","objectFit","useTargetScale","realWidth","realHeight","realScale","execRef","lead","updateState","moveScale","useIsomorphicLayoutEffect","useAnimationPosition","autoScale","centerWidth","centerHeight","miniMode","translateX","translateY","currentScale","opacity","useMountedRef","mountedRef","Spinner","fill","Photo","src","broken","onPhotoLoad","loadingElement","brokenElement","title","description","restProps","handleImageLoaded","e","target","handleImageBroken","Fragment","onLoad","onError","draggable","alt","touched","maskTouched","CX","CY","touchTime","touchLength","stopRaf","reach","PhotoBox","item","render","customWidth","customHeight","wrapClassName","onPhotoTap","onMaskTap","onReachMove","onReachUp","onPhotoResize","isActive","expose","initialTouchRef","mounted","onScale","onRotate","handleMove","currentTouchLength","isStillX","isStillY","currentReach","updateRaf","slideToPosition","nextScale","handlePhotoTap","currentClientX","currentClientY","endScale","handleUp","preventDefault","passive","changedTouches","touch","handlePhotoLoad","params","handleStart","handleWheel","deltaY","handleMaskStart","handleTouchStart","stopPropagation","handleMouseDown","button","isPause","transitionLayoutTime","transitionCSS","attrs","onMouseDown","onTouchStart","onWheel","transform","transition","willChange","bg","lastBg","overlay","minimal","PhotoSlider","speedFn","easingFn","photoClosable","maskClosable","maskOpacity","pullClosable","bannerVisible","overlayRender","toolbarRender","maskClassName","photoClassName","photoWrapClassName","controlledIndex","onIndexChange","controlledIndexChange","onClose","portalContainer","innerIndex","updateInnerIndex","isControlled","hasOwnProperty","virtualIndexRef","classList","remove","currentImage","enableLoop","close","changeIndex","nextIndex","currentIndex","limitIndex","nextVirtualIndex","singlePageWidth","realLoopIndex","closeable","handleResize","handleReachVerticalMove","handleReachHorizontalMove","originOffsetClientX","offsetClientX","handleReachMove","handleReachUp","offsetClientY","willClose","currentTranslateX","adjacentImages","handlePortalMouseMove","rect","currentTarget","cursorX","halfWidth","add","handlePortalMouseLeave","handlePortalClick","closest","currentOverlayVisible","currentOpacity","overlayParams","overlayVisible","currentSpeed","currentEasing","slideSpeed","slideEasing","role","onClick","onMouseMove","onMouseLeave","background","transitionTimingFunction","transitionDuration","animationDuration","map","PhotoProvider","children","onVisibleChange","uniqueIdRef","methods","nextId","update","imageItem","findIndex","n","nextImages","splice","filter","nextEndIndex","show","PhotoContext","Provider","useInitial","PhotoView","triggers","photoContext","useContext","invokeChildrenFn","eventName","eventFn","eventListeners","listener","bind","Children","only","cloneElement","ref"],"mappings":"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"}