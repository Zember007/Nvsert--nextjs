var e=require("react"),t=require("react-dom");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=/*#__PURE__*/n(e);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}function o(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}function i(t){var n=e.useRef({fn:t,curr:void 0}).current;if(n.fn=t,!n.curr){var r=Object.create(null);Object.keys(t).forEach(function(e){r[e]=function(){var t;return(t=n.fn[e]).call.apply(t,[n.fn].concat([].slice.call(arguments)))}}),n.curr=r}return n.curr}function u(t){return e.useReducer(function(e,t){return a({},e,"function"==typeof t?t(e):t)},t)}var c=e.createContext(void 0),l="cubic-bezier(0.25, 0.8, 0.25, 1)",s="undefined"!=typeof window&&"ontouchstart"in window,d=function(e,t,n){return Math.max(Math.min(e,n),t)},f=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),d(e,1*(1-n),Math.max(6,t)*(1+n))},v="undefined"==typeof window||/ServerSideRendering/.test(navigator&&navigator.userAgent)?e.useEffect:e.useLayoutEffect;function h(t,n,r){var a=e.useRef(n);a.current=n,e.useEffect(function(){function e(e){a.current(e)}return t&&window.addEventListener(t,e,r),function(){t&&window.removeEventListener(t,e)}},[t])}var m=["container"];function g(e){var n=e.container,i=void 0===n?document.body:n,u=o(e,m);return t.createPortal(r.default.createElement("div",a({},u)),i)}function p(e){return r.default.createElement("button",a({},e),r.default.createElement("div",{className:"in"},r.default.createElement("div",{className:"close-button-block"}),r.default.createElement("div",{className:"close-button-block"})),r.default.createElement("div",{className:"out"},r.default.createElement("div",{className:"close-button-block"}),r.default.createElement("div",{className:"close-button-block"})))}function w(e){return r.default.createElement("svg",a({width:"44",height:"44",viewBox:"0 0 768 768"},e),r.default.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function E(e){return r.default.createElement("svg",a({width:"44",height:"44",viewBox:"0 0 768 768"},e),r.default.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function y(){return e.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function b(e){var t=e.touches[0],n=t.clientX,r=t.clientY;if(e.touches.length>=2){var a=e.touches[1],o=a.clientX,i=a.clientY;return[(n+o)/2,(r+i)/2,Math.sqrt(Math.pow(o-n,2)+Math.pow(i-r,2))]}return[n,r,0]}var x=function(e,t,n,r){var a,o=n*t,i=(o-r)/2,u=e;return o<=r?(a=1,u=0):e>0&&i-e<=0?(a=2,u=i):e<0&&i+e<=0&&(a=3,u=-i),[a,u]};function C(e,t,n,r,a,o,i,u,c,l){void 0===i&&(i=innerWidth/2),void 0===u&&(u=innerHeight/2),void 0===c&&(c=0),void 0===l&&(l=0);var s=x(e,o,n,innerWidth)[0],d=x(t,o,r,innerHeight),f=innerWidth/2,v=innerHeight/2;return{x:i-o/a*(i-(f+e))-f+(r/n>=3&&n*o===innerWidth?0:s?c/2:c),y:u-o/a*(u-(v+t))-v+(d[0]?l/2:l),lastCX:i,lastCY:u}}function k(e,t,n){var r=e%180!=0;return r?[n,t,r]:[t,n,r]}function P(e,t,n){var r=k(n,innerWidth,innerHeight),a=r[0],o=r[1],i=0;return e<a&&t<o||e<a&&t>=o||e>=a&&t<o||e/t>a/o||t/e>=3&&!r[2]&&(i=(t/e*a-o)/2),{width:448,height:t/e*448,x:0,y:i,pause:!0}}function _(t,n){var r=n.leading,a=void 0!==r&&r,o=n.maxWait,i=n.wait,u=void 0===i?o||0:i,c=e.useRef(t);c.current=t;var l=e.useRef(0),s=e.useRef(null),d=function(){return s.current&&clearTimeout(s.current)},f=e.useCallback(function(){var e=[].slice.call(arguments),t=Date.now();function n(){l.current=t,d(),c.current.apply(null,e)}var r=l.current,i=t-r;if(0===r&&(a&&n(),l.current=t),void 0!==o){if(i>o)return void n()}else i<u&&(l.current=t);d(),s.current=setTimeout(function(){n(),l.current=0},u)},[u,o,a]);return f.cancel=d,f}var R=function(e,t,n){return M(e,t,n,100,function(e){return e},function(){return M(t,e,n)})},N=function(e){return 1-Math.pow(1-e,4)};function M(e,t,n,r,a,o){void 0===r&&(r=400),void 0===a&&(a=N);var i=t-e;if(0!==i){var u=Date.now(),c=0,l=function(){var t=Math.min(1,(Date.now()-u)/r);n(e+a(t)*i)&&t<1?s():(cancelAnimationFrame(c),t>=1&&o&&o())};s()}function s(){c=requestAnimationFrame(l)}}var S={T:0,L:0,W:0,H:0,FIT:void 0},Y=function(){var t=e.useRef(!1);return e.useEffect(function(){return t.current=!0,function(){t.current=!1}},[]),t},X=["className"];function W(e){var t=e.className,n=void 0===t?"":t,i=o(e,X);return r.default.createElement("div",a({className:"PhotoView__Spinner "+n},i),r.default.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},r.default.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),r.default.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var T=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function V(e){var t=e.src,n=e.loaded,i=e.broken,u=e.className,c=e.onPhotoLoad,l=e.loadingElement,s=e.brokenElement,d=o(e,T),f=Y();return t&&!i?r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"PhotoView__Photo__attr "+(!n&&"loaded")},r.default.createElement("img",a({className:"PhotoView__Photo"+(u?" "+u:""),src:t,onLoad:function(e){var t=e.target;f.current&&c({loaded:!0,naturalWidth:t.naturalWidth,naturalHeight:t.naturalHeight})},onError:function(){f.current&&c({broken:!0})},draggable:!1,alt:"document"},d))),!n&&(l?r.default.createElement("span",{className:"PhotoView__icon"},l):r.default.createElement(W,{className:"PhotoView__icon"}))):s?r.default.createElement("span",{className:"PhotoView__icon"},"function"==typeof s?s({src:t}):s):null}var A={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function L(t){var n=t.item,o=n.src,c=n.render,l=n.width,d=void 0===l?0:l,m=n.height,g=void 0===m?0:m,p=n.originRef,w=t.visible,E=t.speed,y=t.easing,N=t.wrapClassName,X=t.className,W=t.style,T=t.loadingElement,L=t.brokenElement,I=t.onPhotoTap,H=t.onMaskTap,F=t.onReachMove,D=t.onReachUp,O=t.onPhotoResize,q=t.isActive,B=t.expose,j=u(A),z=j[0],K=j[1],G=e.useRef(0),U=Y(),J=z.naturalWidth,Q=void 0===J?d:J,Z=z.naturalHeight,$=void 0===Z?g:Z,ee=z.width,te=void 0===ee?d:ee,ne=z.height,re=void 0===ne?g:ne,ae=z.loaded,oe=void 0===ae?!o:ae,ie=z.broken,ue=z.x,ce=z.y,le=z.touched,se=z.stopRaf,de=z.maskTouched,fe=z.rotate,ve=z.scale,he=z.CX,me=z.CY,ge=z.lastX,pe=z.lastY,we=z.lastCX,Ee=z.lastCY,ye=z.lastScale,be=z.touchTime,xe=z.touchLength,Ce=z.pause,ke=z.reach,Pe=i({onScale:function(e){return _e(f(e))},onRotate:function(e){fe!==e&&(B({rotate:e}),K(a({rotate:e},P(Q,$,e))))}});function _e(e,t,n){ve!==e&&(B({scale:e}),K(a({scale:e},C(ue,ce,te,re,ve,e,t,n),e<=1&&{x:0,y:0})))}var Re=_(function(e,t,n){if(void 0===n&&(n=0),(le||de)&&q){var r=k(fe,te,re),o=r[0],i=r[1];if(0===n&&0===G.current){var u=Math.abs(e-he)<=20,c=Math.abs(t-me)<=20;if(u&&c)return void K({lastCX:e,lastCY:t});G.current=u?t>me?3:2:1}var l,s=e-we,d=t-Ee;if(0===n){var v=x(s+ge,ve,o,innerWidth)[0],h=x(d+pe,ve,i,innerHeight);l=function(e,t,n,r){return t&&1===e||"x"===r?"x":n&&e>1||"y"===r?"y":void 0}(G.current,v,h[0],ke),void 0!==l&&F(l,e,t,ve)}if("x"===l||de)return void K({reach:"x"});var m=f(ve+(n-xe)/100/2*ve,Q/te,.2);B({scale:m}),K(a({touchLength:n,reach:l,scale:m},C(ue,ce,te,re,ve,m,e,t,s,d)))}},{maxWait:8});function Ne(e){return!se&&!le&&(U.current&&K(a({},e,{pause:w})),U.current)}var Me,Se,Ye,Xe,We,Te,Ve,Ae,Le=(We=function(e){return Ne({x:e})},Te=function(e){return Ne({y:e})},Ve=function(e){return U.current&&(B({scale:e}),K({scale:e})),!le&&U.current},Ae=i({X:function(e){return We(e)},Y:function(e){return Te(e)},S:function(e){return Ve(e)}}),function(e,t,n,r,a,o,i,u,c,l,s){var d=k(l,a,o),f=d[0],v=d[1],h=x(e,u,f,innerWidth),m=h[0],g=h[1],p=x(t,u,v,innerHeight),w=p[0],E=p[1],y=Date.now()-s;if(y>=200||u!==i||Math.abs(c-i)>1){var b=C(e,t,a,o,i,u),P=b.x,_=b.y,N=m?g:P!==e?P:null,S=w?E:_!==t?_:null;return null!==N&&M(e,N,Ae.X),null!==S&&M(t,S,Ae.Y),void(u!==i&&M(i,u,Ae.S))}var Y=(e-n)/y,X=(t-r)/y,W=Math.sqrt(Math.pow(Y,2)+Math.pow(X,2)),T=!1,V=!1;!function(e,t){var n,r=e,a=0,o=0,i=function(o){n||(n=o);var i=o-n,l=Math.sign(e),s=-.001*l,d=Math.sign(-r)*Math.pow(r,2)*2e-4,f=r*i+(s+d)*Math.pow(i,2)/2;a+=f,n=o,l*(r+=(s+d)*i)<=0?c():t(a)?u():c()};function u(){o=requestAnimationFrame(i)}function c(){cancelAnimationFrame(o)}u()}(W,function(n){var r=e+n*(Y/W),a=t+n*(X/W),o=x(r,i,f,innerWidth),u=o[0],c=o[1],l=x(a,i,v,innerHeight),s=l[0],d=l[1];if(u&&!T&&(T=!0,m?M(r,c,Ae.X):R(c,r+(r-c),Ae.X)),s&&!V&&(V=!0,w?M(a,d,Ae.Y):R(d,a+(a-d),Ae.Y)),T&&V)return!1;var h=T||Ae.X(c),g=V||Ae.Y(d);return h&&g})}),Ie=(Me=I,Se=function(e,t){ke||_e(1!==ve?1:Math.max(2,Q/te),e,t)},Ye=e.useRef(0),Xe=_(function(){Ye.current=0,Me.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var e=[].slice.call(arguments);Ye.current+=1,Xe.apply(void 0,e),Ye.current>=2&&(Xe.cancel(),Ye.current=0,Se.apply(void 0,e))});function He(e,t){if(G.current=0,(le||de)&&q){K({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var n=f(ve,Q/te);if(Le(ue,ce,ge,pe,te,re,ve,n,ye,fe,be),D(e,t),he===e&&me===t){if(le)return void Ie(e,t);de&&H(e,t)}}}function Fe(e,t,n){void 0===n&&(n=0),K({touched:!0,CX:e,CY:t,lastCX:e,lastCY:t,lastX:ue,lastY:ce,lastScale:ve,touchLength:n,touchTime:Date.now()})}function De(e){K({maskTouched:!0,CX:e.clientX,CY:e.clientY,lastX:ue,lastY:ce})}h(s?void 0:"mousemove",function(e){e.preventDefault(),Re(e.clientX,e.clientY)}),h(s?void 0:"mouseup",function(e){He(e.clientX,e.clientY)}),h(s?"touchmove":void 0,function(e){e.preventDefault();var t=b(e);Re.apply(void 0,t)},{passive:!1}),h(s?"touchend":void 0,function(e){var t=e.changedTouches[0];He(t.clientX,t.clientY)},{passive:!1}),h("resize",_(function(){oe&&!le&&(K(P(Q,$,fe)),O())},{maxWait:8})),v(function(){q&&B(a({scale:ve,rotate:fe},Pe))},[q]);var Oe=function(t,n,r,a,o,c,l,s,d,f){var h=function(t,n,r,a,o){var i=e.useRef(!1),c=u({lead:!0,scale:r}),l=c[0],s=l.lead,d=l.scale,f=c[1],h=_(function(e){try{return o(!0),f({lead:!1,scale:e}),Promise.resolve()}catch(e){return Promise.reject(e)}},{wait:a});return v(function(){i.current?(o(!1),f({lead:!0}),h(r)):i.current=!0},[r]),s?[t*d,n*d,r/d]:[t*r,n*r,1]}(c,l,s,d,f),m=h[0],g=h[1],p=h[2],w=function(t,n,r,a,o){var u=e.useState(S),c=u[0],l=u[1],s=e.useState(0),d=s[0],f=s[1],v=e.useRef(null),h=i({OK:function(){return t&&f(4)}});function m(e){o(!1),f(e)}return e.useEffect(function(){if(v.current||(v.current=Date.now()),r){if(function(e,t){var n=e&&e.current;if(n&&1===n.nodeType){var r=n.getBoundingClientRect();t({T:r.top,L:r.left,W:r.width,H:r.height,FIT:"IMG"===n.tagName?getComputedStyle(n).objectFit:void 0})}}(n,l),t)return Date.now()-v.current<250?(f(1),requestAnimationFrame(function(){f(2),requestAnimationFrame(function(){return m(3)})}),void setTimeout(h.OK,a)):void f(4);m(5)}},[t,r]),[d,c]}(t,n,r,d,f),E=w[0],y=w[1],b=y.W,x=y.FIT,C=innerWidth/2,k=innerHeight/2,P=E<3||E>4;return[P?b?y.L:C:a+(C-c*s/2),P?b?y.T:k:o+(k-l*s/2),m,P&&x?m*(y.H/b):g,0===E?p:P?b/(c*s)||.01:p,P?x?1:0:1,E,x]}(w,p,oe,ue,ce,te,re,ve,E,function(e){return K({pause:e})}),qe=Oe[4],Be=Oe[6],je="transform "+E+"ms "+y,ze={className:X,onMouseDown:s?void 0:function(e){e.stopPropagation(),0===e.button&&Fe(e.clientX,e.clientY,0)},onTouchStart:s?function(e){e.stopPropagation(),Fe.apply(void 0,b(e))}:void 0,onWheel:function(e){if(!ke){var t=f(ve-e.deltaY/100/2,Q/te);K({stopRaf:!0}),_e(t,e.clientX,e.clientY)}},style:{width:Oe[2]+"px",height:Oe[3]+"px",opacity:Oe[5],objectFit:4===Be?void 0:Oe[7],transform:fe?"rotate("+fe+"deg)":void 0,transition:Be>2?je+", opacity "+E+"ms ease, height "+(Be<4?E/2:Be>4?E:0)+"ms "+y:void 0}};return r.default.createElement("div",{className:"PhotoView__PhotoWrap"+(N?" "+N:""),style:W,onMouseDown:!s&&q?De:void 0,onTouchStart:s&&q?function(e){return De(e.touches[0])}:void 0},r.default.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+qe+", 0, 0, "+qe+", "+Oe[0]+", "+Oe[1]+")",transition:le||Ce?void 0:je,willChange:q?"transform":void 0}},o?r.default.createElement(V,a({src:o,loaded:oe,broken:ie},ze,{onPhotoLoad:function(e){K(a({},e,e.loaded&&P(e.naturalWidth||0,e.naturalHeight||0,fe)))},loadingElement:T,brokenElement:L})):c&&c({attrs:ze,scale:qe,rotate:fe})))}var I={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function H(t){var n=t.loop,a=void 0===n?3:n,o=t.speed,c=t.easing,f=t.photoClosable,m=t.maskClosable,b=void 0===m||m,x=t.maskOpacity,C=void 0===x?1:x,k=t.bannerVisible,P=void 0===k||k,_=t.overlayRender,R=t.toolbarRender,N=t.className,M=t.maskClassName,S=t.photoClassName,Y=t.photoWrapClassName,X=t.loadingElement,W=t.brokenElement,T=t.images,V=t.index,A=void 0===V?0:V,H=t.onIndexChange,F=t.visible,D=t.onClose,O=t.afterClose,q=t.portalContainer,B=u(I),j=B[0],z=B[1],K=e.useState(0),G=K[0],U=K[1];e.useState(null);var J=j.x,Q=j.touched,Z=j.pause,$=j.bg,ee=void 0===$?C:$,te=j.lastBg,ne=j.overlay,re=j.scale,ae=j.rotate,oe=j.onScale,ie=j.onRotate,ue=t.hasOwnProperty("index"),ce=ue?A:G,le=ue?H:U,se=e.useRef(ce),de=T.length,fe=T[ce],ve="boolean"==typeof a?a:de>a,he=function(t,n){var r=e.useReducer(function(e){return!e},!1)[1],a=e.useRef(0),o=function(n){var r=e.useRef(n);function o(e){r.current=e}return e.useMemo(function(){!function(e){t?(e(t),a.current=1):a.current=2}(o)},[n]),[r.current,o]}(t),i=o[1];return[o[0],a.current,function(){r(),2===a.current&&(i(!1),n&&n()),a.current=0}]}(F,O),me=he[0],ge=he[1],pe=he[2];v(function(){if(me)return z({pause:!0,x:ce*-(innerWidth+20)}),void(se.current=ce);z(I)},[me]);var we=i({close:function(e){ie&&ie(0),z({overlay:!0,lastBg:ee}),D(e)},changeIndex:function(e,t){void 0===t&&(t=!1);var n=ve?se.current+(e-ce):e,r=de-1,a=d(n,0,r),o=ve?n:a,i=innerWidth+20;z({touched:!1,x:-i*se.current,lastCX:void 0,lastCY:void 0,bg:C,overlay:ne}),z({touched:!1,lastCX:void 0,lastCY:void 0,x:-i*o,pause:t}),se.current=o,le&&le(ve?e<0?r:e>r?0:e:a)}}),Ee=we.close,ye=we.changeIndex;function be(e){return e?Ee():z({overlay:!ne})}function xe(){z({x:-(innerWidth+20)*ce,lastCX:void 0,lastCY:void 0,pause:!0}),se.current=ce}h("keydown",function(e){if(F)switch(e.key){case"ArrowLeft":ye(ce-1,!0);break;case"ArrowRight":ye(ce+1,!0);break;case"Escape":Ee()}});var Ce=function(t,n,r){return e.useMemo(function(){var e=t.length;return r?t.concat(t).concat(t).slice(e+n-1,e+n+2):t.slice(Math.max(n-1,0),Math.min(n+2,e+1))},[t,n,r])}(T,ce,ve);if(e.useEffect(function(){setTimeout(function(){var e;null==(e=document.querySelector(".Slider_scale"))||e.classList.remove("slider-transitions")},100)},[ce]),!me)return null;var ke=ne&&!ge,Pe=F?ee:te,_e=oe&&ie&&{images:T,index:ce,visible:F,onClose:Ee,onIndexChange:ye,overlayVisible:ke,overlay:fe&&fe.overlay,scale:re,rotate:ae,onScale:oe,onRotate:ie},Re=o?o(ge):400,Ne=c?c(ge):l,Me=o?o(3):600,Se=c?c(3):l;return r.default.createElement(g,{className:"PhotoView-Portal"+(ke?"":" PhotoView-Slider__clean")+(F?"":" PhotoView-Slider__willClose")+(N?" "+N:""),role:"dialog",onClick:function(e){return e.stopPropagation()},container:q},F&&r.default.createElement(y,null),r.default.createElement("div",{className:"PhotoView-Slider__Backdrop"+(M?" "+M:"")+(1===ge?" PhotoView-Slider__fadeIn":2===ge?" PhotoView-Slider__fadeOut":""),style:{background:Pe?"rgba(0, 0, 0, "+Pe+")":void 0,transitionTimingFunction:Ne,transitionDuration:(Q?0:Re)+"ms",animationDuration:Re+"ms"},onAnimationEnd:pe}),P&&r.default.createElement("div",{className:"PhotoView-Slider__BannerWrap"},r.default.createElement("div",{className:"PhotoView-Slider__Counter"},ce+1," / ",de),r.default.createElement("div",{className:"PhotoView-Slider__BannerRight"},R&&_e&&R(_e),r.default.createElement(p,{className:"close",onClick:Ee}))),r.default.createElement("div",{className:"Slider_scale"},Ce.map(function(e,t){var n=ve||0!==ce?se.current-1+t:ce+t;return r.default.createElement(L,{key:ve?e.key+"/"+e.src+"/"+n:e.key,item:e,speed:Re,easing:Ne,visible:F,onPhotoTap:function(){return be(f)},onMaskTap:function(){return be(b)},wrapClassName:Y,className:S,style:{left:(innerWidth+20)*n+"px",transform:"translate3d("+J+"px, 0px, 0)",transition:Q||Z?void 0:"transform "+Me+"ms "+Se},loadingElement:X,brokenElement:W,onPhotoResize:xe,isActive:se.current===n,expose:z})})),!s&&P&&r.default.createElement(r.default.Fragment,null,(ve||0!==ce)&&r.default.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){var e;null==(e=document.querySelector(".Slider_scale"))||e.classList.add("slider-transitions"),ye(ce-1)}},r.default.createElement(w,null)),(ve||ce+1<de)&&r.default.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){var e;null==(e=document.querySelector(".Slider_scale"))||e.classList.add("slider-transitions"),ye(ce+1)}},r.default.createElement(E,null))),_&&_e&&r.default.createElement("div",{className:"PhotoView-Slider__Overlay"},_(_e)))}var F=["children","onIndexChange","onVisibleChange"],D={images:[],visible:!1,index:0};exports.PhotoProvider=function(t){var n=t.children,l=t.onIndexChange,s=t.onVisibleChange,d=o(t,F),f=u(D),v=f[0],h=f[1],m=e.useRef(0),g=v.images,p=v.visible,w=v.index,E=i({nextId:function(){return m.current+=1},update:function(e){var t=g.findIndex(function(t){return t.key===e.key});if(t>-1){var n=g.slice();return n.splice(t,1,e),void h({images:n})}h(function(t){return{images:t.images.concat(e)}})},remove:function(e){h(function(t){var n=t.images.filter(function(t){return t.key!==e});return{images:n,index:Math.min(n.length-1,w)}})},show:function(e){var t=g.findIndex(function(t){return t.key===e});h({visible:!0,index:t}),s&&s(!0,t,v)}}),y=i({close:function(){h({visible:!1}),s&&s(!1,w,v)},changeIndex:function(e){h({index:e}),l&&l(e,v)}}),b=e.useMemo(function(){return a({},v,E)},[v,E]);return r.default.createElement(c.Provider,{value:b},n,r.default.createElement(H,a({images:g,visible:p,index:w,onIndexChange:y.changeIndex,onClose:y.close},d)))},exports.PhotoSlider=H,exports.PhotoView=function(t){var n,r,o=t.src,u=t.render,l=t.overlay,s=t.width,d=t.height,f=t.triggers,v=void 0===f?["onClick"]:f,h=t.children,m=e.useContext(c),g=(n=function(){return m.nextId()},(r=e.useRef({sign:!1,fn:void 0}).current).sign||(r.sign=!0,r.fn=n()),r.fn),p=e.useRef(null);e.useImperativeHandle(null==h?void 0:h.ref,function(){return p.current}),e.useEffect(function(){return function(){m.remove(g)}},[]);var w=i({render:function(e){return u&&u(e)},show:function(e,t){m.show(g),function(e,t){if(h){var n=h.props[e];n&&n(t)}}(e,t)}}),E=e.useMemo(function(){var e={};return v.forEach(function(t){e[t]=w.show.bind(null,t)}),e},[]);if(e.useEffect(function(){m.update({key:g,src:o,originRef:p,render:w.render,overlay:l,width:s,height:d})},[o]),h){var y=e.Children.only(e.cloneElement(h,a({},E,{ref:p})));return React.createElement(React.Fragment,null,y)}return null};
//# sourceMappingURL=react-photo-view.js.map
