import e,{useRef as t,useReducer as n,createContext as o,useEffect as r,useLayoutEffect as i,useMemo as a,useCallback as c,useState as l,useContext as s,Children as u,cloneElement as d}from"react";import{createPortal as h}from"react-dom";function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},m.apply(null,arguments)}function f(e,t){if(null==e)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;n[o]=e[o]}return n}function v(e){const{current:n}=t({fn:e,curr:void 0});if(n.fn=e,!n.curr){const t=Object.create(null);Object.keys(e).forEach(e=>{t[e]=(...t)=>n.fn[e].call(n.fn,...t)}),n.curr=t}return n.curr}function g(e){return n((e,t)=>m({},e,"function"==typeof t?t(e):t),e)}var p=o(void 0);const w="cubic-bezier(0.25, 0.8, 0.25, 1)",b=20,_=1,y="undefined"!=typeof window&&"ontouchstart"in window,C=(e,t,n)=>Math.max(Math.min(e,n),t),x=(e,t=0,n=0)=>C(e,1*(1-n),Math.max(6,t)*(1+n));var E="undefined"==typeof window||/ServerSideRendering/.test(navigator&&navigator.userAgent)?r:i;function P(e,n,o){const i=t(n);i.current=n,r(()=>{function t(e){i.current(e)}return e&&window.addEventListener(e,t,o),()=>{e&&window.removeEventListener(e,t)}},[e])}const k=["container"];function N(t){let{container:n=document.body}=t,o=f(t,k);return h(e.createElement("div",m({},o)),n)}function X(t){return e.createElement("button",m({},t),e.createElement("div",{className:"in"},e.createElement("div",{className:"close-button-block"}),e.createElement("div",{className:"close-button-block"})),e.createElement("div",{className:"out"},e.createElement("div",{className:"close-button-block"}),e.createElement("div",{className:"close-button-block"})))}function Y(t){return e.createElement("svg",m({width:"44",height:"44",viewBox:"0 0 768 768"},t),e.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function $(t){return e.createElement("svg",m({width:"44",height:"44",viewBox:"0 0 768 768"},t),e.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function M(){return r(()=>{const{style:e}=document.body,t=e.overflow;return e.overflow="hidden",()=>{e.overflow=t}},[]),null}function W(e){const{clientX:t,clientY:n}=e.touches[0];if(e.touches.length>=2){const{clientX:o,clientY:r}=e.touches[1];return[(t+o)/2,(n+r)/2,Math.sqrt((o-t)**2+(r-n)**2)]}return[t,n,0]}const V=(e,t,n,o)=>{const r=n*t,i=(r-o)/2;let a,c=e;return r<=o?(a=1,c=0):e>0&&i-e<=0?(a=2,c=i):e<0&&i+e<=0&&(a=3,c=-i),[a,c]};function S(e,t,n,o,r,i,a=innerWidth/2,c=innerHeight/2,l=0,s=0){const[u]=V(e,i,n,innerWidth),[d]=V(t,i,o,innerHeight),h=innerWidth/2,m=innerHeight/2;return{x:a-i/r*(a-(h+e))-h+(o/n>=3&&n*i===innerWidth?0:u?l/2:l),y:c-i/r*(c-(m+t))-m+(d?s/2:s),lastCX:a,lastCY:c}}function T(e,t,n){const o=e%180!=0;return o?[n,t,o]:[t,n,o]}function R(e,t,n){const[o,r,i]=T(n,innerWidth,innerHeight);let a=0,c=o,l=r;const s=e/t*r,u=t/e*o;return e<o&&t<r?(c=e,l=t):e<o&&t>=r?c=s:e>=o&&t<r||e/t>o/r?l=u:t/e>=3&&!i?(l=u,a=(l-r)/2):c=s,c>448?(c=448,l=t/e*448):(c-=30,l=t/e*c),{width:c,height:l,x:0,y:a,pause:!0}}function L(e,{leading:n=!1,maxWait:o,wait:r=o||0}){const i=t(e);i.current=e;const a=t(0),l=t(null),s=()=>l.current&&clearTimeout(l.current),u=c((...e)=>{const t=Date.now();function c(){a.current=t,s(),i.current.apply(null,e)}const u=a.current,d=t-u;if(0===u&&(n&&c(),a.current=t),void 0!==o){if(d>o)return void c()}else d<r&&(a.current=t);s(),l.current=setTimeout(()=>{c(),a.current=0},r)},[r,o,n]);return u.cancel=s,u}const A=(e,t,n)=>H(e,t,n,100,e=>e,()=>H(t,e,n)),I=e=>1-(1-e)**4;function H(e,t,n,o=400,r=I,i){const a=t-e;if(0===a)return;const c=Date.now();let l=0;const s=()=>{const t=Math.min(1,(Date.now()-c)/o);n(e+r(t)*a)&&t<1?u():(cancelAnimationFrame(l),t>=1&&i&&i())};function u(){l=requestAnimationFrame(s)}u()}const B={T:0,L:0,W:0,H:0,FIT:void 0},F=()=>{const e=t(!1);return r(()=>(e.current=!0,()=>{e.current=!1}),[]),e},D=["className"];function O(t){let{className:n=""}=t,o=f(t,D);return e.createElement("div",m({className:`PhotoView__Spinner ${n}`},o),e.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},e.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),e.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}const z=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement","title","description"];function j(t){let{src:n,loaded:o,broken:r,className:i,onPhotoLoad:a,loadingElement:c,brokenElement:l,title:s,description:u}=t,d=f(t,z);const h=F();return n&&!r?e.createElement(e.Fragment,null,e.createElement("div",{className:`PhotoView__Photo__attr ${!o&&"loaded"}`},s&&e.createElement("div",{className:"PhotoView__Photo__title"},s),e.createElement("img",m({className:"PhotoView__Photo"+(i?` ${i}`:""),src:n,onLoad:function(e){const{naturalWidth:t,naturalHeight:n}=e.target;h.current&&a({loaded:!0,naturalWidth:t,naturalHeight:n})},onError:function(){h.current&&a({broken:!0})},draggable:!1,alt:"document"},d)),u&&e.createElement("div",{className:"PhotoView__Photo__description"},u)),!o&&(c?e.createElement("span",{className:"PhotoView__icon"},c):e.createElement(O,{className:"PhotoView__icon"}))):l?e.createElement("span",{className:"PhotoView__icon"},"function"==typeof l?l({src:n}):l):null}const q={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function K({item:{src:n,render:o,width:i=0,height:a=0,originRef:c,title:s,description:u},visible:d,speed:h,easing:f,wrapClassName:p,className:w,style:b,loadingElement:_,brokenElement:C,onPhotoTap:k,onMaskTap:N,onReachMove:X,onReachUp:Y,onPhotoResize:$,isActive:M,expose:I}){const[D,O]=g(q),z=t(0),K=F(),{naturalWidth:U=i,naturalHeight:G=a,width:J=i,height:Q=a,loaded:Z=!n,broken:ee,x:te,y:ne,touched:oe,stopRaf:re,maskTouched:ie,rotate:ae,scale:ce,CX:le,CY:se,lastX:ue,lastY:de,lastCX:he,lastCY:me,lastScale:fe,touchTime:ve,touchLength:ge,pause:pe,reach:we}=D,be=v({onScale:e=>_e(x(e)),onRotate(e){ae!==e&&(I({rotate:e}),O(m({rotate:e},R(U,G,e))))}});function _e(e,t,n){ce!==e&&(I({scale:e}),O(m({scale:e},S(te,ne,J,Q,ce,e,t,n),e<=1&&{x:0,y:0})))}const ye=L((e,t,n=0)=>{if((oe||ie)&&M){const[o,r]=T(ae,J,Q);if(0===n&&0===z.current){const n=Math.abs(e-le)<=20,o=Math.abs(t-se)<=20;if(n&&o)return void O({lastCX:e,lastCY:t});z.current=n?t>se?3:2:1}const i=e-he,a=t-me;let c;if(0===n){const[n]=V(i+ue,ce,o,innerWidth),[l]=V(a+de,ce,r,innerHeight);c=((e,t,n,o)=>t&&1===e||"x"===o?"x":n&&e>1||"y"===o?"y":void 0)(z.current,n,l,we),void 0!==c&&X(c,e,t,ce)}if("x"===c||ie)return void O({reach:"x"});const l=x(ce+(n-ge)/100/2*ce,U/J,.2);I({scale:l}),O(m({touchLength:n,reach:c,scale:l},S(te,ne,J,Q,ce,l,e,t,i,a)))}},{maxWait:8});function Ce(e){return!re&&!oe&&(K.current&&O(m({},e,{pause:d})),K.current)}const xe=function(){const e=v({X:e=>Ce({x:e}),Y:e=>Ce({y:e}),S:e=>{return t=e,K.current&&(I({scale:t}),O({scale:t})),!oe&&K.current;var t}});return(t,n,o,r,i,a,c,l,s,u,d)=>{const[h,m]=T(u,i,a),[f,v]=V(t,l,h,innerWidth),[g,p]=V(n,l,m,innerHeight),w=Date.now()-d;if(w>=200||l!==c||Math.abs(s-c)>1){const{x:o,y:r}=S(t,n,i,a,c,l),s=f?v:o!==t?o:null,u=g?p:r!==n?r:null;return null!==s&&H(t,s,e.X),null!==u&&H(n,u,e.Y),void(l!==c&&H(c,l,e.S))}const b=(t-o)/w,_=(n-r)/w,y=Math.sqrt(b**2+_**2);let C=!1,x=!1;!function(e,t){let n,o=e,r=0,i=0;const a=i=>{n||(n=i);const a=i-n,s=Math.sign(e),u=-.001*s,d=Math.sign(-o)*o**2*2e-4,h=o*a+(u+d)*a**2/2;o+=(u+d)*a,r+=h,n=i,s*o<=0?l():t(r)?c():l()};function c(){i=requestAnimationFrame(a)}function l(){cancelAnimationFrame(i)}c()}(y,o=>{const r=t+o*(b/y),i=n+o*(_/y),[a,l]=V(r,c,h,innerWidth),[s,u]=V(i,c,m,innerHeight);if(a&&!C&&(C=!0,f?H(r,l,e.X):A(l,r+(r-l),e.X)),s&&!x&&(x=!0,g?H(i,u,e.Y):A(u,i+(i-u),e.Y)),C&&x)return!1;const d=C||e.X(l),v=x||e.Y(u);return d&&v})}}(),Ee=function(e){const n=t(0),o=L((...t)=>{n.current=0,e(...t)},{wait:300});return function(...e){n.current+=1,o(...e),n.current>=2&&(o.cancel(),n.current=0,((e,t)=>{we||_e(1!==ce?1:Math.max(2,U/J),e,t)})(...e))}}(k);function Pe(e,t){if(z.current=0,(oe||ie)&&M){O({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});const n=x(ce,U/J);if(xe(te,ne,ue,de,J,Q,ce,n,fe,ae,ve),Y(e,t),le===e&&se===t){if(oe)return void Ee(e,t);ie&&N(e,t)}}}function ke(e,t,n=0){O({touched:!0,CX:e,CY:t,lastCX:e,lastCY:t,lastX:te,lastY:ne,lastScale:ce,touchLength:n,touchTime:Date.now()})}function Ne(e){O({maskTouched:!0,CX:e.clientX,CY:e.clientY,lastX:te,lastY:ne})}P(y?void 0:"mousemove",e=>{e.preventDefault(),ye(e.clientX,e.clientY)}),P(y?void 0:"mouseup",e=>{Pe(e.clientX,e.clientY)}),P(y?"touchmove":void 0,e=>{e.preventDefault();const t=W(e);ye(...t)},{passive:!1}),P(y?"touchend":void 0,({changedTouches:e})=>{const t=e[0];Pe(t.clientX,t.clientY)},{passive:!1}),P("resize",L(()=>{Z&&!oe&&(O(R(U,G,ae)),$())},{maxWait:8})),E(()=>{M&&I(m({scale:ce,rotate:ae},be))},[M]);const[Xe,Ye,$e,Me,We,Ve,Se,Te]=function(e,n,o,i,a,c,s,u,d,h){const[m,f,p]=function(e,n,o,r,i){const a=t(!1),[{lead:c,scale:l},s]=g({lead:!0,scale:o}),u=L(async e=>{i(!0),s({lead:!1,scale:e})},{wait:r});return E(()=>{a.current?(i(!1),s({lead:!0}),u(o)):a.current=!0},[o]),c?[e*l,n*l,o/l]:[e*o,n*o,1]}(c,s,u,d,h),[w,b]=function(e,n,o,i,a){const[c,s]=l(B),[u,d]=l(0),h=t(null),m=v({OK:()=>e&&d(4)});function f(e){a(!1),d(e)}return r(()=>{if(h.current||(h.current=Date.now()),o){if(function(e,t){const n=e&&e.current;if(n&&1===n.nodeType){const{top:e,left:o,width:r,height:i}=n.getBoundingClientRect();t({T:e,L:o,W:r,H:i,FIT:"IMG"===n.tagName?getComputedStyle(n).objectFit:void 0})}}(n,s),e)return Date.now()-h.current<250?(d(1),requestAnimationFrame(()=>{d(2),requestAnimationFrame(()=>f(3))}),void setTimeout(m.OK,i)):void d(4);f(5)}},[e,o]),[u,c]}(e,n,o,d,h),{T:_,L:y,W:C,H:x,FIT:P}=b,k=innerWidth/2,N=innerHeight/2,X=w<3||w>4;return[X?C?y:k:i+(k-c*u/2),X?C?_:N:a+(N-s*u/2),m,X&&P?m*(x/C):f,0===w?p:X?C/(c*u)||.01:p,X?P?1:0:1,w,P]}(d,c,Z,te,ne,J,Q,ce,h,e=>O({pause:e})),Re=`transform ${h}ms ${f}`,Le={className:w,onMouseDown:y?void 0:function(e){e.stopPropagation(),0===e.button&&ke(e.clientX,e.clientY,0)},onTouchStart:y?function(e){e.stopPropagation(),ke(...W(e))}:void 0,onWheel:function(e){if(!we){const t=x(ce-e.deltaY/100/2,U/J);O({stopRaf:!0}),_e(t,e.clientX,e.clientY)}},style:{width:`${$e}px`,height:`${Me}px`,opacity:Ve,objectFit:4===Se?void 0:Te,transform:ae?`rotate(${ae}deg)`:void 0,transition:Se>2?`${Re}, opacity ${h}ms ease, height ${Se<4?h/2:Se>4?h:0}ms ${f}`:void 0}};return e.createElement("div",{className:"PhotoView__PhotoWrap"+(p?` ${p}`:""),style:b,onMouseDown:!y&&M?Ne:void 0,onTouchStart:y&&M?e=>Ne(e.touches[0]):void 0},e.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:`matrix(${We}, 0, 0, ${We}, ${Xe}, ${Ye})`,transition:oe||pe?void 0:Re,willChange:M?"transform":void 0}},n?e.createElement(j,m({title:s,description:u,src:n,loaded:Z,broken:ee},Le,{onPhotoLoad:function(e){O(m({},e,e.loaded&&R(e.naturalWidth||0,e.naturalHeight||0,ae)))},loadingElement:_,brokenElement:C})):o&&o({attrs:Le,scale:We,rotate:ae})))}const U={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function G(o){const{loop:i=3,speed:c,easing:s,photoClosable:u,maskClosable:d=!0,maskOpacity:h=_,pullClosable:m=!0,bannerVisible:f=!0,overlayRender:p,toolbarRender:x,className:k,maskClassName:W,photoClassName:V,photoWrapClassName:S,loadingElement:T,brokenElement:R,images:L,index:A=0,onIndexChange:I,visible:H,onClose:B,afterClose:F,portalContainer:D}=o,[O,z]=g(U),[j,q]=l(0),{x:G,touched:J,pause:Q,lastCX:Z,lastCY:ee,bg:te=h,lastBg:ne,overlay:oe,minimal:re,scale:ie,rotate:ae,onScale:ce,onRotate:le}=O,se=o.hasOwnProperty("index"),ue=se?A:j,de=se?I:q,he=t(ue);r(()=>()=>{document.body.classList.remove("modal__nav-arrow--left","modal__nav-arrow--right")},[]);const me=L.length,fe=L[ue],ve="boolean"==typeof i?i:me>i,[ge,pe,we]=function(e,o){const[,r]=n(e=>!e,!1),i=t(0),[c,l]=function(n){const o=t(n);function r(e){o.current=e}return a(()=>{(t=>{e?(t(e),i.current=1):i.current=2})(r)},[n]),[o.current,r]}(e);return[c,i.current,function(){r(),2===i.current&&(l(!1),o&&o()),i.current=0}]}(H,F);E(()=>{if(ge)return z({pause:!0,x:ue*-(innerWidth+b)}),void(he.current=ue);z(U)},[ge]);const{close:be,changeIndex:_e}=v({close(e){le&&le(0),document.body.classList.remove("modal__nav-arrow--left","modal__nav-arrow--right"),z({overlay:!0,lastBg:te}),B(e)},changeIndex(e,t=!1){const n=ve?he.current+(e-ue):e,o=me-1,r=C(n,0,o),i=ve?n:r,a=innerWidth+b;z({touched:!1,lastCX:void 0,lastCY:void 0,x:-a*i,pause:t}),he.current=i,de&&de(ve?e<0?o:e>o?0:e:r)}});function ye(e){return e?be():z({overlay:!oe})}function Ce(){z({x:-(innerWidth+b)*ue,lastCX:void 0,lastCY:void 0,pause:!0}),he.current=ue}function xe(e,t,n,o){"x"===e?function(e){if(void 0===Z)return void z({touched:!0,lastCX:e,x:G,pause:!1});const t=e-Z;let n=t;!ve&&(0===ue&&t>0||ue===me-1&&t<0)&&(n=t/2),z({touched:!0,lastCX:Z,x:-(innerWidth+b)*he.current+n,pause:!1})}(t):"y"===e&&function(e,t){if(void 0===ee)return void z({touched:!0,lastCY:e,bg:te,minimal:!0});const n=null===h?null:C(h,.01,h-Math.abs(e-ee)/100/4);z({touched:!0,lastCY:ee,bg:1===t?n:h,minimal:1===t})}(n,o)}function Ee(e,t){const n=e-(null!=Z?Z:e),o=t-(null!=ee?ee:t);let r=!1;if(n<-100)return void _e(ue+1);if(n>100)return void _e(ue-1);const i=-(innerWidth+b)*he.current;Math.abs(o)>100&&re&&m&&(r=!0,be()),z({touched:!1,x:i,lastCX:void 0,lastCY:void 0,bg:h,overlay:!!r||oe})}P("keydown",e=>{if(H)switch(e.key){case"ArrowLeft":_e(ue-1,!0);break;case"ArrowRight":_e(ue+1,!0);break;case"Escape":be()}});const Pe=function(e,t,n){return a(()=>{const o=e.length;return n?e.concat(e).concat(e).slice(o+t-1,o+t+2):e.slice(Math.max(t-1,0),Math.min(t+2,o+1))},[e,t,n])}(L,ue,ve);if(!ge)return null;const ke=oe&&!pe,Ne=H?te:ne,Xe=ce&&le&&{images:L,index:ue,visible:H,onClose:be,onIndexChange:_e,overlayVisible:ke,overlay:fe&&fe.overlay,scale:ie,rotate:ae,onScale:ce,onRotate:le},Ye=c?c(pe):400,$e=s?s(pe):w,Me=c?c(3):600,We=s?s(3):w;return e.createElement(N,{className:`PhotoView-Portal${ke?"":" PhotoView-Slider__clean"}${H?"":" PhotoView-Slider__willClose"}${k?` ${k}`:""}`,role:"dialog",onClick:e=>{e.stopPropagation(),(e=>{const t=e.target;if(null!=t&&t.closest(".PhotoView-Slider__BannerRight")||null!=t&&t.closest(".PhotoView-Slider__ArrowLeft")||null!=t&&t.closest(".PhotoView-Slider__ArrowRight"))return;const n=e.currentTarget.getBoundingClientRect();e.clientX-n.left<=n.width/2?(ve||0!==ue)&&_e(ue-1,!0):(ve||ue+1<me)&&_e(ue+1,!0)})(e)},onMouseMove:e=>{const t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,o=t.width/2;document.body.classList.remove("modal__nav-arrow--left","modal__nav-arrow--right"),n<=o?document.body.classList.add("modal__nav-arrow--left"):document.body.classList.add("modal__nav-arrow--right")},onMouseLeave:e=>{document.body.classList.remove("modal__nav-arrow--left","modal__nav-arrow--right")},container:D},H&&e.createElement(M,null),e.createElement("div",{className:`PhotoView-Slider__Backdrop${W?` ${W}`:""}${1===pe?" PhotoView-Slider__fadeIn":2===pe?" PhotoView-Slider__fadeOut":""}`,style:{background:Ne?`rgba(0, 0, 0, ${Ne})`:void 0,transitionTimingFunction:$e,transitionDuration:`${J?0:Ye}ms`,animationDuration:`${Ye}ms`},onAnimationEnd:we}),f&&e.createElement("div",{className:"PhotoView-Slider__BannerWrap"},e.createElement("div",{className:"PhotoView-Slider__Counter"},ue+1," / ",me),e.createElement("div",{className:"PhotoView-Slider__BannerRight"},x&&Xe&&x(Xe),e.createElement(X,{className:"close",onClick:be}))),Pe.map((t,n)=>{const o=ve||0!==ue?he.current-1+n:ue+n;return e.createElement(K,{key:ve?`${t.key}/${t.src}/${o}`:t.key,item:t,speed:Ye,easing:$e,visible:H,onReachMove:xe,onReachUp:Ee,onPhotoTap:()=>ye(u),onMaskTap:()=>ye(d),wrapClassName:S,className:V,style:{left:(innerWidth+b)*o+"px",transform:`translate3d(${G}px, 0px, 0)`,transition:J||Q?void 0:`transform ${Me}ms ${We}`},loadingElement:T,brokenElement:R,onPhotoResize:Ce,isActive:he.current===o,expose:z})}),!y&&f&&e.createElement(e.Fragment,null,(ve||0!==ue)&&e.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:()=>_e(ue-1,!0)},e.createElement(Y,null)),(ve||ue+1<me)&&e.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:()=>_e(ue+1,!0)},e.createElement($,null))),p&&Xe&&e.createElement("div",{className:"PhotoView-Slider__Overlay"},p(Xe)))}const J=["children","onIndexChange","onVisibleChange"],Q={images:[],visible:!1,index:0};function Z(n){let{children:o,onIndexChange:r,onVisibleChange:i}=n,c=f(n,J);const[l,s]=g(Q),u=t(0),{images:d,visible:h,index:w}=l,b=v({nextId:()=>u.current+=1,update(e){const t=d.findIndex(t=>t.key===e.key);if(t>-1){const n=d.slice();return n.splice(t,1,e),void s({images:n})}s(t=>({images:t.images.concat(e)}))},remove(e){s(t=>{const n=t.images.filter(t=>t.key!==e);return{images:n,index:Math.min(n.length-1,w)}})},show(e){const t=d.findIndex(t=>t.key===e);s({visible:!0,index:t}),i&&i(!0,t,l)}}),_=v({close(){s({visible:!1}),i&&i(!1,w,l)},changeIndex(e){s({index:e}),r&&r(e,l)}}),y=a(()=>m({},l,b),[l,b]);return e.createElement(p.Provider,{value:y},o,e.createElement(G,m({images:d,visible:h,index:w,onIndexChange:_.changeIndex,onClose:_.close},c)))}const ee=({src:e,render:n,overlay:o,width:i,height:c,triggers:l=["onClick"],children:h,title:f,description:g})=>{const w=s(p),b=function(){const{current:e}=t({sign:!1,fn:void 0});return e.sign||(e.sign=!0,e.fn=w.nextId()),e.fn}(),_=t(null);r(()=>()=>{w.remove(b)},[]);const y=v({render:e=>n&&n(e),show(e,t){w.show(b),function(e,t){if(h){const n=h.props[e];n&&n(t)}}(e,t)}}),C=a(()=>{const e={};return l.forEach(t=>{e[t]=y.show.bind(null,t)}),e},[]);return r(()=>{w.update({key:b,src:e,originRef:_,render:y.render,overlay:o,width:i,height:c,title:f,description:g})},[e]),h?u.only(d(h,m({},C,{ref:_}))):null};export{Z as PhotoProvider,G as PhotoSlider,ee as PhotoView};
//# sourceMappingURL=react-photo-view.modern.js.map
