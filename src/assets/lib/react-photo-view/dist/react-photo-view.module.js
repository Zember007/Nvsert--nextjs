import e,{useRef as n,useReducer as t,createContext as r,useEffect as i,useLayoutEffect as o,useMemo as a,useCallback as c,useState as l,useContext as u,Children as s,cloneElement as d}from"react";import{createPortal as v}from"react-dom";function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f.apply(null,arguments)}function h(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}function m(e){var t=n({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var r=Object.create(null);Object.keys(e).forEach(function(e){r[e]=function(){var n;return(n=t.fn[e]).call.apply(n,[t.fn].concat([].slice.call(arguments)))}}),t.curr=r}return t.curr}function g(e){return t(function(e,n){return f({},e,"function"==typeof n?n(e):n)},e)}var p=r(void 0),w="cubic-bezier(0.25, 0.8, 0.25, 1)",y="undefined"!=typeof window&&"ontouchstart"in window,b=function(e,n,t){return Math.max(Math.min(e,t),n)},E=function(e,n,t){return void 0===n&&(n=0),void 0===t&&(t=0),b(e,1*(1-t),Math.max(6,n)*(1+t))},x="undefined"==typeof window||/ServerSideRendering/.test(navigator&&navigator.userAgent)?i:o;function C(e,t,r){var o=n(t);o.current=t,i(function(){function n(e){o.current(e)}return e&&window.addEventListener(e,n,r),function(){e&&window.removeEventListener(e,n)}},[e])}var k=["container"];function _(n){var t=n.container,r=void 0===t?document.body:t,i=h(n,k);return v(e.createElement("div",f({},i)),r)}function P(n){return e.createElement("button",f({},n),e.createElement("div",{className:"in"},e.createElement("div",{className:"close-button-block"}),e.createElement("div",{className:"close-button-block"})),e.createElement("div",{className:"out"},e.createElement("div",{className:"close-button-block"}),e.createElement("div",{className:"close-button-block"})))}function N(n){return e.createElement("svg",f({width:"44",height:"44",viewBox:"0 0 768 768"},n),e.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function M(n){return e.createElement("svg",f({width:"44",height:"44",viewBox:"0 0 768 768"},n),e.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function S(){return i(function(){var e=document.body.style,n=e.overflow;return e.overflow="hidden",function(){e.overflow=n}},[]),null}function Y(e){var n=e.touches[0],t=n.clientX,r=n.clientY;if(e.touches.length>=2){var i=e.touches[1],o=i.clientX,a=i.clientY;return[(t+o)/2,(r+a)/2,Math.sqrt(Math.pow(o-t,2)+Math.pow(a-r,2))]}return[t,r,0]}var X=function(e,n,t,r){var i,o=t*n,a=(o-r)/2,c=e;return o<=r?(i=1,c=0):e>0&&a-e<=0?(i=2,c=a):e<0&&a+e<=0&&(i=3,c=-a),[i,c]};function W(e,n,t,r,i,o,a,c,l,u){void 0===a&&(a=innerWidth/2),void 0===c&&(c=innerHeight/2),void 0===l&&(l=0),void 0===u&&(u=0);var s=X(e,o,t,innerWidth)[0],d=X(n,o,r,innerHeight),v=innerWidth/2,f=innerHeight/2;return{x:a-o/i*(a-(v+e))-v+(r/t>=3&&t*o===innerWidth?0:s?l/2:l),y:c-o/i*(c-(f+n))-f+(d[0]?u/2:u),lastCX:a,lastCY:c}}function T(e,n,t){var r=e%180!=0;return r?[t,n,r]:[n,t,r]}function V(e,n,t){var r=T(t,innerWidth,innerHeight),i=r[0],o=r[1],a=0;return e<i&&n<o||e<i&&n>=o||e>=i&&n<o||e/n>i/o||n/e>=3&&!r[2]&&(a=(n/e*i-o)/2),{width:448,height:n/e*448,x:0,y:a,pause:!0}}function A(e,t){var r=t.leading,i=void 0!==r&&r,o=t.maxWait,a=t.wait,l=void 0===a?o||0:a,u=n(e);u.current=e;var s=n(0),d=n(null),v=function(){return d.current&&clearTimeout(d.current)},f=c(function(){var e=[].slice.call(arguments),n=Date.now();function t(){s.current=n,v(),u.current.apply(null,e)}var r=s.current,a=n-r;if(0===r&&(i&&t(),s.current=n),void 0!==o){if(a>o)return void t()}else a<l&&(s.current=n);v(),d.current=setTimeout(function(){t(),s.current=0},l)},[l,o,i]);return f.cancel=v,f}var R=function(e,n,t){return I(e,n,t,100,function(e){return e},function(){return I(n,e,t)})},L=function(e){return 1-Math.pow(1-e,4)};function I(e,n,t,r,i,o){void 0===r&&(r=400),void 0===i&&(i=L);var a=n-e;if(0!==a){var c=Date.now(),l=0,u=function(){var n=Math.min(1,(Date.now()-c)/r);t(e+i(n)*a)&&n<1?s():(cancelAnimationFrame(l),n>=1&&o&&o())};s()}function s(){l=requestAnimationFrame(u)}}var H={T:0,L:0,W:0,H:0,FIT:void 0},F=function(){var e=n(!1);return i(function(){return e.current=!0,function(){e.current=!1}},[]),e},D=["className"];function O(n){var t=n.className,r=void 0===t?"":t,i=h(n,D);return e.createElement("div",f({className:"PhotoView__Spinner "+r},i),e.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},e.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),e.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var B=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function q(n){var t=n.src,r=n.loaded,i=n.broken,o=n.className,a=n.onPhotoLoad,c=n.loadingElement,l=n.brokenElement,u=h(n,B),s=F();return t&&!i?e.createElement(e.Fragment,null,e.createElement("div",{className:"PhotoView__Photo__attr "+(!r&&"loaded")},e.createElement("img",f({className:"PhotoView__Photo"+(o?" "+o:""),src:t,onLoad:function(e){var n=e.target;s.current&&a({loaded:!0,naturalWidth:n.naturalWidth,naturalHeight:n.naturalHeight})},onError:function(){s.current&&a({broken:!0})},draggable:!1,alt:"document"},u))),!r&&(c?e.createElement("span",{className:"PhotoView__icon"},c):e.createElement(O,{className:"PhotoView__icon"}))):l?e.createElement("span",{className:"PhotoView__icon"},"function"==typeof l?l({src:t}):l):null}var j={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function z(t){var r=t.item,o=r.src,a=r.render,c=r.width,u=void 0===c?0:c,s=r.height,d=void 0===s?0:s,v=r.originRef,h=t.visible,p=t.speed,w=t.easing,b=t.wrapClassName,k=t.className,_=t.style,P=t.loadingElement,N=t.brokenElement,M=t.onPhotoTap,S=t.onMaskTap,L=t.onReachMove,D=t.onReachUp,O=t.onPhotoResize,B=t.isActive,z=t.expose,K=g(j),G=K[0],U=K[1],J=n(0),Q=F(),Z=G.naturalWidth,$=void 0===Z?u:Z,ee=G.naturalHeight,ne=void 0===ee?d:ee,te=G.width,re=void 0===te?u:te,ie=G.height,oe=void 0===ie?d:ie,ae=G.loaded,ce=void 0===ae?!o:ae,le=G.broken,ue=G.x,se=G.y,de=G.touched,ve=G.stopRaf,fe=G.maskTouched,he=G.rotate,me=G.scale,ge=G.CX,pe=G.CY,we=G.lastX,ye=G.lastY,be=G.lastCX,Ee=G.lastCY,xe=G.lastScale,Ce=G.touchTime,ke=G.touchLength,_e=G.pause,Pe=G.reach,Ne=m({onScale:function(e){return Me(E(e))},onRotate:function(e){he!==e&&(z({rotate:e}),U(f({rotate:e},V($,ne,e))))}});function Me(e,n,t){me!==e&&(z({scale:e}),U(f({scale:e},W(ue,se,re,oe,me,e,n,t),e<=1&&{x:0,y:0})))}var Se=A(function(e,n,t){if(void 0===t&&(t=0),(de||fe)&&B){var r=T(he,re,oe),i=r[0],o=r[1];if(0===t&&0===J.current){var a=Math.abs(e-ge)<=20,c=Math.abs(n-pe)<=20;if(a&&c)return void U({lastCX:e,lastCY:n});J.current=a?n>pe?3:2:1}var l,u=e-be,s=n-Ee;if(0===t){var d=X(u+we,me,i,innerWidth)[0],v=X(s+ye,me,o,innerHeight);l=function(e,n,t,r){return n&&1===e||"x"===r?"x":t&&e>1||"y"===r?"y":void 0}(J.current,d,v[0],Pe),void 0!==l&&L(l,e,n,me)}if("x"===l||fe)return void U({reach:"x"});var h=E(me+(t-ke)/100/2*me,$/re,.2);z({scale:h}),U(f({touchLength:t,reach:l,scale:h},W(ue,se,re,oe,me,h,e,n,u,s)))}},{maxWait:8});function Ye(e){return!ve&&!de&&(Q.current&&U(f({},e,{pause:h})),Q.current)}var Xe,We,Te,Ve,Ae,Re,Le,Ie,He=(Ae=function(e){return Ye({x:e})},Re=function(e){return Ye({y:e})},Le=function(e){return Q.current&&(z({scale:e}),U({scale:e})),!de&&Q.current},Ie=m({X:function(e){return Ae(e)},Y:function(e){return Re(e)},S:function(e){return Le(e)}}),function(e,n,t,r,i,o,a,c,l,u,s){var d=T(u,i,o),v=d[0],f=d[1],h=X(e,c,v,innerWidth),m=h[0],g=h[1],p=X(n,c,f,innerHeight),w=p[0],y=p[1],b=Date.now()-s;if(b>=200||c!==a||Math.abs(l-a)>1){var E=W(e,n,i,o,a,c),x=E.x,C=E.y,k=m?g:x!==e?x:null,_=w?y:C!==n?C:null;return null!==k&&I(e,k,Ie.X),null!==_&&I(n,_,Ie.Y),void(c!==a&&I(a,c,Ie.S))}var P=(e-t)/b,N=(n-r)/b,M=Math.sqrt(Math.pow(P,2)+Math.pow(N,2)),S=!1,Y=!1;!function(e,n){var t,r=e,i=0,o=0,a=function(o){t||(t=o);var a=o-t,u=Math.sign(e),s=-.001*u,d=Math.sign(-r)*Math.pow(r,2)*2e-4,v=r*a+(s+d)*Math.pow(a,2)/2;i+=v,t=o,u*(r+=(s+d)*a)<=0?l():n(i)?c():l()};function c(){o=requestAnimationFrame(a)}function l(){cancelAnimationFrame(o)}c()}(M,function(t){var r=e+t*(P/M),i=n+t*(N/M),o=X(r,a,v,innerWidth),c=o[0],l=o[1],u=X(i,a,f,innerHeight),s=u[0],d=u[1];if(c&&!S&&(S=!0,m?I(r,l,Ie.X):R(l,r+(r-l),Ie.X)),s&&!Y&&(Y=!0,w?I(i,d,Ie.Y):R(d,i+(i-d),Ie.Y)),S&&Y)return!1;var h=S||Ie.X(l),g=Y||Ie.Y(d);return h&&g})}),Fe=(Xe=M,We=function(e,n){Pe||Me(1!==me?1:Math.max(2,$/re),e,n)},Te=n(0),Ve=A(function(){Te.current=0,Xe.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var e=[].slice.call(arguments);Te.current+=1,Ve.apply(void 0,e),Te.current>=2&&(Ve.cancel(),Te.current=0,We.apply(void 0,e))});function De(e,n){if(J.current=0,(de||fe)&&B){U({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var t=E(me,$/re);if(He(ue,se,we,ye,re,oe,me,t,xe,he,Ce),D(e,n),ge===e&&pe===n){if(de)return void Fe(e,n);fe&&S(e,n)}}}function Oe(e,n,t){void 0===t&&(t=0),U({touched:!0,CX:e,CY:n,lastCX:e,lastCY:n,lastX:ue,lastY:se,lastScale:me,touchLength:t,touchTime:Date.now()})}function Be(e){U({maskTouched:!0,CX:e.clientX,CY:e.clientY,lastX:ue,lastY:se})}C(y?void 0:"mousemove",function(e){e.preventDefault(),Se(e.clientX,e.clientY)}),C(y?void 0:"mouseup",function(e){De(e.clientX,e.clientY)}),C(y?"touchmove":void 0,function(e){e.preventDefault();var n=Y(e);Se.apply(void 0,n)},{passive:!1}),C(y?"touchend":void 0,function(e){var n=e.changedTouches[0];De(n.clientX,n.clientY)},{passive:!1}),C("resize",A(function(){ce&&!de&&(U(V($,ne,he)),O())},{maxWait:8})),x(function(){B&&z(f({scale:me,rotate:he},Ne))},[B]);var qe=function(e,t,r,o,a,c,u,s,d,v){var f=function(e,t,r,i,o){var a=n(!1),c=g({lead:!0,scale:r}),l=c[0],u=l.lead,s=l.scale,d=c[1],v=A(function(e){try{return o(!0),d({lead:!1,scale:e}),Promise.resolve()}catch(e){return Promise.reject(e)}},{wait:i});return x(function(){a.current?(o(!1),d({lead:!0}),v(r)):a.current=!0},[r]),u?[e*s,t*s,r/s]:[e*r,t*r,1]}(c,u,s,d,v),h=f[0],p=f[1],w=f[2],y=function(e,t,r,o,a){var c=l(H),u=c[0],s=c[1],d=l(0),v=d[0],f=d[1],h=n(null),g=m({OK:function(){return e&&f(4)}});function p(e){a(!1),f(e)}return i(function(){if(h.current||(h.current=Date.now()),r){if(function(e,n){var t=e&&e.current;if(t&&1===t.nodeType){var r=t.getBoundingClientRect();n({T:r.top,L:r.left,W:r.width,H:r.height,FIT:"IMG"===t.tagName?getComputedStyle(t).objectFit:void 0})}}(t,s),e)return Date.now()-h.current<250?(f(1),requestAnimationFrame(function(){f(2),requestAnimationFrame(function(){return p(3)})}),void setTimeout(g.OK,o)):void f(4);p(5)}},[e,r]),[v,u]}(e,t,r,d,v),b=y[0],E=y[1],C=E.W,k=E.FIT,_=innerWidth/2,P=innerHeight/2,N=b<3||b>4;return[N?C?E.L:_:o+(_-c*s/2),N?C?E.T:P:a+(P-u*s/2),h,N&&k?h*(E.H/C):p,0===b?w:N?C/(c*s)||.01:w,N?k?1:0:1,b,k]}(h,v,ce,ue,se,re,oe,me,p,function(e){return U({pause:e})}),je=qe[4],ze=qe[6],Ke="transform "+p+"ms "+w,Ge={className:k,onMouseDown:y?void 0:function(e){e.stopPropagation(),0===e.button&&Oe(e.clientX,e.clientY,0)},onTouchStart:y?function(e){e.stopPropagation(),Oe.apply(void 0,Y(e))}:void 0,onWheel:function(e){if(!Pe){var n=E(me-e.deltaY/100/2,$/re);U({stopRaf:!0}),Me(n,e.clientX,e.clientY)}},style:{width:qe[2]+"px",height:qe[3]+"px",opacity:qe[5],objectFit:4===ze?void 0:qe[7],transform:he?"rotate("+he+"deg)":void 0,transition:ze>2?Ke+", opacity "+p+"ms ease, height "+(ze<4?p/2:ze>4?p:0)+"ms "+w:void 0}};return e.createElement("div",{className:"PhotoView__PhotoWrap"+(b?" "+b:""),style:_,onMouseDown:!y&&B?Be:void 0,onTouchStart:y&&B?function(e){return Be(e.touches[0])}:void 0},e.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+je+", 0, 0, "+je+", "+qe[0]+", "+qe[1]+")",transition:de||_e?void 0:Ke,willChange:B?"transform":void 0}},o?e.createElement(q,f({src:o,loaded:ce,broken:le},Ge,{onPhotoLoad:function(e){U(f({},e,e.loaded&&V(e.naturalWidth||0,e.naturalHeight||0,he)))},loadingElement:P,brokenElement:N})):a&&a({attrs:Ge,scale:je,rotate:he})))}var K={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function G(r){var o=r.loop,c=void 0===o?3:o,u=r.speed,s=r.easing,d=r.photoClosable,v=r.maskClosable,f=void 0===v||v,h=r.maskOpacity,p=void 0===h?1:h,E=r.bannerVisible,k=void 0===E||E,Y=r.overlayRender,X=r.toolbarRender,W=r.className,T=r.maskClassName,V=r.photoClassName,A=r.photoWrapClassName,R=r.loadingElement,L=r.brokenElement,I=r.images,H=r.index,F=void 0===H?0:H,D=r.onIndexChange,O=r.visible,B=r.onClose,q=r.afterClose,j=r.portalContainer,G=g(K),U=G[0],J=G[1],Q=l(0),Z=Q[0],$=Q[1];l(null);var ee=U.x,ne=U.touched,te=U.pause,re=U.bg,ie=void 0===re?p:re,oe=U.lastBg,ae=U.overlay,ce=U.scale,le=U.rotate,ue=U.onScale,se=U.onRotate,de=r.hasOwnProperty("index"),ve=de?F:Z,fe=de?D:$,he=n(ve),me=I.length,ge=I[ve],pe="boolean"==typeof c?c:me>c,we=function(e,r){var i=t(function(e){return!e},!1)[1],o=n(0),c=function(t){var r=n(t);function i(e){r.current=e}return a(function(){!function(n){e?(n(e),o.current=1):o.current=2}(i)},[t]),[r.current,i]}(e),l=c[1];return[c[0],o.current,function(){i(),2===o.current&&(l(!1),r&&r()),o.current=0}]}(O,q),ye=we[0],be=we[1],Ee=we[2];x(function(){if(ye)return J({pause:!0,x:ve*-(innerWidth+20)}),void(he.current=ve);J(K)},[ye]);var xe=m({close:function(e){se&&se(0),J({overlay:!0,lastBg:ie}),B(e)},changeIndex:function(e,n){void 0===n&&(n=!1);var t=pe?he.current+(e-ve):e,r=me-1,i=b(t,0,r),o=pe?t:i,a=innerWidth+20;J({touched:!1,x:-a*he.current,lastCX:void 0,lastCY:void 0,bg:p,overlay:ae}),J({touched:!1,lastCX:void 0,lastCY:void 0,x:-a*o,pause:n}),he.current=o,fe&&fe(pe?e<0?r:e>r?0:e:i)}}),Ce=xe.close,ke=xe.changeIndex;function _e(e){return e?Ce():J({overlay:!ae})}function Pe(){J({x:-(innerWidth+20)*ve,lastCX:void 0,lastCY:void 0,pause:!0}),he.current=ve}C("keydown",function(e){if(O)switch(e.key){case"ArrowLeft":ke(ve-1,!0);break;case"ArrowRight":ke(ve+1,!0);break;case"Escape":Ce()}});var Ne=function(e,n,t){return a(function(){var r=e.length;return t?e.concat(e).concat(e).slice(r+n-1,r+n+2):e.slice(Math.max(n-1,0),Math.min(n+2,r+1))},[e,n,t])}(I,ve,pe);if(i(function(){setTimeout(function(){var e;null==(e=document.querySelector(".Slider_scale"))||e.classList.remove("slider-transitions")},100)},[ve]),!ye)return null;var Me=ae&&!be,Se=O?ie:oe,Ye=ue&&se&&{images:I,index:ve,visible:O,onClose:Ce,onIndexChange:ke,overlayVisible:Me,overlay:ge&&ge.overlay,scale:ce,rotate:le,onScale:ue,onRotate:se},Xe=u?u(be):400,We=s?s(be):w,Te=u?u(3):600,Ve=s?s(3):w;return e.createElement(_,{className:"PhotoView-Portal"+(Me?"":" PhotoView-Slider__clean")+(O?"":" PhotoView-Slider__willClose")+(W?" "+W:""),role:"dialog",onClick:function(e){return e.stopPropagation()},container:j},O&&e.createElement(S,null),e.createElement("div",{className:"PhotoView-Slider__Backdrop"+(T?" "+T:"")+(1===be?" PhotoView-Slider__fadeIn":2===be?" PhotoView-Slider__fadeOut":""),style:{background:Se?"rgba(0, 0, 0, "+Se+")":void 0,transitionTimingFunction:We,transitionDuration:(ne?0:Xe)+"ms",animationDuration:Xe+"ms"},onAnimationEnd:Ee}),k&&e.createElement("div",{className:"PhotoView-Slider__BannerWrap"},e.createElement("div",{className:"PhotoView-Slider__Counter"},ve+1," / ",me),e.createElement("div",{className:"PhotoView-Slider__BannerRight"},X&&Ye&&X(Ye),e.createElement(P,{className:"close",onClick:Ce}))),e.createElement("div",{className:"Slider_scale"},Ne.map(function(n,t){var r=pe||0!==ve?he.current-1+t:ve+t;return e.createElement(z,{key:pe?n.key+"/"+n.src+"/"+r:n.key,item:n,speed:Xe,easing:We,visible:O,onPhotoTap:function(){return _e(d)},onMaskTap:function(){return _e(f)},wrapClassName:A,className:V,style:{left:(innerWidth+20)*r+"px",transform:"translate3d("+ee+"px, 0px, 0)",transition:ne||te?void 0:"transform "+Te+"ms "+Ve},loadingElement:R,brokenElement:L,onPhotoResize:Pe,isActive:he.current===r,expose:J})})),!y&&k&&e.createElement(e.Fragment,null,(pe||0!==ve)&&e.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){var e;null==(e=document.querySelector(".Slider_scale"))||e.classList.add("slider-transitions"),ke(ve-1)}},e.createElement(N,null)),(pe||ve+1<me)&&e.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){var e;null==(e=document.querySelector(".Slider_scale"))||e.classList.add("slider-transitions"),ke(ve+1)}},e.createElement(M,null))),Y&&Ye&&e.createElement("div",{className:"PhotoView-Slider__Overlay"},Y(Ye)))}var U=["children","onIndexChange","onVisibleChange"],J={images:[],visible:!1,index:0};function Q(t){var r=t.children,i=t.onIndexChange,o=t.onVisibleChange,c=h(t,U),l=g(J),u=l[0],s=l[1],d=n(0),v=u.images,w=u.visible,y=u.index,b=m({nextId:function(){return d.current+=1},update:function(e){var n=v.findIndex(function(n){return n.key===e.key});if(n>-1){var t=v.slice();return t.splice(n,1,e),void s({images:t})}s(function(n){return{images:n.images.concat(e)}})},remove:function(e){s(function(n){var t=n.images.filter(function(n){return n.key!==e});return{images:t,index:Math.min(t.length-1,y)}})},show:function(e){var n=v.findIndex(function(n){return n.key===e});s({visible:!0,index:n}),o&&o(!0,n,u)}}),E=m({close:function(){s({visible:!1}),o&&o(!1,y,u)},changeIndex:function(e){s({index:e}),i&&i(e,u)}}),x=a(function(){return f({},u,b)},[u,b]);return e.createElement(p.Provider,{value:x},r,e.createElement(G,f({images:v,visible:w,index:y,onIndexChange:E.changeIndex,onClose:E.close},c)))}var Z=function(e){var t,r,o=e.src,c=e.render,l=e.overlay,v=e.width,h=e.height,g=e.triggers,w=void 0===g?["onClick"]:g,y=e.children,b=u(p),E=(t=function(){return b.nextId()},(r=n({sign:!1,fn:void 0}).current).sign||(r.sign=!0,r.fn=t()),r.fn),x=n(null);i(function(){return function(){b.remove(E)}},[]);var C=m({render:function(e){return c&&c(e)},show:function(e,n){b.show(E),function(e,n){if(y){var t=y.props[e];t&&t(n)}}(e,n)}}),k=a(function(){var e={};return w.forEach(function(n){e[n]=C.show.bind(null,n)}),e},[]);return i(function(){b.update({key:E,src:o,originRef:x,render:C.render,overlay:l,width:v,height:h})},[o]),y?s.only(d(y,f({},k,{ref:x}))):null};export{Q as PhotoProvider,G as PhotoSlider,Z as PhotoView};
//# sourceMappingURL=react-photo-view.module.js.map
