import{jsx as n,jsxs as e,Fragment as t}from"react/jsx-runtime";import{useRef as i,useReducer as r,createContext as o,useEffect as a,useLayoutEffect as c,useMemo as u,useCallback as l,useState as s,useContext as d,useImperativeHandle as v,Children as h,cloneElement as f}from"react";import{createPortal as m}from"react-dom";function g(){return g=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},g.apply(null,arguments)}function p(n,e){if(null==n)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(-1!==e.indexOf(i))continue;t[i]=n[i]}return t}function w(n){var e=i({fn:n,curr:void 0}).current;if(e.fn=n,!e.curr){var t=Object.create(null);Object.keys(n).forEach(function(n){t[n]=function(){var t;return(t=e.fn[n]).call.apply(t,[e.fn].concat([].slice.call(arguments)))}}),e.curr=t}return e.curr}function b(n){return r(function(n,e){return g({},n,"function"==typeof e?e(n):e)},n)}var x=o(void 0),y="cubic-bezier(0.25, 0.8, 0.25, 1)",C=20,k="undefined"!=typeof window&&"ontouchstart"in window,P=function(n,e,t){return Math.max(Math.min(n,t),e)},M=function(n,e,t){return void 0===e&&(e=0),void 0===t&&(t=0),P(n,1*(1-t),Math.max(6,e)*(1+t))},N="undefined"==typeof window||/ServerSideRendering/.test(navigator&&navigator.userAgent)?a:c;function _(n,e,t){var r=i(e);r.current=e,a(function(){function e(n){r.current(n)}return n&&window.addEventListener(n,e,t),function(){n&&window.removeEventListener(n,e)}},[n])}var Y=["container"];function X(e){var t=e.container,i=void 0===t?document.body:t,r=p(e,Y);return m(n("div",g({},r)),i)}function W(t){return e("button",g({},t,{children:[e("div",{className:"in",children:[n("div",{className:"close-button-block"}),n("div",{className:"close-button-block"})]}),e("div",{className:"out",children:[n("div",{className:"close-button-block"}),n("div",{className:"close-button-block"})]})]}))}function S(e){return n("svg",g({width:"44",height:"44",viewBox:"0 0 768 768"},e,{children:n("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"})}))}function T(e){return n("svg",g({width:"44",height:"44",viewBox:"0 0 768 768"},e,{children:n("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"})}))}function R(){return a(function(){var n=document.body.style,e=n.overflow;return n.overflow="hidden",function(){n.overflow=e}},[]),null}function V(n){var e=n.touches[0],t=e.clientX,i=e.clientY;if(n.touches.length>=2){var r=n.touches[1],o=r.clientX,a=r.clientY;return[(t+o)/2,(i+a)/2,Math.sqrt(Math.pow(o-t,2)+Math.pow(a-i,2))]}return[t,i,0]}var A=function(n,e,t,i){var r,o=t*e,a=(o-i)/2,c=n;return o<=i?(r=1,c=0):n>0&&a-n<=0?(r=2,c=a):n<0&&a+n<=0&&(r=3,c=-a),[r,c]};function E(n,e,t,i,r,o,a,c,u,l){void 0===a&&(a=innerWidth/2),void 0===c&&(c=innerHeight/2),void 0===u&&(u=0),void 0===l&&(l=0);var s=A(n,o,t,innerWidth)[0],d=A(e,o,i,innerHeight),v=innerWidth/2,h=innerHeight/2;return{x:a-o/r*(a-(v+n))-v+(i/t>=3&&t*o===innerWidth?0:s?u/2:u),y:c-o/r*(c-(h+e))-h+(d[0]?l/2:l),lastCX:a,lastCY:c}}function I(n,e,t){var i=n%180!=0;return i?[t,e,i]:[e,t,i]}function H(n,e,t){var i=I(t,innerWidth,innerHeight),r=i[0],o=i[1],a=0,c=r,u=o,l=n/e*o,s=e/n*r;return n<r&&e<o?(c=n,u=e):n<r&&e>=o?c=l:n>=r&&e<o||n/e>r/o?u=s:e/n>=3&&!i[2]?a=((u=s)-o)/2:c=l,c>475&&(c=475,u=e/n*475),{width:c,height:u,x:0,y:a,pause:!0}}function L(n,e){var t=e.leading,r=void 0!==t&&t,o=e.maxWait,a=e.wait,c=void 0===a?o||0:a,u=i(n);u.current=n;var s=i(0),d=i(null),v=function(){return d.current&&clearTimeout(d.current)},h=l(function(){var n=[].slice.call(arguments),e=Date.now();function t(){s.current=e,v(),u.current.apply(null,n)}var i=s.current,a=e-i;if(0===i&&(r&&t(),s.current=e),void 0!==o){if(a>o)return void t()}else a<c&&(s.current=e);v(),d.current=setTimeout(function(){t(),s.current=0},c)},[c,o,r]);return h.cancel=v,h}var D=function(n,e,t){return F(n,e,t,100,function(n){return n},function(){return F(e,n,t)})},O=function(n){return 1-Math.pow(1-n,4)};function F(n,e,t,i,r,o){void 0===i&&(i=400),void 0===r&&(r=O);var a=e-n;if(0!==a){var c=Date.now(),u=0,l=function(){var e=Math.min(1,(Date.now()-c)/i);t(n+r(e)*a)&&e<1?s():(cancelAnimationFrame(u),e>=1&&o&&o())};s()}function s(){u=requestAnimationFrame(l)}}var B={T:0,L:0,W:0,H:0,FIT:void 0},j=function(){var n=i(!1);return a(function(){return n.current=!0,function(){n.current=!1}},[]),n},z=["className"];function q(t){var i=t.className,r=void 0===i?"":i,o=p(t,z);return n("div",g({className:"PhotoView__Spinner "+r},o,{children:e("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white",children:[n("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),n("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})]})}))}var U=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function K(i){var r=i.src,o=i.loaded,a=i.broken,c=i.className,u=i.onPhotoLoad,l=i.loadingElement,s=i.brokenElement,d=p(i,U),v=j();return r&&!a?e(t,{children:[n("img",g({className:"PhotoView__Photo"+(c?" "+c:""),src:r,onLoad:function(n){var e=n.target;v.current&&u({loaded:!0,naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight})},onError:function(){v.current&&u({broken:!0})},draggable:!1,alt:""},d)),!o&&(l?n("span",{className:"PhotoView__icon",children:l}):n(q,{className:"PhotoView__icon"}))]}):s?n("span",{className:"PhotoView__icon",children:"function"==typeof s?s({src:r}):s}):null}var G={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function J(e){var t=e.item,r=t.src,o=t.render,c=t.width,u=void 0===c?0:c,l=t.height,d=void 0===l?0:l,v=t.originRef,h=e.visible,f=e.speed,m=e.easing,p=e.wrapClassName,x=e.className,y=e.style,C=e.loadingElement,P=e.brokenElement,Y=e.onPhotoTap,X=e.onMaskTap,W=e.onReachMove,S=e.onReachUp,T=e.onPhotoResize,R=e.isActive,O=e.expose,z=b(G),q=z[0],U=z[1],J=i(0),Q=j(),Z=q.naturalWidth,$=void 0===Z?u:Z,nn=q.naturalHeight,en=void 0===nn?d:nn,tn=q.width,rn=void 0===tn?u:tn,on=q.height,an=void 0===on?d:on,cn=q.loaded,un=void 0===cn?!r:cn,ln=q.broken,sn=q.x,dn=q.y,vn=q.touched,hn=q.stopRaf,fn=q.maskTouched,mn=q.rotate,gn=q.scale,pn=q.CX,wn=q.CY,bn=q.lastX,xn=q.lastY,yn=q.lastCX,Cn=q.lastCY,kn=q.lastScale,Pn=q.touchTime,Mn=q.touchLength,Nn=q.pause,_n=q.reach,Yn=w({onScale:function(n){return Xn(M(n))},onRotate:function(n){mn!==n&&(O({rotate:n}),U(g({rotate:n},H($,en,n))))}});function Xn(n,e,t){gn!==n&&(O({scale:n}),U(g({scale:n},E(sn,dn,rn,an,gn,n,e,t),n<=1&&{x:0,y:0})))}var Wn=L(function(n,e,t){if(void 0===t&&(t=0),(vn||fn)&&R){var i=I(mn,rn,an),r=i[0],o=i[1];if(0===t&&0===J.current){var a=Math.abs(n-pn)<=20,c=Math.abs(e-wn)<=20;if(a&&c)return void U({lastCX:n,lastCY:e});J.current=a?e>wn?3:2:1}var u,l=n-yn,s=e-Cn;if(0===t){var d=A(l+bn,gn,r,innerWidth)[0],v=A(s+xn,gn,o,innerHeight);u=function(n,e,t,i){return e&&1===n||"x"===i?"x":t&&n>1||"y"===i?"y":void 0}(J.current,d,v[0],_n),void 0!==u&&W(u,n,e,gn)}if("x"===u||fn)return void U({reach:"x"});var h=M(gn+(t-Mn)/100/2*gn,$/rn,.2);O({scale:h}),U(g({touchLength:t,reach:u,scale:h},E(sn,dn,rn,an,gn,h,n,e,l,s)))}},{maxWait:8});function Sn(n){return!hn&&!vn&&(Q.current&&U(g({},n,{pause:h})),Q.current)}var Tn,Rn,Vn,An,En,In,Hn,Ln,Dn=(En=function(n){return Sn({x:n})},In=function(n){return Sn({y:n})},Hn=function(n){return Q.current&&(O({scale:n}),U({scale:n})),!vn&&Q.current},Ln=w({X:function(n){return En(n)},Y:function(n){return In(n)},S:function(n){return Hn(n)}}),function(n,e,t,i,r,o,a,c,u,l,s){var d=I(l,r,o),v=d[0],h=d[1],f=A(n,c,v,innerWidth),m=f[0],g=f[1],p=A(e,c,h,innerHeight),w=p[0],b=p[1],x=Date.now()-s;if(x>=200||c!==a||Math.abs(u-a)>1){var y=E(n,e,r,o,a,c),C=y.x,k=y.y,P=m?g:C!==n?C:null,M=w?b:k!==e?k:null;return null!==P&&F(n,P,Ln.X),null!==M&&F(e,M,Ln.Y),void(c!==a&&F(a,c,Ln.S))}var N=(n-t)/x,_=(e-i)/x,Y=Math.sqrt(Math.pow(N,2)+Math.pow(_,2)),X=!1,W=!1;!function(n,e){var t,i=n,r=0,o=0,a=function(o){t||(t=o);var a=o-t,l=Math.sign(n),s=-.001*l,d=Math.sign(-i)*Math.pow(i,2)*2e-4,v=i*a+(s+d)*Math.pow(a,2)/2;r+=v,t=o,l*(i+=(s+d)*a)<=0?u():e(r)?c():u()};function c(){o=requestAnimationFrame(a)}function u(){cancelAnimationFrame(o)}c()}(Y,function(t){var i=n+t*(N/Y),r=e+t*(_/Y),o=A(i,a,v,innerWidth),c=o[0],u=o[1],l=A(r,a,h,innerHeight),s=l[0],d=l[1];if(c&&!X&&(X=!0,m?F(i,u,Ln.X):D(u,i+(i-u),Ln.X)),s&&!W&&(W=!0,w?F(r,d,Ln.Y):D(d,r+(r-d),Ln.Y)),X&&W)return!1;var f=X||Ln.X(u),g=W||Ln.Y(d);return f&&g})}),On=(Tn=Y,Rn=function(n,e){_n||Xn(1!==gn?1:Math.max(2,$/rn),n,e)},Vn=i(0),An=L(function(){Vn.current=0,Tn.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var n=[].slice.call(arguments);Vn.current+=1,An.apply(void 0,n),Vn.current>=2&&(An.cancel(),Vn.current=0,Rn.apply(void 0,n))});function Fn(n,e){if(J.current=0,(vn||fn)&&R){U({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var t=M(gn,$/rn);if(Dn(sn,dn,bn,xn,rn,an,gn,t,kn,mn,Pn),S(n,e),pn===n&&wn===e){if(vn)return void On(n,e);fn&&X(n,e)}}}function Bn(n,e,t){void 0===t&&(t=0),U({touched:!0,CX:n,CY:e,lastCX:n,lastCY:e,lastX:sn,lastY:dn,lastScale:gn,touchLength:t,touchTime:Date.now()})}function jn(n){U({maskTouched:!0,CX:n.clientX,CY:n.clientY,lastX:sn,lastY:dn})}_(k?void 0:"mousemove",function(n){n.preventDefault(),Wn(n.clientX,n.clientY)}),_(k?void 0:"mouseup",function(n){Fn(n.clientX,n.clientY)}),_(k?"touchmove":void 0,function(n){n.preventDefault();var e=V(n);Wn.apply(void 0,e)},{passive:!1}),_(k?"touchend":void 0,function(n){var e=n.changedTouches[0];Fn(e.clientX,e.clientY)},{passive:!1}),_("resize",L(function(){un&&!vn&&(U(H($,en,mn)),T())},{maxWait:8})),N(function(){R&&O(g({scale:gn,rotate:mn},Yn))},[R]);var zn=function(n,e,t,r,o,c,u,l,d,v){var h=function(n,e,t,r,o){var a=i(!1),c=b({lead:!0,scale:t}),u=c[0],l=u.lead,s=u.scale,d=c[1],v=L(function(n){try{return o(!0),d({lead:!1,scale:n}),Promise.resolve()}catch(n){return Promise.reject(n)}},{wait:r});return N(function(){a.current?(o(!1),d({lead:!0}),v(t)):a.current=!0},[t]),l?[n*s,e*s,t/s]:[n*t,e*t,1]}(c,u,l,d,v),f=h[0],m=h[1],g=h[2],p=function(n,e,t,r,o){var c=s(B),u=c[0],l=c[1],d=s(0),v=d[0],h=d[1],f=i(null),m=w({OK:function(){return n&&h(4)}});function g(n){o(!1),h(n)}return a(function(){if(f.current||(f.current=Date.now()),t){if(function(n,e){var t=n&&n.current;if(t&&1===t.nodeType){var i=t.getBoundingClientRect();e({T:i.top,L:i.left,W:i.width,H:i.height,FIT:"IMG"===t.tagName?getComputedStyle(t).objectFit:void 0})}}(e,l),n)return Date.now()-f.current<250?(h(1),requestAnimationFrame(function(){h(2),requestAnimationFrame(function(){return g(3)})}),void setTimeout(m.OK,r)):void h(4);g(5)}},[n,t]),[v,u]}(n,e,t,d,v),x=p[0],y=p[1],C=y.W,k=y.FIT,P=innerWidth/2,M=innerHeight/2,_=x<3||x>4;return[_?C?y.L:P:r+(P-c*l/2),_?C?y.T:M:o+(M-u*l/2),f,_&&k?f*(y.H/C):m,0===x?g:_?C/(c*l)||.01:g,_?k?1:0:1,x,k]}(h,v,un,sn,dn,rn,an,gn,f,function(n){return U({pause:n})}),qn=zn[4],Un=zn[6],Kn="transform "+f+"ms "+m,Gn={className:x,onMouseDown:k?void 0:function(n){n.stopPropagation(),0===n.button&&Bn(n.clientX,n.clientY,0)},onTouchStart:k?function(n){n.stopPropagation(),Bn.apply(void 0,V(n))}:void 0,onWheel:function(n){if(!_n){var e=M(gn-n.deltaY/100/2,$/rn);U({stopRaf:!0}),Xn(e,n.clientX,n.clientY)}},style:{width:zn[2]+"px",height:zn[3]+"px",opacity:zn[5],objectFit:4===Un?void 0:zn[7],transform:mn?"rotate("+mn+"deg)":void 0,transition:Un>2?Kn+", opacity "+f+"ms ease, height "+(Un<4?f/2:Un>4?f:0)+"ms "+m:void 0}};return n("div",{className:"PhotoView__PhotoWrap"+(p?" "+p:""),style:y,onMouseDown:!k&&R?jn:void 0,onTouchStart:k&&R?function(n){return jn(n.touches[0])}:void 0,children:n("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+qn+", 0, 0, "+qn+", "+zn[0]+", "+zn[1]+")",transition:vn||Nn?void 0:Kn,willChange:R?"transform":void 0},children:r?n(K,g({src:r,loaded:un,broken:ln},Gn,{onPhotoLoad:function(n){U(g({},n,n.loaded&&H(n.naturalWidth||0,n.naturalHeight||0,mn)))},loadingElement:C,brokenElement:P})):o&&o({attrs:Gn,scale:qn,rotate:mn})})})}var Q={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function Z(o){var a=o.loop,c=void 0===a?3:a,l=o.speed,d=o.easing,v=o.photoClosable,h=o.maskClosable,f=void 0===h||h,m=o.maskOpacity,g=void 0===m?1:m,p=o.pullClosable,x=void 0===p||p,M=o.bannerVisible,Y=void 0===M||M,V=o.overlayRender,A=o.toolbarRender,E=o.className,I=o.maskClassName,H=o.photoClassName,L=o.photoWrapClassName,D=o.loadingElement,O=o.brokenElement,F=o.images,B=o.index,j=void 0===B?0:B,z=o.onIndexChange,q=o.visible,U=o.onClose,K=o.afterClose,G=o.portalContainer,Z=b(Q),$=Z[0],nn=Z[1],en=s(0),tn=en[0],rn=en[1],on=$.x,an=$.touched,cn=$.pause,un=$.lastCX,ln=$.lastCY,sn=$.bg,dn=void 0===sn?g:sn,vn=$.lastBg,hn=$.overlay,fn=$.minimal,mn=$.scale,gn=$.rotate,pn=$.onScale,wn=$.onRotate,bn=o.hasOwnProperty("index"),xn=bn?j:tn,yn=bn?z:rn,Cn=i(xn),kn=F.length,Pn=F[xn],Mn="boolean"==typeof c?c:kn>c,Nn=function(n,e){var t=r(function(n){return!n},!1)[1],o=i(0),a=function(e){var t=i(e);function r(n){t.current=n}return u(function(){!function(e){n?(e(n),o.current=1):o.current=2}(r)},[e]),[t.current,r]}(n),c=a[1];return[a[0],o.current,function(){t(),2===o.current&&(c(!1),e&&e()),o.current=0}]}(q,K),_n=Nn[0],Yn=Nn[1],Xn=Nn[2];N(function(){if(_n)return nn({pause:!0,x:xn*-(innerWidth+C)}),void(Cn.current=xn);nn(Q)},[_n]);var Wn=w({close:function(n){wn&&wn(0),nn({overlay:!0,lastBg:dn}),U(n)},changeIndex:function(n,e){void 0===e&&(e=!1);var t=Mn?Cn.current+(n-xn):n,i=kn-1,r=P(t,0,i),o=Mn?t:r,a=innerWidth+C;console.log("changeIndex"),nn({touched:!1,lastCX:void 0,lastCY:void 0,x:-a*o,pause:e,scale:1}),Cn.current=o,yn&&yn(Mn?n<0?i:n>i?0:n:r)}}),Sn=Wn.close,Tn=Wn.changeIndex;function Rn(n){return n?Sn():nn({overlay:!hn})}function Vn(){nn({x:-(innerWidth+C)*xn,lastCX:void 0,lastCY:void 0,pause:!0}),Cn.current=xn}function An(n,e,t,i){"x"===n?function(n){if(void 0!==un){var e=n-un,t=e;!Mn&&(0===xn&&e>0||xn===kn-1&&e<0)&&(t=e/2),nn({touched:!0,lastCX:un,x:-(innerWidth+C)*Cn.current+t,pause:!1})}else nn({touched:!0,lastCX:n,x:on,pause:!1})}(e):"y"===n&&function(n,e){if(void 0!==ln){var t=null===g?null:P(g,.01,g-Math.abs(n-ln)/100/4);nn({touched:!0,lastCY:ln,bg:1===e?t:g,minimal:1===e})}else nn({touched:!0,lastCY:n,bg:dn,minimal:!0})}(t,i)}function En(n,e){var t=n-(null!=un?un:n),i=e-(null!=ln?ln:e),r=!1;if(t<-40)Tn(xn+1);else if(t>40)Tn(xn-1);else{var o=-(innerWidth+C)*Cn.current;Math.abs(i)>100&&fn&&x&&(r=!0,Sn()),console.log("handleReachUp"),nn({touched:!1,x:o,lastCX:void 0,lastCY:void 0,bg:g,overlay:!!r||hn})}}_("keydown",function(n){if(q)switch(n.key){case"ArrowLeft":Tn(xn-1,!0);break;case"ArrowRight":Tn(xn+1,!0);break;case"Escape":Sn()}});var In=function(n,e,t){return u(function(){var i=n.length;return t?n.concat(n).concat(n).slice(i+e-1,i+e+2):n.slice(Math.max(e-1,0),Math.min(e+2,i+1))},[n,e,t])}(F,xn,Mn);if(!_n)return null;var Hn=hn&&!Yn,Ln=q?dn:vn,Dn=pn&&wn&&{images:F,index:xn,visible:q,onClose:Sn,onIndexChange:Tn,overlayVisible:Hn,overlay:Pn&&Pn.overlay,scale:mn,rotate:gn,onScale:pn,onRotate:wn},On=l?l(Yn):400,Fn=d?d(Yn):y,Bn=l?l(3):600,jn=d?d(3):y;return e(X,{className:"PhotoView-Portal"+(Hn?"":" PhotoView-Slider__clean")+(q?"":" PhotoView-Slider__willClose")+(E?" "+E:""),role:"dialog",onClick:function(n){return n.stopPropagation()},container:G,children:[q&&n(R,{}),n("div",{className:"PhotoView-Slider__Backdrop"+(I?" "+I:"")+(1===Yn?" PhotoView-Slider__fadeIn":2===Yn?" PhotoView-Slider__fadeOut":""),style:{background:Ln?"rgba(0, 0, 0, "+Ln+")":void 0,transitionTimingFunction:Fn,transitionDuration:(an?0:On)+"ms",animationDuration:On+"ms"},onAnimationEnd:Xn}),Y&&e("div",{className:"PhotoView-Slider__BannerWrap",children:[e("div",{className:"PhotoView-Slider__Counter",children:[xn+1," / ",kn]}),e("div",{className:"PhotoView-Slider__BannerRight",children:[A&&Dn&&A(Dn),n(W,{className:"close",onClick:Sn})]})]}),In.map(function(e,t){var i=Mn||0!==xn?Cn.current-1+t:xn+t;return n(J,{item:e,speed:On,easing:Fn,visible:q,onReachMove:An,onReachUp:En,onPhotoTap:function(){return Rn(v)},onMaskTap:function(){return Rn(f)},wrapClassName:L,className:H,style:{left:(innerWidth+C)*i+"px",transform:"translate3d("+on+"px, 0px, 0)",transition:an||cn?void 0:"transform "+Bn+"ms "+jn},loadingElement:D,brokenElement:O,onPhotoResize:Vn,isActive:Cn.current===i,expose:nn},Mn?e.key+"/"+e.src+"/"+i:e.key)}),!k&&Y&&e(t,{children:[(Mn||0!==xn)&&n("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return Tn(xn-1)},children:n(S,{})}),(Mn||xn+1<kn)&&n("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return Tn(xn+1)},children:n(T,{})})]}),V&&Dn&&n("div",{className:"PhotoView-Slider__Overlay",children:V(Dn)})]})}var $=["children","onIndexChange","onVisibleChange"],nn={images:[],visible:!1,index:0};function en(t){var r=t.children,o=t.onIndexChange,a=t.onVisibleChange,c=p(t,$),l=b(nn),s=l[0],d=l[1],v=i(0),h=s.images,f=s.visible,m=s.index,y=w({nextId:function(){return v.current+=1},update:function(n){var e=h.findIndex(function(e){return e.key===n.key});if(e>-1){var t=h.slice();return t.splice(e,1,n),void d({images:t})}d(function(e){return{images:e.images.concat(n)}})},remove:function(n){d(function(e){var t=e.images.filter(function(e){return e.key!==n});return{images:t,index:Math.min(t.length-1,m)}})},show:function(n){var e=h.findIndex(function(e){return e.key===n});d({visible:!0,index:e}),a&&a(!0,e,s)}}),C=w({close:function(){d({visible:!1}),a&&a(!1,m,s)},changeIndex:function(n){d({index:n}),o&&o(n,s)}}),k=u(function(){return g({},s,y)},[s,y]);return e(x.Provider,{value:k,children:[r,n(Z,g({images:h,visible:f,index:m,onIndexChange:C.changeIndex,onClose:C.close},c))]})}var tn=function(n){var e,t,r=n.src,o=n.render,c=n.overlay,l=n.width,s=n.height,m=n.triggers,p=void 0===m?["onClick"]:m,b=n.children,y=d(x),C=(e=function(){return y.nextId()},(t=i({sign:!1,fn:void 0}).current).sign||(t.sign=!0,t.fn=e()),t.fn),k=i(null);v(null==b?void 0:b.ref,function(){return k.current}),a(function(){return function(){y.remove(C)}},[]);var P=w({render:function(n){return o&&o(n)},show:function(n,e){y.show(C),function(n,e){if(b){var t=b.props[n];t&&t(e)}}(n,e)}}),M=u(function(){var n={};return p.forEach(function(e){n[e]=P.show.bind(null,e)}),n},[]);return a(function(){y.update({key:C,src:r,originRef:k,render:P.render,overlay:c,width:l,height:s})},[r]),b?h.only(f(b,g({},M,{ref:k}))):null};export{en as PhotoProvider,Z as PhotoSlider,tn as PhotoView};
//# sourceMappingURL=react-photo-view.module.js.map
