import{jsx as n,jsxs as e,Fragment as t}from"react/jsx-runtime";import{useRef as i,useReducer as r,createContext as o,useEffect as a,useLayoutEffect as c,useMemo as u,useCallback as l,useState as s,useContext as d,useImperativeHandle as h,Children as v,cloneElement as f}from"react";import{createPortal as m}from"react-dom";function g(){return g=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},g.apply(null,arguments)}function p(n,e){if(null==n)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(-1!==e.indexOf(i))continue;t[i]=n[i]}return t}function w(n){var e=i({fn:n,curr:void 0}).current;if(e.fn=n,!e.curr){var t=Object.create(null);Object.keys(n).forEach(function(n){t[n]=function(){var t;return(t=e.fn[n]).call.apply(t,[e.fn].concat([].slice.call(arguments)))}}),e.curr=t}return e.curr}function b(n){return r(function(n,e){return g({},n,"function"==typeof e?e(n):e)},n)}var y=o(void 0),x="cubic-bezier(0.25, 0.8, 0.25, 1)",C=20,P="undefined"!=typeof window&&"ontouchstart"in window,k=function(n,e,t){return Math.max(Math.min(n,t),e)},_=function(n,e,t){return void 0===e&&(e=0),void 0===t&&(t=0),k(n,1*(1-t),Math.max(6,e)*(1+t))},M="undefined"==typeof window||/ServerSideRendering/.test(navigator&&navigator.userAgent)?a:c;function N(n,e,t){var r=i(e);r.current=e,a(function(){function e(n){r.current(n)}return n&&window.addEventListener(n,e,t),function(){n&&window.removeEventListener(n,e)}},[n])}var Y=["container"];function X(e){var t=e.container,i=void 0===t?document.body:t,r=p(e,Y);return m(n("div",g({},r)),i)}function W(t){return e("button",g({},t,{children:[e("div",{className:"in",children:[n("div",{className:"close-button-block"}),n("div",{className:"close-button-block"})]}),e("div",{className:"out",children:[n("div",{className:"close-button-block"}),n("div",{className:"close-button-block"})]})]}))}function S(e){return n("svg",g({width:"44",height:"44",viewBox:"0 0 768 768"},e,{children:n("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"})}))}function V(e){return n("svg",g({width:"44",height:"44",viewBox:"0 0 768 768"},e,{children:n("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"})}))}function T(){return a(function(){var n=document.body.style,e=n.overflow;return n.overflow="hidden",function(){n.overflow=e}},[]),null}function A(n){var e=n.touches[0],t=e.clientX,i=e.clientY;if(n.touches.length>=2){var r=n.touches[1],o=r.clientX,a=r.clientY;return[(t+o)/2,(i+a)/2,Math.sqrt(Math.pow(o-t,2)+Math.pow(a-i,2))]}return[t,i,0]}var R=function(n,e,t,i){var r,o=t*e,a=(o-i)/2,c=n;return o<=i?(r=1,c=0):n>0&&a-n<=0?(r=2,c=a):n<0&&a+n<=0&&(r=3,c=-a),[r,c]};function E(n,e,t,i,r,o,a,c,u,l){void 0===a&&(a=innerWidth/2),void 0===c&&(c=innerHeight/2),void 0===u&&(u=0),void 0===l&&(l=0);var s=R(n,o,t,innerWidth)[0],d=R(e,o,i,innerHeight),h=innerWidth/2,v=innerHeight/2;return{x:a-o/r*(a-(h+n))-h+(i/t>=3&&t*o===innerWidth?0:s?u/2:u),y:c-o/r*(c-(v+e))-v+(d[0]?l/2:l),lastCX:a,lastCY:c}}function L(n,e,t){var i=n%180!=0;return i?[t,e,i]:[e,t,i]}function I(n,e,t){var i=L(t,innerWidth,innerHeight),r=i[0],o=i[1],a=0,c=r,u=o,l=n/e*o,s=e/n*r;return n<r&&e<o?(c=n,u=e):n<r&&e>=o?c=l:n>=r&&e<o||n/e>r/o?u=s:e/n>=3&&!i[2]?a=((u=s)-o)/2:c=l,c>475&&(c=475,u=e/n*475),{width:c,height:u,x:0,y:a,pause:!0}}function H(n,e){var t=e.leading,r=void 0!==t&&t,o=e.maxWait,a=e.wait,c=void 0===a?o||0:a,u=i(n);u.current=n;var s=i(0),d=i(null),h=function(){return d.current&&clearTimeout(d.current)},v=l(function(){var n=[].slice.call(arguments),e=Date.now();function t(){s.current=e,h(),u.current.apply(null,n)}var i=s.current,a=e-i;if(0===i&&(r&&t(),s.current=e),void 0!==o){if(a>o)return void t()}else a<c&&(s.current=e);h(),d.current=setTimeout(function(){t(),s.current=0},c)},[c,o,r]);return v.cancel=h,v}var D=function(n,e,t){return F(n,e,t,100,function(n){return n},function(){return F(e,n,t)})},O=function(n){return 1-Math.pow(1-n,4)};function F(n,e,t,i,r,o){void 0===i&&(i=400),void 0===r&&(r=O);var a=e-n;if(0!==a){var c=Date.now(),u=0,l=function(){var e=Math.min(1,(Date.now()-c)/i);t(n+r(e)*a)&&e<1?s():(cancelAnimationFrame(u),e>=1&&o&&o())};s()}function s(){u=requestAnimationFrame(l)}}var B={T:0,L:0,W:0,H:0,FIT:void 0},q=function(){var n=i(!1);return a(function(){return n.current=!0,function(){n.current=!1}},[]),n},j=["className"];function z(t){var i=t.className,r=void 0===i?"":i,o=p(t,j);return n("div",g({className:"PhotoView__Spinner "+r},o,{children:e("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white",children:[n("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),n("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})]})}))}var U=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function K(i){var r=i.src,o=i.loaded,a=i.broken,c=i.className,u=i.onPhotoLoad,l=i.loadingElement,s=i.brokenElement,d=p(i,U),h=q();return r&&!a?e(t,{children:[n("img",g({className:"PhotoView__Photo"+(c?" "+c:""),src:r,onLoad:function(n){var e=n.target;h.current&&u({loaded:!0,naturalWidth:e.naturalWidth,naturalHeight:e.naturalHeight})},onError:function(){h.current&&u({broken:!0})},draggable:!1,alt:""},d)),!o&&(l?n("span",{className:"PhotoView__icon",children:l}):n(z,{className:"PhotoView__icon"}))]}):s?n("span",{className:"PhotoView__icon",children:"function"==typeof s?s({src:r}):s}):null}var G={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function J(e){var t=e.item,r=t.src,o=t.render,c=t.width,u=void 0===c?0:c,l=t.height,d=void 0===l?0:l,h=t.originRef,v=e.visible,f=e.speed,m=e.easing,p=e.wrapClassName,y=e.className,x=e.style,C=e.loadingElement,k=e.brokenElement,Y=e.onPhotoTap,X=e.onMaskTap,W=e.onReachMove,S=e.onReachUp,V=e.onPhotoResize,T=e.isActive,O=e.expose,j=b(G),z=j[0],U=j[1],J=i(0),Q=q(),Z=z.naturalWidth,$=void 0===Z?u:Z,nn=z.naturalHeight,en=void 0===nn?d:nn,tn=z.width,rn=void 0===tn?u:tn,on=z.height,an=void 0===on?d:on,cn=z.loaded,un=void 0===cn?!r:cn,ln=z.broken,sn=z.x,dn=z.y,hn=z.touched,vn=z.stopRaf,fn=z.maskTouched,mn=z.rotate,gn=z.scale,pn=z.CX,wn=z.CY,bn=z.lastX,yn=z.lastY,xn=z.lastCX,Cn=z.lastCY,Pn=z.lastScale,kn=z.touchTime,_n=z.touchLength,Mn=z.pause,Nn=z.reach,Yn=w({onScale:function(n){return Xn(_(n))},onRotate:function(n){mn!==n&&(O({rotate:n}),U(g({rotate:n},I($,en,n))))}});function Xn(n,e,t){gn!==n&&(O({scale:n}),U(g({scale:n},E(sn,dn,rn,an,gn,n,e,t),n<=1&&{x:0,y:0})))}var Wn=H(function(n,e,t){if(void 0===t&&(t=0),(hn||fn)&&T){var i=L(mn,rn,an),r=i[0],o=i[1];if(0===t&&0===J.current){var a=Math.abs(n-pn)<=20,c=Math.abs(e-wn)<=20;if(a&&c)return void U({lastCX:n,lastCY:e});J.current=a?e>wn?3:2:1}var u,l=n-xn,s=e-Cn;if(0===t){var d=R(l+bn,gn,r,innerWidth)[0],h=R(s+yn,gn,o,innerHeight);u=function(n,e,t,i){return e&&1===n||"x"===i?"x":t&&n>1||"y"===i?"y":void 0}(J.current,d,h[0],Nn),void 0!==u&&W(u,n,e,gn)}if("x"===u||fn)return void U({reach:"x"});var v=_(gn+(t-_n)/100/2*gn,$/rn,.2);O({scale:v}),U(g({touchLength:t,reach:u,scale:v},E(sn,dn,rn,an,gn,v,n,e,l,s)))}},{maxWait:8});function Sn(n){return!vn&&!hn&&(Q.current&&U(g({},n,{pause:v})),Q.current)}var Vn,Tn,An,Rn,En,Ln,In,Hn,Dn=(En=function(n){return Sn({x:n})},Ln=function(n){return Sn({y:n})},In=function(n){return Q.current&&(O({scale:n}),U({scale:n})),!hn&&Q.current},Hn=w({X:function(n){return En(n)},Y:function(n){return Ln(n)},S:function(n){return In(n)}}),function(n,e,t,i,r,o,a,c,u,l,s){var d=L(l,r,o),h=d[0],v=d[1],f=R(n,c,h,innerWidth),m=f[0],g=f[1],p=R(e,c,v,innerHeight),w=p[0],b=p[1],y=Date.now()-s;if(y>=200||c!==a||Math.abs(u-a)>1){var x=E(n,e,r,o,a,c),C=x.x,P=x.y,k=m?g:C!==n?C:null,_=w?b:P!==e?P:null;return null!==k&&F(n,k,Hn.X),null!==_&&F(e,_,Hn.Y),void(c!==a&&F(a,c,Hn.S))}var M=(n-t)/y,N=(e-i)/y,Y=Math.sqrt(Math.pow(M,2)+Math.pow(N,2)),X=!1,W=!1;!function(n,e){var t,i=n,r=0,o=0,a=function(o){t||(t=o);var a=o-t,l=Math.sign(n),s=-.001*l,d=Math.sign(-i)*Math.pow(i,2)*2e-4,h=i*a+(s+d)*Math.pow(a,2)/2;r+=h,t=o,l*(i+=(s+d)*a)<=0?u():e(r)?c():u()};function c(){o=requestAnimationFrame(a)}function u(){cancelAnimationFrame(o)}c()}(Y,function(t){var i=n+t*(M/Y),r=e+t*(N/Y),o=R(i,a,h,innerWidth),c=o[0],u=o[1],l=R(r,a,v,innerHeight),s=l[0],d=l[1];if(c&&!X&&(X=!0,m?F(i,u,Hn.X):D(u,i+(i-u),Hn.X)),s&&!W&&(W=!0,w?F(r,d,Hn.Y):D(d,r+(r-d),Hn.Y)),X&&W)return!1;var f=X||Hn.X(u),g=W||Hn.Y(d);return f&&g})}),On=(Vn=Y,Tn=function(n,e){Nn||Xn(1!==gn?1:Math.max(2,$/rn),n,e)},An=i(0),Rn=H(function(){An.current=0,Vn.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var n=[].slice.call(arguments);An.current+=1,Rn.apply(void 0,n),An.current>=2&&(Rn.cancel(),An.current=0,Tn.apply(void 0,n))});function Fn(n,e){if(J.current=0,(hn||fn)&&T){U({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var t=_(gn,$/rn);if(Dn(sn,dn,bn,yn,rn,an,gn,t,Pn,mn,kn),S(n,e),pn===n&&wn===e){if(hn)return void On(n,e);fn&&X(n,e)}}}function Bn(n,e,t){void 0===t&&(t=0),U({touched:!0,CX:n,CY:e,lastCX:n,lastCY:e,lastX:sn,lastY:dn,lastScale:gn,touchLength:t,touchTime:Date.now()})}function qn(n){U({maskTouched:!0,CX:n.clientX,CY:n.clientY,lastX:sn,lastY:dn})}N(P?void 0:"mousemove",function(n){n.preventDefault(),Wn(n.clientX,n.clientY)}),N(P?void 0:"mouseup",function(n){Fn(n.clientX,n.clientY)}),N(P?"touchmove":void 0,function(n){n.preventDefault();var e=A(n);Wn.apply(void 0,e)},{passive:!1}),N(P?"touchend":void 0,function(n){var e=n.changedTouches[0];Fn(e.clientX,e.clientY)},{passive:!1}),N("resize",H(function(){un&&!hn&&(U(I($,en,mn)),V())},{maxWait:8})),M(function(){T&&O(g({scale:gn,rotate:mn},Yn))},[T]);var jn=function(n,e,t,r,o,c,u,l,d,h){var v=function(n,e,t,r,o){var a=i(!1),c=b({lead:!0,scale:t}),u=c[0],l=u.lead,s=u.scale,d=c[1],h=H(function(n){try{return o(!0),d({lead:!1,scale:n}),Promise.resolve()}catch(n){return Promise.reject(n)}},{wait:r});return M(function(){a.current?(o(!1),d({lead:!0}),h(t)):a.current=!0},[t]),l?[n*s,e*s,t/s]:[n*t,e*t,1]}(c,u,l,d,h),f=v[0],m=v[1],g=v[2],p=function(n,e,t,r,o){var c=s(B),u=c[0],l=c[1],d=s(0),h=d[0],v=d[1],f=i(null),m=w({OK:function(){return n&&v(4)}});function g(n){o(!1),v(n)}return a(function(){if(f.current||(f.current=Date.now()),t){if(function(n,e){var t=n&&n.current;if(t&&1===t.nodeType){var i=t.getBoundingClientRect();e({T:i.top,L:i.left,W:i.width,H:i.height,FIT:"IMG"===t.tagName?getComputedStyle(t).objectFit:void 0})}}(e,l),n)return Date.now()-f.current<250?(v(1),requestAnimationFrame(function(){v(2),requestAnimationFrame(function(){return g(3)})}),void setTimeout(m.OK,r)):void v(4);g(5)}},[n,t]),[h,u]}(n,e,t,d,h),y=p[0],x=p[1],C=x.W,P=x.FIT,k=innerWidth/2,_=innerHeight/2,N=y<3||y>4;return[N?C?x.L:k:r+(k-c*l/2),N?C?x.T:_:o+(_-u*l/2),f,N&&P?f*(x.H/C):m,0===y?g:N?C/(c*l)||.01:g,N?P?1:0:1,y,P]}(v,h,un,sn,dn,rn,an,gn,f,function(n){return U({pause:n})}),zn=jn[4],Un=jn[6],Kn="transform "+f+"ms "+m,Gn={className:y,onMouseDown:P?void 0:function(n){n.stopPropagation(),0===n.button&&Bn(n.clientX,n.clientY,0)},onTouchStart:P?function(n){n.stopPropagation(),Bn.apply(void 0,A(n))}:void 0,onWheel:function(n){if(!Nn){var e=_(gn-n.deltaY/100/2,$/rn);U({stopRaf:!0}),Xn(e,n.clientX,n.clientY)}},style:{width:jn[2]+"px",height:jn[3]+"px",opacity:jn[5],objectFit:4===Un?void 0:jn[7],transform:mn?"rotate("+mn+"deg)":void 0,transition:Un>2?Kn+", opacity "+f+"ms ease, height "+(Un<4?f/2:Un>4?f:0)+"ms "+m:void 0}};return n("div",{className:"PhotoView__PhotoWrap"+(p?" "+p:""),style:x,onMouseDown:!P&&T?qn:void 0,onTouchStart:P&&T?function(n){return qn(n.touches[0])}:void 0,children:n("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+zn+", 0, 0, "+zn+", "+jn[0]+", "+jn[1]+")",transition:hn||Mn?void 0:Kn,willChange:T?"transform":void 0},children:r?n(K,g({src:r,loaded:un,broken:ln},Gn,{onPhotoLoad:function(n){U(g({},n,n.loaded&&I(n.naturalWidth||0,n.naturalHeight||0,mn)))},loadingElement:C,brokenElement:k})):o&&o({attrs:Gn,scale:zn,rotate:mn})})})}var Q={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function Z(o){var c=o.loop,l=void 0===c?3:c,d=o.speed,h=o.easing,v=o.photoClosable,f=o.maskClosable,m=void 0===f||f,g=o.maskOpacity,p=void 0===g?1:g,y=o.pullClosable,_=void 0===y||y,Y=o.bannerVisible,A=void 0===Y||Y,R=o.overlayRender,E=o.toolbarRender,L=o.className,I=o.maskClassName,H=o.photoClassName,D=o.photoWrapClassName,O=o.loadingElement,F=o.brokenElement,B=o.images,q=o.index,j=void 0===q?0:q,z=o.onIndexChange,U=o.visible,K=o.onClose,G=o.afterClose,Z=o.portalContainer,$=b(Q),nn=$[0],en=$[1],tn=s(0),rn=tn[0],on=tn[1];s(null);var an=nn.x,cn=nn.touched,un=nn.pause,ln=nn.lastCX,sn=nn.lastCY,dn=nn.bg,hn=void 0===dn?p:dn,vn=nn.lastBg,fn=nn.overlay,mn=nn.minimal,gn=nn.scale,pn=nn.rotate,wn=nn.onScale,bn=nn.onRotate,yn=o.hasOwnProperty("index"),xn=yn?j:rn,Cn=yn?z:on,Pn=i(xn),kn=B.length,_n=B[xn],Mn="boolean"==typeof l?l:kn>l,Nn=function(n,e){var t=r(function(n){return!n},!1)[1],o=i(0),a=function(e){var t=i(e);function r(n){t.current=n}return u(function(){!function(e){n?(e(n),o.current=1):o.current=2}(r)},[e]),[t.current,r]}(n),c=a[1];return[a[0],o.current,function(){t(),2===o.current&&(c(!1),e&&e()),o.current=0}]}(U,G),Yn=Nn[0],Xn=Nn[1],Wn=Nn[2];M(function(){if(Yn)return en({pause:!0,x:xn*-(innerWidth+C)}),void(Pn.current=xn);en(Q)},[Yn]);var Sn=w({close:function(n){bn&&bn(0),en({overlay:!0,lastBg:hn}),K(n)},changeIndex:function(n,e){void 0===e&&(e=!1);var t=Mn?Pn.current+(n-xn):n,i=kn-1,r=k(t,0,i),o=Mn?t:r,a=innerWidth+C;en({touched:!1,x:-a*Pn.current,lastCX:void 0,lastCY:void 0,bg:p,overlay:fn}),en({touched:!1,lastCX:void 0,lastCY:void 0,x:-a*o,pause:e}),Pn.current=o,Cn&&Cn(Mn?n<0?i:n>i?0:n:r)}}),Vn=Sn.close,Tn=Sn.changeIndex;function An(n){return n?Vn():en({overlay:!fn})}function Rn(){en({x:-(innerWidth+C)*xn,lastCX:void 0,lastCY:void 0,pause:!0}),Pn.current=xn}function En(n,e,t,i){"x"===n?function(n){if(void 0!==ln){var e=n-ln,t=e;!Mn&&(0===xn&&e>0||xn===kn-1&&e<0)&&(t=e/2),en({touched:!0,lastCX:ln,x:-(innerWidth+C)*Pn.current+t,pause:!1})}else en({touched:!0,lastCX:n,x:an,pause:!1})}(e):"y"===n&&function(n,e){if(void 0!==sn){var t=null===p?null:k(p,.01,p-Math.abs(n-sn)/100/4);en({touched:!0,lastCY:sn,bg:1===e?t:p,minimal:1===e})}else en({touched:!0,lastCY:n,bg:hn,minimal:!0})}(t,i)}function Ln(n,e){var t=n-(null!=ln?ln:n),i=e-(null!=sn?sn:e),r=!1;if(console.log("handleReachUp"),t<-40)Tn(xn+1);else if(t>40)Tn(xn-1);else{var o=-(innerWidth+C)*Pn.current;Math.abs(i)>100&&mn&&_&&(r=!0,Vn()),en({touched:!1,x:o,lastCX:void 0,lastCY:void 0,bg:p,overlay:!!r||fn})}}N("keydown",function(n){if(U)switch(n.key){case"ArrowLeft":Tn(xn-1,!0);break;case"ArrowRight":Tn(xn+1,!0);break;case"Escape":Vn()}});var In=function(n,e,t){return u(function(){var i=n.length;return t?n.concat(n).concat(n).slice(i+e-1,i+e+2):n.slice(Math.max(e-1,0),Math.min(e+2,i+1))},[n,e,t])}(B,xn,Mn);if(a(function(){document.querySelectorAll(".PhotoView__Photo").forEach(function(n){n.classList.remove("slider-transitions")})},[xn]),!Yn)return null;var Hn=fn&&!Xn,Dn=U?hn:vn,On=wn&&bn&&{images:B,index:xn,visible:U,onClose:Vn,onIndexChange:Tn,overlayVisible:Hn,overlay:_n&&_n.overlay,scale:gn,rotate:pn,onScale:wn,onRotate:bn},Fn=d?d(Xn):400,Bn=h?h(Xn):x,qn=d?d(3):600,jn=h?h(3):x;return e(X,{className:"PhotoView-Portal"+(Hn?"":" PhotoView-Slider__clean")+(U?"":" PhotoView-Slider__willClose")+(L?" "+L:""),role:"dialog",onClick:function(n){return n.stopPropagation()},container:Z,children:[U&&n(T,{}),n("div",{className:"PhotoView-Slider__Backdrop"+(I?" "+I:"")+(1===Xn?" PhotoView-Slider__fadeIn":2===Xn?" PhotoView-Slider__fadeOut":""),style:{background:Dn?"rgba(0, 0, 0, "+Dn+")":void 0,transitionTimingFunction:Bn,transitionDuration:(cn?0:Fn)+"ms",animationDuration:Fn+"ms"},onAnimationEnd:Wn}),A&&e("div",{className:"PhotoView-Slider__BannerWrap",children:[e("div",{className:"PhotoView-Slider__Counter",children:[xn+1," / ",kn]}),e("div",{className:"PhotoView-Slider__BannerRight",children:[E&&On&&E(On),n(W,{className:"close",onClick:Vn})]})]}),In.map(function(e,t){var i=Mn||0!==xn?Pn.current-1+t:xn+t;return n(J,{item:e,speed:Fn,easing:Bn,visible:U,onReachMove:En,onReachUp:Ln,onPhotoTap:function(){return An(v)},onMaskTap:function(){return An(m)},wrapClassName:D,className:H,style:{left:(innerWidth+C)*i+"px",transform:"translate3d("+an+"px, 0px, 0)",transition:cn||un?void 0:"transform "+qn+"ms "+jn},loadingElement:O,brokenElement:F,onPhotoResize:Rn,isActive:Pn.current===i,expose:en},Mn?e.key+"/"+e.src+"/"+i:e.key)}),!P&&A&&e(t,{children:[(Mn||0!==xn)&&n("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){document.querySelectorAll(".PhotoView__Photo").forEach(function(n){n.classList.add("slider-transitions")}),Tn(xn-1)},children:n(S,{})}),(Mn||xn+1<kn)&&n("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){document.querySelectorAll(".PhotoView__Photo").forEach(function(n){n.classList.add("slider-transitions")}),Tn(xn+1)},children:n(V,{})})]}),R&&On&&n("div",{className:"PhotoView-Slider__Overlay",children:R(On)})]})}var $=["children","onIndexChange","onVisibleChange"],nn={images:[],visible:!1,index:0};function en(t){var r=t.children,o=t.onIndexChange,a=t.onVisibleChange,c=p(t,$),l=b(nn),s=l[0],d=l[1],h=i(0),v=s.images,f=s.visible,m=s.index,x=w({nextId:function(){return h.current+=1},update:function(n){var e=v.findIndex(function(e){return e.key===n.key});if(e>-1){var t=v.slice();return t.splice(e,1,n),void d({images:t})}d(function(e){return{images:e.images.concat(n)}})},remove:function(n){d(function(e){var t=e.images.filter(function(e){return e.key!==n});return{images:t,index:Math.min(t.length-1,m)}})},show:function(n){var e=v.findIndex(function(e){return e.key===n});d({visible:!0,index:e}),a&&a(!0,e,s)}}),C=w({close:function(){d({visible:!1}),a&&a(!1,m,s)},changeIndex:function(n){d({index:n}),o&&o(n,s)}}),P=u(function(){return g({},s,x)},[s,x]);return e(y.Provider,{value:P,children:[r,n(Z,g({images:v,visible:f,index:m,onIndexChange:C.changeIndex,onClose:C.close},c))]})}var tn=function(n){var e,t,r=n.src,o=n.render,c=n.overlay,l=n.width,s=n.height,m=n.triggers,p=void 0===m?["onClick"]:m,b=n.children,x=d(y),C=(e=function(){return x.nextId()},(t=i({sign:!1,fn:void 0}).current).sign||(t.sign=!0,t.fn=e()),t.fn),P=i(null);h(null==b?void 0:b.ref,function(){return P.current}),a(function(){return function(){x.remove(C)}},[]);var k=w({render:function(n){return o&&o(n)},show:function(n,e){x.show(C),function(n,e){if(b){var t=b.props[n];t&&t(e)}}(n,e)}}),_=u(function(){var n={};return p.forEach(function(e){n[e]=k.show.bind(null,e)}),n},[]);return a(function(){x.update({key:C,src:r,originRef:P,render:k.render,overlay:c,width:l,height:s})},[r]),b?v.only(f(b,g({},_,{ref:P}))):null};export{en as PhotoProvider,Z as PhotoSlider,tn as PhotoView};
//# sourceMappingURL=react-photo-view.module.js.map
